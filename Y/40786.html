<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>wp</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1468.html#L95'>wp</a>                 95 sapi/fpm/fpm/fpm.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1468.html#L98'>wp</a>                 98 sapi/fpm/fpm/fpm.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1468.html#L101'>wp</a>                101 sapi/fpm/fpm/fpm.c 		is_parent = fpm_children_create_initial(wp);</span>
<span class='curline'><a href='../S/1472.html#L91'>wp</a>                 91 sapi/fpm/fpm/fpm_children.c 	struct fpm_worker_pool_s *wp = child-&gt;wp;</span>
<span class='curline'><a href='../S/1472.html#L93'>wp</a>                 93 sapi/fpm/fpm/fpm_children.c 	++wp-&gt;running_children;</span>
<span class='curline'><a href='../S/1472.html#L96'>wp</a>                 96 sapi/fpm/fpm/fpm_children.c 	child-&gt;next = wp-&gt;children;</span>
<span class='curline'><a href='../S/1472.html#L101'>wp</a>                101 sapi/fpm/fpm/fpm_children.c 	wp-&gt;children = child;</span>
<span class='curline'><a href='../S/1472.html#L107'>wp</a>                107 sapi/fpm/fpm/fpm_children.c 	--child-&gt;wp-&gt;running_children;</span>
<span class='curline'><a href='../S/1472.html#L113'>wp</a>                113 sapi/fpm/fpm/fpm_children.c 		child-&gt;wp-&gt;children = child-&gt;next;</span>
<span class='curline'><a href='../S/1472.html#L124'>wp</a>                124 sapi/fpm/fpm/fpm_children.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1472.html#L127'>wp</a>                127 sapi/fpm/fpm/fpm_children.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1472.html#L129'>wp</a>                129 sapi/fpm/fpm/fpm_children.c 		for (child = wp-&gt;children; child; child = child-&gt;next) {</span>
<span class='curline'><a href='../S/1472.html#L146'>wp</a>                146 sapi/fpm/fpm/fpm_children.c static void fpm_child_init(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1472.html#L148'>wp</a>                148 sapi/fpm/fpm/fpm_children.c 	fpm_globals.max_requests = wp-&gt;config-&gt;pm_max_requests;</span>
<span class='curline'><a href='../S/1472.html#L150'>wp</a>                150 sapi/fpm/fpm/fpm_children.c 	if (0 &gt; fpm_stdio_init_child(wp)  ||</span>
<span class='curline'><a href='../S/1472.html#L151'>wp</a>                151 sapi/fpm/fpm/fpm_children.c 	    0 &gt; fpm_log_init_child(wp)    ||</span>
<span class='curline'><a href='../S/1472.html#L152'>wp</a>                152 sapi/fpm/fpm/fpm_children.c 	    0 &gt; fpm_status_init_child(wp) ||</span>
<span class='curline'><a href='../S/1472.html#L153'>wp</a>                153 sapi/fpm/fpm/fpm_children.c 	    0 &gt; fpm_unix_init_child(wp)   ||</span>
<span class='curline'><a href='../S/1472.html#L155'>wp</a>                155 sapi/fpm/fpm/fpm_children.c 	    0 &gt; fpm_env_init_child(wp)    ||</span>
<span class='curline'><a href='../S/1472.html#L156'>wp</a>                156 sapi/fpm/fpm/fpm_children.c 	    0 &gt; fpm_php_init_child(wp)) {</span>
<span class='curline'><a href='../S/1472.html#L158'>wp</a>                158 sapi/fpm/fpm/fpm_children.c 		zlog(ZLOG_ERROR, "[pool %s] child failed to initialize", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1472.html#L237'>wp</a>                237 sapi/fpm/fpm/fpm_children.c 			struct fpm_worker_pool_s *wp = child-&gt;wp;</span>
<span class='curline'><a href='../S/1472.html#L242'>wp</a>                242 sapi/fpm/fpm/fpm_children.c 			fpm_scoreboard_proc_free(wp-&gt;scoreboard, child-&gt;scoreboard_i);</span>
<span class='curline'><a href='../S/1472.html#L252'>wp</a>                252 sapi/fpm/fpm/fpm_children.c 				zlog(severity, "[pool %s] child %d exited %s after %ld.%06d seconds from start", child-&gt;wp-&gt;config-&gt;name, (int) pid, buf, tv2.tv_sec, (int) tv2.tv_usec);</span>
<span class='curline'><a href='../S/1472.html#L254'>wp</a>                254 sapi/fpm/fpm/fpm_children.c 				zlog(ZLOG_DEBUG, "[pool %s] child %d has been killed by the process management after %ld.%06d seconds from start", child-&gt;wp-&gt;config-&gt;name, (int) pid, tv2.tv_sec, (int) tv2.tv_usec);</span>
<span class='curline'><a href='../S/1472.html#L288'>wp</a>                288 sapi/fpm/fpm/fpm_children.c 				fpm_children_make(wp, 1 /* in event loop */, 1, 0);</span>
<span class='curline'><a href='../S/1472.html#L301'>wp</a>                301 sapi/fpm/fpm/fpm_children.c static struct fpm_child_s *fpm_resources_prepare(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1472.html#L308'>wp</a>                308 sapi/fpm/fpm/fpm_children.c 		zlog(ZLOG_ERROR, "[pool %s] unable to malloc new child", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1472.html#L312'>wp</a>                312 sapi/fpm/fpm/fpm_children.c 	c-&gt;wp = wp;</span>
<span class='curline'><a href='../S/1472.html#L320'>wp</a>                320 sapi/fpm/fpm/fpm_children.c 	if (0 &gt; fpm_scoreboard_proc_alloc(wp-&gt;scoreboard, &amp;c-&gt;scoreboard_i)) {</span>
<span class='curline'><a href='../S/1472.html#L332'>wp</a>                332 sapi/fpm/fpm/fpm_children.c 	fpm_scoreboard_proc_free(child-&gt;wp-&gt;scoreboard, child-&gt;scoreboard_i);</span>
<span class='curline'><a href='../S/1472.html#L340'>wp</a>                340 sapi/fpm/fpm/fpm_children.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1472.html#L341'>wp</a>                341 sapi/fpm/fpm/fpm_children.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1472.html#L342'>wp</a>                342 sapi/fpm/fpm/fpm_children.c 		if (wp == child-&gt;wp) {</span>
<span class='curline'><a href='../S/1472.html#L345'>wp</a>                345 sapi/fpm/fpm/fpm_children.c 		fpm_scoreboard_free(wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1472.html#L348'>wp</a>                348 sapi/fpm/fpm/fpm_children.c 	fpm_scoreboard_child_use(child-&gt;wp-&gt;scoreboard, child-&gt;scoreboard_i, getpid());</span>
<span class='curline'><a href='../S/1472.html#L361'>wp</a>                361 sapi/fpm/fpm/fpm_children.c int fpm_children_make(struct fpm_worker_pool_s *wp, int in_event_loop, int nb_to_spawn, int is_debug) /* {{{ */</span>
<span class='curline'><a href='../S/1472.html#L368'>wp</a>                368 sapi/fpm/fpm/fpm_children.c 	if (wp-&gt;config-&gt;pm == PM_STYLE_DYNAMIC) {</span>
<span class='curline'><a href='../S/1472.html#L370'>wp</a>                370 sapi/fpm/fpm/fpm_children.c 			max = wp-&gt;config-&gt;pm_start_servers;</span>
<span class='curline'><a href='../S/1472.html#L372'>wp</a>                372 sapi/fpm/fpm/fpm_children.c 			max = wp-&gt;running_children + nb_to_spawn;</span>
<span class='curline'><a href='../S/1472.html#L374'>wp</a>                374 sapi/fpm/fpm/fpm_children.c 	} else if (wp-&gt;config-&gt;pm == PM_STYLE_ONDEMAND) {</span>
<span class='curline'><a href='../S/1472.html#L378'>wp</a>                378 sapi/fpm/fpm/fpm_children.c 			max = wp-&gt;running_children + nb_to_spawn;</span>
<span class='curline'><a href='../S/1472.html#L381'>wp</a>                381 sapi/fpm/fpm/fpm_children.c 		max = wp-&gt;config-&gt;pm_max_children;</span>
<span class='curline'><a href='../S/1472.html#L391'>wp</a>                391 sapi/fpm/fpm/fpm_children.c 	while (fpm_pctl_can_spawn_children() &amp;&amp; wp-&gt;running_children &lt; max &amp;&amp; (fpm_global_config.process_max &lt; 1 || fpm_globals.running_children &lt; fpm_global_config.process_max)) {</span>
<span class='curline'><a href='../S/1472.html#L394'>wp</a>                394 sapi/fpm/fpm/fpm_children.c 		child = fpm_resources_prepare(wp);</span>
<span class='curline'><a href='../S/1472.html#L407'>wp</a>                407 sapi/fpm/fpm/fpm_children.c 				fpm_child_init(wp);</span>
<span class='curline'><a href='../S/1472.html#L421'>wp</a>                421 sapi/fpm/fpm/fpm_children.c 				zlog(is_debug ? ZLOG_DEBUG : ZLOG_NOTICE, "[pool %s] child %d started", wp-&gt;config-&gt;name, (int) pid);</span>
<span class='curline'><a href='../S/1472.html#L435'>wp</a>                435 sapi/fpm/fpm/fpm_children.c int fpm_children_create_initial(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1472.html#L437'>wp</a>                437 sapi/fpm/fpm/fpm_children.c 	if (wp-&gt;config-&gt;pm == PM_STYLE_ONDEMAND) {</span>
<span class='curline'><a href='../S/1472.html#L438'>wp</a>                438 sapi/fpm/fpm/fpm_children.c 		wp-&gt;ondemand_event = (struct fpm_event_s *)malloc(sizeof(struct fpm_event_s));</span>
<span class='curline'><a href='../S/1472.html#L440'>wp</a>                440 sapi/fpm/fpm/fpm_children.c 		if (!wp-&gt;ondemand_event) {</span>
<span class='curline'><a href='../S/1472.html#L441'>wp</a>                441 sapi/fpm/fpm/fpm_children.c 			zlog(ZLOG_ERROR, "[pool %s] unable to malloc the ondemand socket event", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1472.html#L446'>wp</a>                446 sapi/fpm/fpm/fpm_children.c 		memset(wp-&gt;ondemand_event, 0, sizeof(struct fpm_event_s));</span>
<span class='curline'><a href='../S/1472.html#L447'>wp</a>                447 sapi/fpm/fpm/fpm_children.c 		fpm_event_set(wp-&gt;ondemand_event, wp-&gt;listening_socket, FPM_EV_READ | FPM_EV_EDGE, fpm_pctl_on_socket_accept, wp);</span>
<span class='curline'><a href='../S/1472.html#L448'>wp</a>                448 sapi/fpm/fpm/fpm_children.c 		wp-&gt;socket_event_set = 1;</span>
<span class='curline'><a href='../S/1472.html#L449'>wp</a>                449 sapi/fpm/fpm/fpm_children.c 		fpm_event_add(wp-&gt;ondemand_event, 0);</span>
<span class='curline'><a href='../S/1472.html#L453'>wp</a>                453 sapi/fpm/fpm/fpm_children.c 	return fpm_children_make(wp, 0 /* not in event loop yet */, 0, 1);</span>
<span class='curline'><a href='../S/1473.html#L14'>wp</a>                 14 sapi/fpm/fpm/fpm_children.h int fpm_children_create_initial(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1473.html#L18'>wp</a>                 18 sapi/fpm/fpm/fpm_children.h int fpm_children_make(struct fpm_worker_pool_s *wp, int in_event_loop, int nb_to_spawn, int is_debug);</span>
<span class='curline'><a href='../S/1473.html#L25'>wp</a>                 25 sapi/fpm/fpm/fpm_children.h 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1478.html#L597'>wp</a>                597 sapi/fpm/fpm/fpm_conf.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1478.html#L599'>wp</a>                599 sapi/fpm/fpm/fpm_conf.c 	wp = fpm_worker_pool_alloc();</span>
<span class='curline'><a href='../S/1478.html#L601'>wp</a>                601 sapi/fpm/fpm/fpm_conf.c 	if (!wp) {</span>
<span class='curline'><a href='../S/1478.html#L605'>wp</a>                605 sapi/fpm/fpm/fpm_conf.c 	wp-&gt;config = malloc(sizeof(struct fpm_worker_pool_config_s));</span>
<span class='curline'><a href='../S/1478.html#L607'>wp</a>                607 sapi/fpm/fpm/fpm_conf.c 	if (!wp-&gt;config) {</span>
<span class='curline'><a href='../S/1478.html#L608'>wp</a>                608 sapi/fpm/fpm/fpm_conf.c 		fpm_worker_pool_free(wp);</span>
<span class='curline'><a href='../S/1478.html#L612'>wp</a>                612 sapi/fpm/fpm/fpm_conf.c 	memset(wp-&gt;config, 0, sizeof(struct fpm_worker_pool_config_s));</span>
<span class='curline'><a href='../S/1478.html#L613'>wp</a>                613 sapi/fpm/fpm/fpm_conf.c 	wp-&gt;config-&gt;listen_backlog = FPM_BACKLOG_DEFAULT;</span>
<span class='curline'><a href='../S/1478.html#L614'>wp</a>                614 sapi/fpm/fpm/fpm_conf.c 	wp-&gt;config-&gt;pm_process_idle_timeout = 10; /* 10s by default */</span>
<span class='curline'><a href='../S/1478.html#L615'>wp</a>                615 sapi/fpm/fpm/fpm_conf.c 	wp-&gt;config-&gt;process_priority = 64; /* 64 means unset */</span>
<span class='curline'><a href='../S/1478.html#L616'>wp</a>                616 sapi/fpm/fpm/fpm_conf.c 	wp-&gt;config-&gt;clear_env = 1;</span>
<span class='curline'><a href='../S/1478.html#L619'>wp</a>                619 sapi/fpm/fpm/fpm_conf.c 		fpm_worker_all_pools = wp;</span>
<span class='curline'><a href='../S/1478.html#L624'>wp</a>                624 sapi/fpm/fpm/fpm_conf.c 				tmp-&gt;next = wp;</span>
<span class='curline'><a href='../S/1478.html#L631'>wp</a>                631 sapi/fpm/fpm/fpm_conf.c 	current_wp = wp;</span>
<span class='curline'><a href='../S/1478.html#L632'>wp</a>                632 sapi/fpm/fpm/fpm_conf.c 	return wp-&gt;config;</span>
<span class='curline'><a href='../S/1478.html#L685'>wp</a>                685 sapi/fpm/fpm/fpm_conf.c static int fpm_evaluate_full_path(char **path, struct fpm_worker_pool_s *wp, char *default_prefix, int expand) /* {{{ */</span>
<span class='curline'><a href='../S/1478.html#L694'>wp</a>                694 sapi/fpm/fpm/fpm_conf.c 	if (wp &amp;&amp; wp-&gt;config) {</span>
<span class='curline'><a href='../S/1478.html#L695'>wp</a>                695 sapi/fpm/fpm/fpm_conf.c 		prefix = wp-&gt;config-&gt;prefix;</span>
<span class='curline'><a href='../S/1478.html#L738'>wp</a>                738 sapi/fpm/fpm/fpm_conf.c 	if (**path != '/' &amp;&amp; wp != NULL &amp;&amp; wp-&gt;config) {</span>
<span class='curline'><a href='../S/1478.html#L747'>wp</a>                747 sapi/fpm/fpm/fpm_conf.c 	struct fpm_worker_pool_s *wp, *wp2;</span>
<span class='curline'><a href='../S/1478.html#L754'>wp</a>                754 sapi/fpm/fpm/fpm_conf.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L757'>wp</a>                757 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;prefix &amp;&amp; *wp-&gt;config-&gt;prefix) {</span>
<span class='curline'><a href='../S/1478.html#L758'>wp</a>                758 sapi/fpm/fpm/fpm_conf.c 			fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;prefix, NULL, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L760'>wp</a>                760 sapi/fpm/fpm/fpm_conf.c 			if (!fpm_conf_is_dir(wp-&gt;config-&gt;prefix)) {</span>
<span class='curline'><a href='../S/1478.html#L761'>wp</a>                761 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the prefix '%s' does not exist or is not a directory", wp-&gt;config-&gt;name, wp-&gt;config-&gt;prefix);</span>
<span class='curline'><a href='../S/1478.html#L767'>wp</a>                767 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config-&gt;user &amp;&amp; !geteuid()) {</span>
<span class='curline'><a href='../S/1478.html#L768'>wp</a>                768 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ALERT, "[pool %s] user has not been defined", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L773'>wp</a>                773 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;listen_address &amp;&amp; *wp-&gt;config-&gt;listen_address) {</span>
<span class='curline'><a href='../S/1478.html#L774'>wp</a>                774 sapi/fpm/fpm/fpm_conf.c 			wp-&gt;listen_address_domain = fpm_sockets_domain_from_address(wp-&gt;config-&gt;listen_address);</span>
<span class='curline'><a href='../S/1478.html#L776'>wp</a>                776 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;listen_address_domain == FPM_AF_UNIX &amp;&amp; *wp-&gt;config-&gt;listen_address != '/') {</span>
<span class='curline'><a href='../S/1478.html#L777'>wp</a>                777 sapi/fpm/fpm/fpm_conf.c 				fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;listen_address, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L780'>wp</a>                780 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ALERT, "[pool %s] no listen address have been defined!", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L784'>wp</a>                784 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;process_priority != 64 &amp;&amp; (wp-&gt;config-&gt;process_priority &lt; -19 || wp-&gt;config-&gt;process_priority &gt; 20)) {</span>
<span class='curline'><a href='../S/1478.html#L785'>wp</a>                785 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ERROR, "[pool %s] process.priority must be included into [-19,20]", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L790'>wp</a>                790 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;pm != PM_STYLE_STATIC &amp;&amp; wp-&gt;config-&gt;pm != PM_STYLE_DYNAMIC &amp;&amp; wp-&gt;config-&gt;pm != PM_STYLE_ONDEMAND) {</span>
<span class='curline'><a href='../S/1478.html#L791'>wp</a>                791 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ALERT, "[pool %s] the process manager is missing (static, dynamic or ondemand)", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L796'>wp</a>                796 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;pm_max_children &lt; 1) {</span>
<span class='curline'><a href='../S/1478.html#L797'>wp</a>                797 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ALERT, "[pool %s] pm.max_children must be a positive value", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L802'>wp</a>                802 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;pm == PM_STYLE_DYNAMIC) {</span>
<span class='curline'><a href='../S/1478.html#L803'>wp</a>                803 sapi/fpm/fpm/fpm_conf.c 			struct fpm_worker_pool_config_s *config = wp-&gt;config;</span>
<span class='curline'><a href='../S/1478.html#L806'>wp</a>                806 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.min_spare_servers(%d) must be a positive value", wp-&gt;config-&gt;name, config-&gt;pm_min_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L811'>wp</a>                811 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.max_spare_servers(%d) must be a positive value", wp-&gt;config-&gt;name, config-&gt;pm_max_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L817'>wp</a>                817 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.min_spare_servers(%d) and pm.max_spare_servers(%d) cannot be greater than pm.max_children(%d)", wp-&gt;config-&gt;name, config-&gt;pm_min_spare_servers, config-&gt;pm_max_spare_servers, config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1478.html#L822'>wp</a>                822 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.max_spare_servers(%d) must not be less than pm.min_spare_servers(%d)", wp-&gt;config-&gt;name, config-&gt;pm_max_spare_servers, config-&gt;pm_min_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L828'>wp</a>                828 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_NOTICE, "[pool %s] pm.start_servers is not set. It's been set to %d.", wp-&gt;config-&gt;name, config-&gt;pm_start_servers);</span>
<span class='curline'><a href='../S/1478.html#L831'>wp</a>                831 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.start_servers(%d) must not be less than pm.min_spare_servers(%d) and not greater than pm.max_spare_servers(%d)", wp-&gt;config-&gt;name, config-&gt;pm_start_servers, config-&gt;pm_min_spare_servers, config-&gt;pm_max_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L834'>wp</a>                834 sapi/fpm/fpm/fpm_conf.c 		} else if (wp-&gt;config-&gt;pm == PM_STYLE_ONDEMAND) {</span>
<span class='curline'><a href='../S/1478.html#L835'>wp</a>                835 sapi/fpm/fpm/fpm_conf.c 			struct fpm_worker_pool_config_s *config = wp-&gt;config;</span>
<span class='curline'><a href='../S/1478.html#L838'>wp</a>                838 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] ondemand process manager can ONLY be used when events.mechanisme is either epoll (Linux) or kqueue (*BSD).", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L843'>wp</a>                843 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ALERT, "[pool %s] pm.process_idle_timeout(%ds) must be greater than 0s", wp-&gt;config-&gt;name, config-&gt;pm_process_idle_timeout);</span>
<span class='curline'><a href='../S/1478.html#L848'>wp</a>                848 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_WARNING, "[pool %s] listen.backlog(%d) was too low for the ondemand process manager. I updated it for you to %d.", wp-&gt;config-&gt;name, config-&gt;listen_backlog, FPM_BACKLOG_DEFAULT);</span>
<span class='curline'><a href='../S/1478.html#L859'>wp</a>                859 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;pm_status_path &amp;&amp; *wp-&gt;config-&gt;pm_status_path) {</span>
<span class='curline'><a href='../S/1478.html#L861'>wp</a>                861 sapi/fpm/fpm/fpm_conf.c 			char *status = wp-&gt;config-&gt;pm_status_path;</span>
<span class='curline'><a href='../S/1478.html#L864'>wp</a>                864 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the status path '%s' must start with a '/'", wp-&gt;config-&gt;name, status);</span>
<span class='curline'><a href='../S/1478.html#L869'>wp</a>                869 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the status path '%s' is not long enough", wp-&gt;config-&gt;name, status);</span>
<span class='curline'><a href='../S/1478.html#L875'>wp</a>                875 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] the status path '%s' must contain only the following characters '[alphanum]/_-.'", wp-&gt;config-&gt;name, status);</span>
<span class='curline'><a href='../S/1478.html#L882'>wp</a>                882 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;ping_path &amp;&amp; *wp-&gt;config-&gt;ping_path) {</span>
<span class='curline'><a href='../S/1478.html#L883'>wp</a>                883 sapi/fpm/fpm/fpm_conf.c 			char *ping = wp-&gt;config-&gt;ping_path;</span>
<span class='curline'><a href='../S/1478.html#L887'>wp</a>                887 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the ping path '%s' must start with a '/'", wp-&gt;config-&gt;name, ping);</span>
<span class='curline'><a href='../S/1478.html#L892'>wp</a>                892 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the ping path '%s' is not long enough", wp-&gt;config-&gt;name, ping);</span>
<span class='curline'><a href='../S/1478.html#L898'>wp</a>                898 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] the ping path '%s' must containt only the following characters '[alphanum]/_-.'", wp-&gt;config-&gt;name, ping);</span>
<span class='curline'><a href='../S/1478.html#L903'>wp</a>                903 sapi/fpm/fpm/fpm_conf.c 			if (!wp-&gt;config-&gt;ping_response) {</span>
<span class='curline'><a href='../S/1478.html#L904'>wp</a>                904 sapi/fpm/fpm/fpm_conf.c 				wp-&gt;config-&gt;ping_response = strdup("pong");</span>
<span class='curline'><a href='../S/1478.html#L906'>wp</a>                906 sapi/fpm/fpm/fpm_conf.c 				if (strlen(wp-&gt;config-&gt;ping_response) &lt; 1) {</span>
<span class='curline'><a href='../S/1478.html#L907'>wp</a>                907 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] the ping response page '%s' is not long enough", wp-&gt;config-&gt;name, wp-&gt;config-&gt;ping_response);</span>
<span class='curline'><a href='../S/1478.html#L912'>wp</a>                912 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;config-&gt;ping_response) {</span>
<span class='curline'><a href='../S/1478.html#L913'>wp</a>                913 sapi/fpm/fpm/fpm_conf.c 				free(wp-&gt;config-&gt;ping_response);</span>
<span class='curline'><a href='../S/1478.html#L914'>wp</a>                914 sapi/fpm/fpm/fpm_conf.c 				wp-&gt;config-&gt;ping_response = NULL;</span>
<span class='curline'><a href='../S/1478.html#L919'>wp</a>                919 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;access_log &amp;&amp; *wp-&gt;config-&gt;access_log) {</span>
<span class='curline'><a href='../S/1478.html#L920'>wp</a>                920 sapi/fpm/fpm/fpm_conf.c 			fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;access_log, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L921'>wp</a>                921 sapi/fpm/fpm/fpm_conf.c 			if (!wp-&gt;config-&gt;access_format) {</span>
<span class='curline'><a href='../S/1478.html#L922'>wp</a>                922 sapi/fpm/fpm/fpm_conf.c 				wp-&gt;config-&gt;access_format = strdup("%R - %u %t \"%m %r\" %s");</span>
<span class='curline'><a href='../S/1478.html#L926'>wp</a>                926 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;request_terminate_timeout) {</span>
<span class='curline'><a href='../S/1478.html#L927'>wp</a>                927 sapi/fpm/fpm/fpm_conf.c 			fpm_globals.heartbeat = fpm_globals.heartbeat ? MIN(fpm_globals.heartbeat, (wp-&gt;config-&gt;request_terminate_timeout * 1000) / 3) : (wp-&gt;config-&gt;request_terminate_timeout * 1000) / 3;</span>
<span class='curline'><a href='../S/1478.html#L931'>wp</a>                931 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;slowlog &amp;&amp; *wp-&gt;config-&gt;slowlog) {</span>
<span class='curline'><a href='../S/1478.html#L932'>wp</a>                932 sapi/fpm/fpm/fpm_conf.c 			fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;slowlog, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L936'>wp</a>                936 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;request_slowlog_timeout) {</span>
<span class='curline'><a href='../S/1478.html#L938'>wp</a>                938 sapi/fpm/fpm/fpm_conf.c 			if (! (wp-&gt;config-&gt;slowlog &amp;&amp; *wp-&gt;config-&gt;slowlog)) {</span>
<span class='curline'><a href='../S/1478.html#L939'>wp</a>                939 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] 'slowlog' must be specified for use with 'request_slowlog_timeout'", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L946'>wp</a>                946 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_WARNING, "[pool %s] 'request_slowlog_timeout' is not supported on your system",	wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L950'>wp</a>                950 sapi/fpm/fpm/fpm_conf.c 			wp-&gt;config-&gt;request_slowlog_timeout = 0;</span>
<span class='curline'><a href='../S/1478.html#L953'>wp</a>                953 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;config-&gt;slowlog &amp;&amp; *wp-&gt;config-&gt;slowlog) {</span>
<span class='curline'><a href='../S/1478.html#L956'>wp</a>                956 sapi/fpm/fpm/fpm_conf.c 				fd = open(wp-&gt;config-&gt;slowlog, O_WRONLY | O_APPEND | O_CREAT, S_IRUSR | S_IWUSR);</span>
<span class='curline'><a href='../S/1478.html#L959'>wp</a>                959 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_SYSERROR, "Unable to create or open slowlog(%s)", wp-&gt;config-&gt;slowlog);</span>
<span class='curline'><a href='../S/1478.html#L965'>wp</a>                965 sapi/fpm/fpm/fpm_conf.c 			fpm_globals.heartbeat = fpm_globals.heartbeat ? MIN(fpm_globals.heartbeat, (wp-&gt;config-&gt;request_slowlog_timeout * 1000) / 3) : (wp-&gt;config-&gt;request_slowlog_timeout * 1000) / 3;</span>
<span class='curline'><a href='../S/1478.html#L967'>wp</a>                967 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;config-&gt;request_terminate_timeout &amp;&amp; wp-&gt;config-&gt;request_slowlog_timeout &gt; wp-&gt;config-&gt;request_terminate_timeout) {</span>
<span class='curline'><a href='../S/1478.html#L968'>wp</a>                968 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] 'request_slowlog_timeout' (%d) can't be greater than 'request_terminate_timeout' (%d)", wp-&gt;config-&gt;name, wp-&gt;config-&gt;request_slowlog_timeout, wp-&gt;config-&gt;request_terminate_timeout);</span>
<span class='curline'><a href='../S/1478.html#L974'>wp</a>                974 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;chroot &amp;&amp; *wp-&gt;config-&gt;chroot) {</span>
<span class='curline'><a href='../S/1478.html#L976'>wp</a>                976 sapi/fpm/fpm/fpm_conf.c 			fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;chroot, wp, NULL, 1);</span>
<span class='curline'><a href='../S/1478.html#L978'>wp</a>                978 sapi/fpm/fpm/fpm_conf.c 			if (*wp-&gt;config-&gt;chroot != '/') {</span>
<span class='curline'><a href='../S/1478.html#L979'>wp</a>                979 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the chroot path '%s' must start with a '/'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chroot);</span>
<span class='curline'><a href='../S/1478.html#L983'>wp</a>                983 sapi/fpm/fpm/fpm_conf.c 			if (!fpm_conf_is_dir(wp-&gt;config-&gt;chroot)) {</span>
<span class='curline'><a href='../S/1478.html#L984'>wp</a>                984 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the chroot path '%s' does not exist or is not a directory", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chroot);</span>
<span class='curline'><a href='../S/1478.html#L990'>wp</a>                990 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;chdir &amp;&amp; *wp-&gt;config-&gt;chdir) {</span>
<span class='curline'><a href='../S/1478.html#L992'>wp</a>                992 sapi/fpm/fpm/fpm_conf.c 			fpm_evaluate_full_path(&amp;wp-&gt;config-&gt;chdir, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L994'>wp</a>                994 sapi/fpm/fpm/fpm_conf.c 			if (*wp-&gt;config-&gt;chdir != '/') {</span>
<span class='curline'><a href='../S/1478.html#L995'>wp</a>                995 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] the chdir path '%s' must start with a '/'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chdir);</span>
<span class='curline'><a href='../S/1478.html#L999'>wp</a>                999 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;config-&gt;chroot) {</span>
<span class='curline'><a href='../S/1478.html#L1002'>wp</a>               1002 sapi/fpm/fpm/fpm_conf.c 				spprintf(&amp;buf, 0, "%s/%s", wp-&gt;config-&gt;chroot, wp-&gt;config-&gt;chdir);</span>
<span class='curline'><a href='../S/1478.html#L1005'>wp</a>               1005 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] the chdir path '%s' within the chroot path '%s' ('%s') does not exist or is not a directory", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chdir, wp-&gt;config-&gt;chroot, buf);</span>
<span class='curline'><a href='../S/1478.html#L1012'>wp</a>               1012 sapi/fpm/fpm/fpm_conf.c 				if (!fpm_conf_is_dir(wp-&gt;config-&gt;chdir)) {</span>
<span class='curline'><a href='../S/1478.html#L1013'>wp</a>               1013 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] the chdir path '%s' does not exist or is not a directory", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chdir);</span>
<span class='curline'><a href='../S/1478.html#L1020'>wp</a>               1020 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config-&gt;security_limit_extensions) {</span>
<span class='curline'><a href='../S/1478.html#L1021'>wp</a>               1021 sapi/fpm/fpm/fpm_conf.c 			wp-&gt;config-&gt;security_limit_extensions = strdup(".php .phar");</span>
<span class='curline'><a href='../S/1478.html#L1024'>wp</a>               1024 sapi/fpm/fpm/fpm_conf.c 		if (*wp-&gt;config-&gt;security_limit_extensions) {</span>
<span class='curline'><a href='../S/1478.html#L1032'>wp</a>               1032 sapi/fpm/fpm/fpm_conf.c 			security_limit_extensions = strdup(wp-&gt;config-&gt;security_limit_extensions);</span>
<span class='curline'><a href='../S/1478.html#L1047'>wp</a>               1047 sapi/fpm/fpm/fpm_conf.c 				wp-&gt;limit_extensions = malloc(sizeof(char *) * (nb_ext + 1));</span>
<span class='curline'><a href='../S/1478.html#L1048'>wp</a>               1048 sapi/fpm/fpm/fpm_conf.c 				if (!wp-&gt;limit_extensions) {</span>
<span class='curline'><a href='../S/1478.html#L1049'>wp</a>               1049 sapi/fpm/fpm/fpm_conf.c 					zlog(ZLOG_ERROR, "[pool %s] unable to malloc extensions array", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L1054'>wp</a>               1054 sapi/fpm/fpm/fpm_conf.c 				security_limit_extensions = strdup(wp-&gt;config-&gt;security_limit_extensions);</span>
<span class='curline'><a href='../S/1478.html#L1061'>wp</a>               1061 sapi/fpm/fpm/fpm_conf.c 					wp-&gt;limit_extensions[nb_ext++] = strdup(ext);</span>
<span class='curline'><a href='../S/1478.html#L1065'>wp</a>               1065 sapi/fpm/fpm/fpm_conf.c 				wp-&gt;limit_extensions[nb_ext] = NULL;</span>
<span class='curline'><a href='../S/1478.html#L1071'>wp</a>               1071 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config-&gt;chroot) {</span>
<span class='curline'><a href='../S/1478.html#L1076'>wp</a>               1076 sapi/fpm/fpm/fpm_conf.c 			for (kv = wp-&gt;config-&gt;php_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1079'>wp</a>               1079 sapi/fpm/fpm/fpm_conf.c 						fpm_evaluate_full_path(&amp;kv-&gt;value, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L1083'>wp</a>               1083 sapi/fpm/fpm/fpm_conf.c 			for (kv = wp-&gt;config-&gt;php_admin_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1089'>wp</a>               1089 sapi/fpm/fpm/fpm_conf.c 						fpm_evaluate_full_path(&amp;kv-&gt;value, wp, NULL, 0);</span>
<span class='curline'><a href='../S/1478.html#L1097'>wp</a>               1097 sapi/fpm/fpm/fpm_conf.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1099'>wp</a>               1099 sapi/fpm/fpm/fpm_conf.c 			if (wp == wp2) {</span>
<span class='curline'><a href='../S/1478.html#L1103'>wp</a>               1103 sapi/fpm/fpm/fpm_conf.c 			if (wp-&gt;config-&gt;listen_address &amp;&amp; *wp-&gt;config-&gt;listen_address &amp;&amp; wp2-&gt;config-&gt;listen_address &amp;&amp; *wp2-&gt;config-&gt;listen_address &amp;&amp; !strcmp(wp-&gt;config-&gt;listen_address, wp2-&gt;config-&gt;listen_address)) {</span>
<span class='curline'><a href='../S/1478.html#L1104'>wp</a>               1104 sapi/fpm/fpm/fpm_conf.c 				zlog(ZLOG_ERROR, "[pool %s] unable to set listen address as it's already used in another pool '%s'", wp2-&gt;config-&gt;name, wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1478.html#L1156'>wp</a>               1156 sapi/fpm/fpm/fpm_conf.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1478.html#L1221'>wp</a>               1221 sapi/fpm/fpm/fpm_conf.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1222'>wp</a>               1222 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config-&gt;access_log || !*wp-&gt;config-&gt;access_log) {</span>
<span class='curline'><a href='../S/1478.html#L1225'>wp</a>               1225 sapi/fpm/fpm/fpm_conf.c 		if (0 &gt; fpm_log_write(wp-&gt;config-&gt;access_format)) {</span>
<span class='curline'><a href='../S/1478.html#L1226'>wp</a>               1226 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_ERROR, "[pool %s] wrong format for access.format '%s'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;access_format);</span>
<span class='curline'><a href='../S/1478.html#L1308'>wp</a>               1308 sapi/fpm/fpm/fpm_conf.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1478.html#L1318'>wp</a>               1318 sapi/fpm/fpm/fpm_conf.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1319'>wp</a>               1319 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config) continue;</span>
<span class='curline'><a href='../S/1478.html#L1320'>wp</a>               1320 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config-&gt;name) continue;</span>
<span class='curline'><a href='../S/1478.html#L1321'>wp</a>               1321 sapi/fpm/fpm/fpm_conf.c 		if (!strcasecmp(wp-&gt;config-&gt;name, Z_STRVAL_P(section))) {</span>
<span class='curline'><a href='../S/1478.html#L1323'>wp</a>               1323 sapi/fpm/fpm/fpm_conf.c 			current_wp = wp;</span>
<span class='curline'><a href='../S/1478.html#L1571'>wp</a>               1571 sapi/fpm/fpm/fpm_conf.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1478.html#L1602'>wp</a>               1602 sapi/fpm/fpm/fpm_conf.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1604'>wp</a>               1604 sapi/fpm/fpm/fpm_conf.c 		if (!wp-&gt;config) continue;</span>
<span class='curline'><a href='../S/1478.html#L1605'>wp</a>               1605 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "[%s]",                              STR2STR(wp-&gt;config-&gt;name));</span>
<span class='curline'><a href='../S/1478.html#L1606'>wp</a>               1606 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tprefix = %s",                     STR2STR(wp-&gt;config-&gt;prefix));</span>
<span class='curline'><a href='../S/1478.html#L1607'>wp</a>               1607 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tuser = %s",                       STR2STR(wp-&gt;config-&gt;user));</span>
<span class='curline'><a href='../S/1478.html#L1608'>wp</a>               1608 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tgroup = %s",                      STR2STR(wp-&gt;config-&gt;group));</span>
<span class='curline'><a href='../S/1478.html#L1609'>wp</a>               1609 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten = %s",                     STR2STR(wp-&gt;config-&gt;listen_address));</span>
<span class='curline'><a href='../S/1478.html#L1610'>wp</a>               1610 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.backlog = %d",             wp-&gt;config-&gt;listen_backlog);</span>
<span class='curline'><a href='../S/1478.html#L1612'>wp</a>               1612 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.acl_users = %s",           STR2STR(wp-&gt;config-&gt;listen_acl_users));</span>
<span class='curline'><a href='../S/1478.html#L1613'>wp</a>               1613 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.acl_groups = %s",          STR2STR(wp-&gt;config-&gt;listen_acl_groups));</span>
<span class='curline'><a href='../S/1478.html#L1615'>wp</a>               1615 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.owner = %s",               STR2STR(wp-&gt;config-&gt;listen_owner));</span>
<span class='curline'><a href='../S/1478.html#L1616'>wp</a>               1616 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.group = %s",               STR2STR(wp-&gt;config-&gt;listen_group));</span>
<span class='curline'><a href='../S/1478.html#L1617'>wp</a>               1617 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.mode = %s",                STR2STR(wp-&gt;config-&gt;listen_mode));</span>
<span class='curline'><a href='../S/1478.html#L1618'>wp</a>               1618 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tlisten.allowed_clients = %s",     STR2STR(wp-&gt;config-&gt;listen_allowed_clients));</span>
<span class='curline'><a href='../S/1478.html#L1619'>wp</a>               1619 sapi/fpm/fpm/fpm_conf.c 		if (wp-&gt;config-&gt;process_priority == 64) {</span>
<span class='curline'><a href='../S/1478.html#L1622'>wp</a>               1622 sapi/fpm/fpm/fpm_conf.c 			zlog(ZLOG_NOTICE, "\tprocess.priority = %d", wp-&gt;config-&gt;process_priority);</span>
<span class='curline'><a href='../S/1478.html#L1624'>wp</a>               1624 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm = %s",                         PM2STR(wp-&gt;config-&gt;pm));</span>
<span class='curline'><a href='../S/1478.html#L1625'>wp</a>               1625 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.max_children = %d",            wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1478.html#L1626'>wp</a>               1626 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.start_servers = %d",           wp-&gt;config-&gt;pm_start_servers);</span>
<span class='curline'><a href='../S/1478.html#L1627'>wp</a>               1627 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.min_spare_servers = %d",       wp-&gt;config-&gt;pm_min_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L1628'>wp</a>               1628 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.max_spare_servers = %d",       wp-&gt;config-&gt;pm_max_spare_servers);</span>
<span class='curline'><a href='../S/1478.html#L1629'>wp</a>               1629 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.process_idle_timeout = %d",    wp-&gt;config-&gt;pm_process_idle_timeout);</span>
<span class='curline'><a href='../S/1478.html#L1630'>wp</a>               1630 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.max_requests = %d",            wp-&gt;config-&gt;pm_max_requests);</span>
<span class='curline'><a href='../S/1478.html#L1631'>wp</a>               1631 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tpm.status_path = %s",             STR2STR(wp-&gt;config-&gt;pm_status_path));</span>
<span class='curline'><a href='../S/1478.html#L1632'>wp</a>               1632 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tping.path = %s",                  STR2STR(wp-&gt;config-&gt;ping_path));</span>
<span class='curline'><a href='../S/1478.html#L1633'>wp</a>               1633 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tping.response = %s",              STR2STR(wp-&gt;config-&gt;ping_response));</span>
<span class='curline'><a href='../S/1478.html#L1634'>wp</a>               1634 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\taccess.log = %s",                 STR2STR(wp-&gt;config-&gt;access_log));</span>
<span class='curline'><a href='../S/1478.html#L1635'>wp</a>               1635 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\taccess.format = %s",              STR2STR(wp-&gt;config-&gt;access_format));</span>
<span class='curline'><a href='../S/1478.html#L1636'>wp</a>               1636 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tslowlog = %s",                    STR2STR(wp-&gt;config-&gt;slowlog));</span>
<span class='curline'><a href='../S/1478.html#L1637'>wp</a>               1637 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\trequest_slowlog_timeout = %ds",   wp-&gt;config-&gt;request_slowlog_timeout);</span>
<span class='curline'><a href='../S/1478.html#L1638'>wp</a>               1638 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\trequest_terminate_timeout = %ds", wp-&gt;config-&gt;request_terminate_timeout);</span>
<span class='curline'><a href='../S/1478.html#L1639'>wp</a>               1639 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\trlimit_files = %d",               wp-&gt;config-&gt;rlimit_files);</span>
<span class='curline'><a href='../S/1478.html#L1640'>wp</a>               1640 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\trlimit_core = %d",                wp-&gt;config-&gt;rlimit_core);</span>
<span class='curline'><a href='../S/1478.html#L1641'>wp</a>               1641 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tchroot = %s",                     STR2STR(wp-&gt;config-&gt;chroot));</span>
<span class='curline'><a href='../S/1478.html#L1642'>wp</a>               1642 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tchdir = %s",                      STR2STR(wp-&gt;config-&gt;chdir));</span>
<span class='curline'><a href='../S/1478.html#L1643'>wp</a>               1643 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tcatch_workers_output = %s",       BOOL2STR(wp-&gt;config-&gt;catch_workers_output));</span>
<span class='curline'><a href='../S/1478.html#L1644'>wp</a>               1644 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tclear_env = %s",                  BOOL2STR(wp-&gt;config-&gt;clear_env));</span>
<span class='curline'><a href='../S/1478.html#L1645'>wp</a>               1645 sapi/fpm/fpm/fpm_conf.c 		zlog(ZLOG_NOTICE, "\tsecurity.limit_extensions = %s",  wp-&gt;config-&gt;security_limit_extensions);</span>
<span class='curline'><a href='../S/1478.html#L1647'>wp</a>               1647 sapi/fpm/fpm/fpm_conf.c 		for (kv = wp-&gt;config-&gt;env; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1651'>wp</a>               1651 sapi/fpm/fpm/fpm_conf.c 		for (kv = wp-&gt;config-&gt;php_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1478.html#L1655'>wp</a>               1655 sapi/fpm/fpm/fpm_conf.c 		for (kv = wp-&gt;config-&gt;php_admin_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1481.html#L138'>wp</a>                138 sapi/fpm/fpm/fpm_env.c int fpm_env_init_child(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1481.html#L142'>wp</a>                142 sapi/fpm/fpm/fpm_env.c 	spprintf(&amp;title, 0, "pool %s", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1481.html#L146'>wp</a>                146 sapi/fpm/fpm/fpm_env.c 	if (wp-&gt;config-&gt;clear_env) {</span>
<span class='curline'><a href='../S/1481.html#L150'>wp</a>                150 sapi/fpm/fpm/fpm_env.c 	for (kv = wp-&gt;config-&gt;env; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1481.html#L154'>wp</a>                154 sapi/fpm/fpm/fpm_env.c 	if (wp-&gt;user) {</span>
<span class='curline'><a href='../S/1481.html#L155'>wp</a>                155 sapi/fpm/fpm/fpm_env.c 		setenv("USER", wp-&gt;user, 1);</span>
<span class='curline'><a href='../S/1481.html#L158'>wp</a>                158 sapi/fpm/fpm/fpm_env.c 	if (wp-&gt;home) {</span>
<span class='curline'><a href='../S/1481.html#L159'>wp</a>                159 sapi/fpm/fpm/fpm_env.c 		setenv("HOME", wp-&gt;home, 1);</span>
<span class='curline'><a href='../S/1481.html#L166'>wp</a>                166 sapi/fpm/fpm/fpm_env.c static int fpm_env_conf_wp(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1481.html#L170'>wp</a>                170 sapi/fpm/fpm/fpm_env.c 	for (kv = wp-&gt;config-&gt;env; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1481.html#L185'>wp</a>                185 sapi/fpm/fpm/fpm_env.c 			free(wp-&gt;user);</span>
<span class='curline'><a href='../S/1481.html#L186'>wp</a>                186 sapi/fpm/fpm/fpm_env.c 			wp-&gt;user = 0;</span>
<span class='curline'><a href='../S/1481.html#L190'>wp</a>                190 sapi/fpm/fpm/fpm_env.c 			free(wp-&gt;home);</span>
<span class='curline'><a href='../S/1481.html#L191'>wp</a>                191 sapi/fpm/fpm/fpm_env.c 			wp-&gt;home = 0;</span>
<span class='curline'><a href='../S/1481.html#L201'>wp</a>                201 sapi/fpm/fpm/fpm_env.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1481.html#L207'>wp</a>                207 sapi/fpm/fpm/fpm_env.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1481.html#L208'>wp</a>                208 sapi/fpm/fpm/fpm_env.c 		if (0 &gt; fpm_env_conf_wp(wp)) {</span>
<span class='curline'><a href='../S/1482.html#L12'>wp</a>                 12 sapi/fpm/fpm/fpm_env.h int fpm_env_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1483.html#L310'>wp</a>                310 sapi/fpm/fpm/fpm_events.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1483.html#L325'>wp</a>                325 sapi/fpm/fpm/fpm_events.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1483.html#L326'>wp</a>                326 sapi/fpm/fpm/fpm_events.c 		if (!wp-&gt;config) continue;</span>
<span class='curline'><a href='../S/1483.html#L327'>wp</a>                327 sapi/fpm/fpm/fpm_events.c 		if (wp-&gt;config-&gt;catch_workers_output &amp;&amp; wp-&gt;config-&gt;pm_max_children &gt; 0) {</span>
<span class='curline'><a href='../S/1483.html#L328'>wp</a>                328 sapi/fpm/fpm/fpm_events.c 			max += (wp-&gt;config-&gt;pm_max_children * 2);</span>
<span class='curline'><a href='../S/1485.html#L35'>wp</a>                 35 sapi/fpm/fpm/fpm_log.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1485.html#L39'>wp</a>                 39 sapi/fpm/fpm/fpm_log.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1485.html#L40'>wp</a>                 40 sapi/fpm/fpm/fpm_log.c 		if (!wp-&gt;config-&gt;access_log) {</span>
<span class='curline'><a href='../S/1485.html#L45'>wp</a>                 45 sapi/fpm/fpm/fpm_log.c 		fd = open(wp-&gt;config-&gt;access_log, O_WRONLY | O_APPEND | O_CREAT, S_IRUSR | S_IWUSR);</span>
<span class='curline'><a href='../S/1485.html#L47'>wp</a>                 47 sapi/fpm/fpm/fpm_log.c 			zlog(ZLOG_SYSERROR, "failed to open access log (%s)", wp-&gt;config-&gt;access_log);</span>
<span class='curline'><a href='../S/1485.html#L50'>wp</a>                 50 sapi/fpm/fpm/fpm_log.c 			zlog(ZLOG_DEBUG, "open access log (%s)", wp-&gt;config-&gt;access_log);</span>
<span class='curline'><a href='../S/1485.html#L54'>wp</a>                 54 sapi/fpm/fpm/fpm_log.c 			dup2(fd, wp-&gt;log_fd);</span>
<span class='curline'><a href='../S/1485.html#L56'>wp</a>                 56 sapi/fpm/fpm/fpm_log.c 			fd = wp-&gt;log_fd;</span>
<span class='curline'><a href='../S/1485.html#L59'>wp</a>                 59 sapi/fpm/fpm/fpm_log.c 			wp-&gt;log_fd = fd;</span>
<span class='curline'><a href='../S/1485.html#L72'>wp</a>                 72 sapi/fpm/fpm/fpm_log.c int fpm_log_init_child(struct fpm_worker_pool_s *wp)  /* {{{ */</span>
<span class='curline'><a href='../S/1485.html#L74'>wp</a>                 74 sapi/fpm/fpm/fpm_log.c 	if (!wp || !wp-&gt;config) {</span>
<span class='curline'><a href='../S/1485.html#L78'>wp</a>                 78 sapi/fpm/fpm/fpm_log.c 	if (wp-&gt;config-&gt;access_log &amp;&amp; *wp-&gt;config-&gt;access_log) {</span>
<span class='curline'><a href='../S/1485.html#L79'>wp</a>                 79 sapi/fpm/fpm/fpm_log.c 		if (wp-&gt;config-&gt;access_format) {</span>
<span class='curline'><a href='../S/1485.html#L80'>wp</a>                 80 sapi/fpm/fpm/fpm_log.c 			fpm_log_format = strdup(wp-&gt;config-&gt;access_format);</span>
<span class='curline'><a href='../S/1485.html#L85'>wp</a>                 85 sapi/fpm/fpm/fpm_log.c 		fpm_log_fd = wp-&gt;log_fd;</span>
<span class='curline'><a href='../S/1485.html#L89'>wp</a>                 89 sapi/fpm/fpm/fpm_log.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1485.html#L90'>wp</a>                 90 sapi/fpm/fpm/fpm_log.c 		if (wp-&gt;log_fd &gt; -1 &amp;&amp; wp-&gt;log_fd != fpm_log_fd) {</span>
<span class='curline'><a href='../S/1485.html#L91'>wp</a>                 91 sapi/fpm/fpm/fpm_log.c 			close(wp-&gt;log_fd);</span>
<span class='curline'><a href='../S/1485.html#L92'>wp</a>                 92 sapi/fpm/fpm/fpm_log.c 			wp-&gt;log_fd = -1;</span>
<span class='curline'><a href='../S/1486.html#L9'>wp</a>                  9 sapi/fpm/fpm/fpm_log.h int fpm_log_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1488.html#L115'>wp</a>                115 sapi/fpm/fpm/fpm_php.c static int fpm_php_apply_defines(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1488.html#L119'>wp</a>                119 sapi/fpm/fpm/fpm_php.c 	for (kv = wp-&gt;config-&gt;php_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1488.html#L125'>wp</a>                125 sapi/fpm/fpm/fpm_php.c 	for (kv = wp-&gt;config-&gt;php_admin_values; kv; kv = kv-&gt;next) {</span>
<span class='curline'><a href='../S/1488.html#L135'>wp</a>                135 sapi/fpm/fpm/fpm_php.c static int fpm_php_set_allowed_clients(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1488.html#L137'>wp</a>                137 sapi/fpm/fpm/fpm_php.c 	if (wp-&gt;listen_address_domain == FPM_AF_INET) {</span>
<span class='curline'><a href='../S/1488.html#L138'>wp</a>                138 sapi/fpm/fpm/fpm_php.c 		fcgi_set_allowed_clients(wp-&gt;config-&gt;listen_allowed_clients);</span>
<span class='curline'><a href='../S/1488.html#L145'>wp</a>                145 sapi/fpm/fpm/fpm_php.c static int fpm_php_set_fcgi_mgmt_vars(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1488.html#L150'>wp</a>                150 sapi/fpm/fpm/fpm_php.c 	len = sprintf(max_workers, "%u", (unsigned int) wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1488.html#L217'>wp</a>                217 sapi/fpm/fpm/fpm_php.c int fpm_php_init_child(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1488.html#L219'>wp</a>                219 sapi/fpm/fpm/fpm_php.c 	if (0 &gt; fpm_php_apply_defines(wp) ||</span>
<span class='curline'><a href='../S/1488.html#L220'>wp</a>                220 sapi/fpm/fpm/fpm_php.c 		0 &gt; fpm_php_set_allowed_clients(wp)) {</span>
<span class='curline'><a href='../S/1488.html#L224'>wp</a>                224 sapi/fpm/fpm/fpm_php.c 	if (wp-&gt;limit_extensions) {</span>
<span class='curline'><a href='../S/1488.html#L225'>wp</a>                225 sapi/fpm/fpm/fpm_php.c 		limit_extensions = wp-&gt;limit_extensions;</span>
<span class='curline'><a href='../S/1489.html#L36'>wp</a>                 36 sapi/fpm/fpm/fpm_php.h int fpm_php_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1490.html#L58'>wp</a>                 58 sapi/fpm/fpm/fpm_php_trace.c 	fprintf(slowlog, "\n%s [pool %s] pid %d\n", buf, child-&gt;wp-&gt;config-&gt;name, (int) pid);</span>
<span class='curline'><a href='../S/1490.html#L199'>wp</a>                199 sapi/fpm/fpm/fpm_php_trace.c 	fpm_scoreboard_update(0, 0, 0, 0, 0, 0, 1, FPM_SCOREBOARD_ACTION_INC, child-&gt;wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1490.html#L204'>wp</a>                204 sapi/fpm/fpm/fpm_php_trace.c 	slowlog = fopen(child-&gt;wp-&gt;config-&gt;slowlog, "a+");</span>
<span class='curline'><a href='../S/1490.html#L207'>wp</a>                207 sapi/fpm/fpm/fpm_php_trace.c 		zlog(ZLOG_SYSERROR, "unable to open slowlog (%s)", child-&gt;wp-&gt;config-&gt;slowlog);</span>
<span class='curline'><a href='../S/1492.html#L148'>wp</a>                148 sapi/fpm/fpm/fpm_process_ctl.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1492.html#L151'>wp</a>                151 sapi/fpm/fpm/fpm_process_ctl.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L154'>wp</a>                154 sapi/fpm/fpm/fpm_process_ctl.c 		for (child = wp-&gt;children; child; child = child-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L158'>wp</a>                158 sapi/fpm/fpm/fpm_process_ctl.c 				child-&gt;wp-&gt;config-&gt;name, signo,</span>
<span class='curline'><a href='../S/1492.html#L294'>wp</a>                294 sapi/fpm/fpm/fpm_process_ctl.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1492.html#L296'>wp</a>                296 sapi/fpm/fpm/fpm_process_ctl.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L297'>wp</a>                297 sapi/fpm/fpm/fpm_process_ctl.c 		int terminate_timeout = wp-&gt;config-&gt;request_terminate_timeout;</span>
<span class='curline'><a href='../S/1492.html#L298'>wp</a>                298 sapi/fpm/fpm/fpm_process_ctl.c 		int slowlog_timeout = wp-&gt;config-&gt;request_slowlog_timeout;</span>
<span class='curline'><a href='../S/1492.html#L302'>wp</a>                302 sapi/fpm/fpm/fpm_process_ctl.c 			for (child = wp-&gt;children; child; child = child-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L312'>wp</a>                312 sapi/fpm/fpm/fpm_process_ctl.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1492.html#L314'>wp</a>                314 sapi/fpm/fpm/fpm_process_ctl.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L322'>wp</a>                322 sapi/fpm/fpm/fpm_process_ctl.c 		if (wp-&gt;config == NULL) continue;</span>
<span class='curline'><a href='../S/1492.html#L324'>wp</a>                324 sapi/fpm/fpm/fpm_process_ctl.c 		for (child = wp-&gt;children; child; child = child-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L340'>wp</a>                340 sapi/fpm/fpm/fpm_process_ctl.c 		if (wp-&gt;listen_address_domain == FPM_AF_INET) {</span>
<span class='curline'><a href='../S/1492.html#L341'>wp</a>                341 sapi/fpm/fpm/fpm_process_ctl.c 			if (0 &gt; fpm_socket_get_listening_queue(wp-&gt;listening_socket, &amp;cur_lq, NULL)) {</span>
<span class='curline'><a href='../S/1492.html#L346'>wp</a>                346 sapi/fpm/fpm/fpm_process_ctl.c 					if (!wp-&gt;warn_lq) {</span>
<span class='curline'><a href='../S/1492.html#L347'>wp</a>                347 sapi/fpm/fpm/fpm_process_ctl.c 						zlog(ZLOG_WARNING, "[pool %s] listening queue is not empty, #%d requests are waiting to be served, consider raising pm.max_children setting (%d)", wp-&gt;config-&gt;name, cur_lq, wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1492.html#L348'>wp</a>                348 sapi/fpm/fpm/fpm_process_ctl.c 						wp-&gt;warn_lq = 1;</span>
<span class='curline'><a href='../S/1492.html#L351'>wp</a>                351 sapi/fpm/fpm/fpm_process_ctl.c 					wp-&gt;warn_lq = 0;</span>
<span class='curline'><a href='../S/1492.html#L356'>wp</a>                356 sapi/fpm/fpm/fpm_process_ctl.c 		fpm_scoreboard_update(idle, active, cur_lq, -1, -1, -1, 0, FPM_SCOREBOARD_ACTION_SET, wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1492.html#L359'>wp</a>                359 sapi/fpm/fpm/fpm_process_ctl.c 		if (wp-&gt;config-&gt;pm == PM_STYLE_ONDEMAND) {</span>
<span class='curline'><a href='../S/1492.html#L362'>wp</a>                362 sapi/fpm/fpm/fpm_process_ctl.c 			zlog(ZLOG_DEBUG, "[pool %s] currently %d active children, %d spare children", wp-&gt;config-&gt;name, active, idle);</span>
<span class='curline'><a href='../S/1492.html#L368'>wp</a>                368 sapi/fpm/fpm/fpm_process_ctl.c 			if (last.tv_sec &lt; now.tv_sec - wp-&gt;config-&gt;pm_process_idle_timeout) {</span>
<span class='curline'><a href='../S/1492.html#L377'>wp</a>                377 sapi/fpm/fpm/fpm_process_ctl.c 		if (wp-&gt;config-&gt;pm != PM_STYLE_DYNAMIC) continue;</span>
<span class='curline'><a href='../S/1492.html#L379'>wp</a>                379 sapi/fpm/fpm/fpm_process_ctl.c 		zlog(ZLOG_DEBUG, "[pool %s] currently %d active children, %d spare children, %d running children. Spawning rate %d", wp-&gt;config-&gt;name, active, idle, wp-&gt;running_children, wp-&gt;idle_spawn_rate);</span>
<span class='curline'><a href='../S/1492.html#L381'>wp</a>                381 sapi/fpm/fpm/fpm_process_ctl.c 		if (idle &gt; wp-&gt;config-&gt;pm_max_spare_servers &amp;&amp; last_idle_child) {</span>
<span class='curline'><a href='../S/1492.html#L384'>wp</a>                384 sapi/fpm/fpm/fpm_process_ctl.c 			wp-&gt;idle_spawn_rate = 1;</span>
<span class='curline'><a href='../S/1492.html#L388'>wp</a>                388 sapi/fpm/fpm/fpm_process_ctl.c 		if (idle &lt; wp-&gt;config-&gt;pm_min_spare_servers) {</span>
<span class='curline'><a href='../S/1492.html#L389'>wp</a>                389 sapi/fpm/fpm/fpm_process_ctl.c 			if (wp-&gt;running_children &gt;= wp-&gt;config-&gt;pm_max_children) {</span>
<span class='curline'><a href='../S/1492.html#L390'>wp</a>                390 sapi/fpm/fpm/fpm_process_ctl.c 				if (!wp-&gt;warn_max_children) {</span>
<span class='curline'><a href='../S/1492.html#L391'>wp</a>                391 sapi/fpm/fpm/fpm_process_ctl.c 					fpm_scoreboard_update(0, 0, 0, 0, 0, 1, 0, FPM_SCOREBOARD_ACTION_INC, wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1492.html#L392'>wp</a>                392 sapi/fpm/fpm/fpm_process_ctl.c 					zlog(ZLOG_WARNING, "[pool %s] server reached pm.max_children setting (%d), consider raising it", wp-&gt;config-&gt;name, wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1492.html#L393'>wp</a>                393 sapi/fpm/fpm/fpm_process_ctl.c 					wp-&gt;warn_max_children = 1;</span>
<span class='curline'><a href='../S/1492.html#L395'>wp</a>                395 sapi/fpm/fpm/fpm_process_ctl.c 				wp-&gt;idle_spawn_rate = 1;</span>
<span class='curline'><a href='../S/1492.html#L399'>wp</a>                399 sapi/fpm/fpm/fpm_process_ctl.c 			if (wp-&gt;idle_spawn_rate &gt;= 8) {</span>
<span class='curline'><a href='../S/1492.html#L400'>wp</a>                400 sapi/fpm/fpm/fpm_process_ctl.c 				zlog(ZLOG_WARNING, "[pool %s] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning %d children, there are %d idle, and %d total children", wp-&gt;config-&gt;name, wp-&gt;idle_spawn_rate, idle, wp-&gt;running_children);</span>
<span class='curline'><a href='../S/1492.html#L404'>wp</a>                404 sapi/fpm/fpm/fpm_process_ctl.c 			children_to_fork = MIN(wp-&gt;idle_spawn_rate, wp-&gt;config-&gt;pm_min_spare_servers - idle);</span>
<span class='curline'><a href='../S/1492.html#L407'>wp</a>                407 sapi/fpm/fpm/fpm_process_ctl.c 			children_to_fork = MIN(children_to_fork, wp-&gt;config-&gt;pm_max_children - wp-&gt;running_children);</span>
<span class='curline'><a href='../S/1492.html#L409'>wp</a>                409 sapi/fpm/fpm/fpm_process_ctl.c 				if (!wp-&gt;warn_max_children) {</span>
<span class='curline'><a href='../S/1492.html#L410'>wp</a>                410 sapi/fpm/fpm/fpm_process_ctl.c 					fpm_scoreboard_update(0, 0, 0, 0, 0, 1, 0, FPM_SCOREBOARD_ACTION_INC, wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1492.html#L411'>wp</a>                411 sapi/fpm/fpm/fpm_process_ctl.c 					zlog(ZLOG_WARNING, "[pool %s] server reached pm.max_children setting (%d), consider raising it", wp-&gt;config-&gt;name, wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1492.html#L412'>wp</a>                412 sapi/fpm/fpm/fpm_process_ctl.c 					wp-&gt;warn_max_children = 1;</span>
<span class='curline'><a href='../S/1492.html#L414'>wp</a>                414 sapi/fpm/fpm/fpm_process_ctl.c 				wp-&gt;idle_spawn_rate = 1;</span>
<span class='curline'><a href='../S/1492.html#L417'>wp</a>                417 sapi/fpm/fpm/fpm_process_ctl.c 			wp-&gt;warn_max_children = 0;</span>
<span class='curline'><a href='../S/1492.html#L419'>wp</a>                419 sapi/fpm/fpm/fpm_process_ctl.c 			fpm_children_make(wp, 1, children_to_fork, 1);</span>
<span class='curline'><a href='../S/1492.html#L428'>wp</a>                428 sapi/fpm/fpm/fpm_process_ctl.c 			zlog(ZLOG_DEBUG, "[pool %s] %d child(ren) have been created dynamically", wp-&gt;config-&gt;name, children_to_fork);</span>
<span class='curline'><a href='../S/1492.html#L431'>wp</a>                431 sapi/fpm/fpm/fpm_process_ctl.c 			if (wp-&gt;idle_spawn_rate &lt; FPM_MAX_SPAWN_RATE) {</span>
<span class='curline'><a href='../S/1492.html#L432'>wp</a>                432 sapi/fpm/fpm/fpm_process_ctl.c 				wp-&gt;idle_spawn_rate *= 2;</span>
<span class='curline'><a href='../S/1492.html#L436'>wp</a>                436 sapi/fpm/fpm/fpm_process_ctl.c 		wp-&gt;idle_spawn_rate = 1;</span>
<span class='curline'><a href='../S/1492.html#L498'>wp</a>                498 sapi/fpm/fpm/fpm_process_ctl.c 	struct fpm_worker_pool_s *wp = (struct fpm_worker_pool_s *)arg;</span>
<span class='curline'><a href='../S/1492.html#L508'>wp</a>                508 sapi/fpm/fpm/fpm_process_ctl.c 	wp-&gt;socket_event_set = 0;</span>
<span class='curline'><a href='../S/1492.html#L512'>wp</a>                512 sapi/fpm/fpm/fpm_process_ctl.c 	if (wp-&gt;running_children &gt;= wp-&gt;config-&gt;pm_max_children) {</span>
<span class='curline'><a href='../S/1492.html#L513'>wp</a>                513 sapi/fpm/fpm/fpm_process_ctl.c 		if (!wp-&gt;warn_max_children) {</span>
<span class='curline'><a href='../S/1492.html#L514'>wp</a>                514 sapi/fpm/fpm/fpm_process_ctl.c 			fpm_scoreboard_update(0, 0, 0, 0, 0, 1, 0, FPM_SCOREBOARD_ACTION_INC, wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1492.html#L515'>wp</a>                515 sapi/fpm/fpm/fpm_process_ctl.c 			zlog(ZLOG_WARNING, "[pool %s] server reached max_children setting (%d), consider raising it", wp-&gt;config-&gt;name, wp-&gt;config-&gt;pm_max_children);</span>
<span class='curline'><a href='../S/1492.html#L516'>wp</a>                516 sapi/fpm/fpm/fpm_process_ctl.c 			wp-&gt;warn_max_children = 1;</span>
<span class='curline'><a href='../S/1492.html#L522'>wp</a>                522 sapi/fpm/fpm/fpm_process_ctl.c 	for (child = wp-&gt;children; child; child = child-&gt;next) {</span>
<span class='curline'><a href='../S/1492.html#L529'>wp</a>                529 sapi/fpm/fpm/fpm_process_ctl.c 	wp-&gt;warn_max_children = 0;</span>
<span class='curline'><a href='../S/1492.html#L530'>wp</a>                530 sapi/fpm/fpm/fpm_process_ctl.c 	fpm_children_make(wp, 1, 1, 1);</span>
<span class='curline'><a href='../S/1492.html#L536'>wp</a>                536 sapi/fpm/fpm/fpm_process_ctl.c 	zlog(ZLOG_DEBUG, "[pool %s] got accept without idle child available .... I forked", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1494.html#L230'>wp</a>                230 sapi/fpm/fpm/fpm_request.c 	proc_p = fpm_scoreboard_proc_acquire(child-&gt;wp-&gt;scoreboard, child-&gt;scoreboard_i, 1);</span>
<span class='curline'><a href='../S/1494.html#L266'>wp</a>                266 sapi/fpm/fpm/fpm_request.c 				child-&gt;wp-&gt;config-&gt;name, (int) child-&gt;pid, purified_script_filename, proc.request_method, proc.request_uri,</span>
<span class='curline'><a href='../S/1494.html#L276'>wp</a>                276 sapi/fpm/fpm/fpm_request.c 				child-&gt;wp-&gt;config-&gt;name, (int) child-&gt;pid, purified_script_filename, proc.request_method, proc.request_uri,</span>
<span class='curline'><a href='../S/1494.html#L288'>wp</a>                288 sapi/fpm/fpm/fpm_request.c 	proc = fpm_scoreboard_proc_get(child-&gt;wp-&gt;scoreboard, child-&gt;scoreboard_i);</span>
<span class='curline'><a href='../S/1494.html#L303'>wp</a>                303 sapi/fpm/fpm/fpm_request.c 	proc = fpm_scoreboard_proc_get(child-&gt;wp-&gt;scoreboard, child-&gt;scoreboard_i);</span>
<span class='curline'><a href='../S/1496.html#L27'>wp</a>                 27 sapi/fpm/fpm/fpm_scoreboard.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1496.html#L44'>wp</a>                 44 sapi/fpm/fpm/fpm_scoreboard.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1496.html#L45'>wp</a>                 45 sapi/fpm/fpm/fpm_scoreboard.c 		if (wp-&gt;config-&gt;pm_max_children &lt; 1) {</span>
<span class='curline'><a href='../S/1496.html#L46'>wp</a>                 46 sapi/fpm/fpm/fpm_scoreboard.c 			zlog(ZLOG_ERROR, "[pool %s] Unable to create scoreboard SHM because max_client is not set", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1496.html#L50'>wp</a>                 50 sapi/fpm/fpm/fpm_scoreboard.c 		if (wp-&gt;scoreboard) {</span>
<span class='curline'><a href='../S/1496.html#L51'>wp</a>                 51 sapi/fpm/fpm/fpm_scoreboard.c 			zlog(ZLOG_ERROR, "[pool %s] Unable to create scoreboard SHM because it already exists", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1496.html#L55'>wp</a>                 55 sapi/fpm/fpm/fpm_scoreboard.c 		wp-&gt;scoreboard = fpm_shm_alloc(sizeof(struct fpm_scoreboard_s) + (wp-&gt;config-&gt;pm_max_children - 1) * sizeof(struct fpm_scoreboard_proc_s *));</span>
<span class='curline'><a href='../S/1496.html#L56'>wp</a>                 56 sapi/fpm/fpm/fpm_scoreboard.c 		if (!wp-&gt;scoreboard) {</span>
<span class='curline'><a href='../S/1496.html#L59'>wp</a>                 59 sapi/fpm/fpm/fpm_scoreboard.c 		wp-&gt;scoreboard-&gt;nprocs = wp-&gt;config-&gt;pm_max_children;</span>
<span class='curline'><a href='../S/1496.html#L60'>wp</a>                 60 sapi/fpm/fpm/fpm_scoreboard.c 		for (i = 0; i &lt; wp-&gt;scoreboard-&gt;nprocs; i++) {</span>
<span class='curline'><a href='../S/1496.html#L61'>wp</a>                 61 sapi/fpm/fpm/fpm_scoreboard.c 			wp-&gt;scoreboard-&gt;procs[i] = fpm_shm_alloc(sizeof(struct fpm_scoreboard_proc_s));</span>
<span class='curline'><a href='../S/1496.html#L62'>wp</a>                 62 sapi/fpm/fpm/fpm_scoreboard.c 			if (!wp-&gt;scoreboard-&gt;procs[i]) {</span>
<span class='curline'><a href='../S/1496.html#L65'>wp</a>                 65 sapi/fpm/fpm/fpm_scoreboard.c 			memset(wp-&gt;scoreboard-&gt;procs[i], 0, sizeof(struct fpm_scoreboard_proc_s));</span>
<span class='curline'><a href='../S/1496.html#L68'>wp</a>                 68 sapi/fpm/fpm/fpm_scoreboard.c 		wp-&gt;scoreboard-&gt;pm = wp-&gt;config-&gt;pm;</span>
<span class='curline'><a href='../S/1496.html#L69'>wp</a>                 69 sapi/fpm/fpm/fpm_scoreboard.c 		wp-&gt;scoreboard-&gt;start_epoch = time(NULL);</span>
<span class='curline'><a href='../S/1496.html#L70'>wp</a>                 70 sapi/fpm/fpm/fpm_scoreboard.c 		strlcpy(wp-&gt;scoreboard-&gt;pool, wp-&gt;config-&gt;name, sizeof(wp-&gt;scoreboard-&gt;pool));</span>
<span class='curline'><a href='../S/1497.html#L72'>wp</a>                 72 sapi/fpm/fpm/fpm_scoreboard.h int fpm_scoreboard_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1502.html#L163'>wp</a>                163 sapi/fpm/fpm/fpm_sockets.c static int fpm_sockets_new_listening_socket(struct fpm_worker_pool_s *wp, struct sockaddr *sa, int socklen) /* {{{ */</span>
<span class='curline'><a href='../S/1502.html#L180'>wp</a>                180 sapi/fpm/fpm/fpm_sockets.c 	if (wp-&gt;listen_address_domain == FPM_AF_UNIX) {</span>
<span class='curline'><a href='../S/1502.html#L187'>wp</a>                187 sapi/fpm/fpm/fpm_sockets.c 		saved_umask = umask(0777 ^ wp-&gt;socket_mode);</span>
<span class='curline'><a href='../S/1502.html#L191'>wp</a>                191 sapi/fpm/fpm/fpm_sockets.c 		zlog(ZLOG_SYSERROR, "unable to bind listening socket for address '%s'", wp-&gt;config-&gt;listen_address);</span>
<span class='curline'><a href='../S/1502.html#L192'>wp</a>                192 sapi/fpm/fpm/fpm_sockets.c 		if (wp-&gt;listen_address_domain == FPM_AF_UNIX) {</span>
<span class='curline'><a href='../S/1502.html#L199'>wp</a>                199 sapi/fpm/fpm/fpm_sockets.c 	if (wp-&gt;listen_address_domain == FPM_AF_UNIX) {</span>
<span class='curline'><a href='../S/1502.html#L204'>wp</a>                204 sapi/fpm/fpm/fpm_sockets.c 		if (0 &gt; fpm_unix_set_socket_premissions(wp, path)) {</span>
<span class='curline'><a href='../S/1502.html#L210'>wp</a>                210 sapi/fpm/fpm/fpm_sockets.c 	if (0 &gt; listen(sock, wp-&gt;config-&gt;listen_backlog)) {</span>
<span class='curline'><a href='../S/1502.html#L211'>wp</a>                211 sapi/fpm/fpm/fpm_sockets.c 		zlog(ZLOG_SYSERROR, "failed to listen to address '%s'", wp-&gt;config-&gt;listen_address);</span>
<span class='curline'><a href='../S/1502.html#L220'>wp</a>                220 sapi/fpm/fpm/fpm_sockets.c static int fpm_sockets_get_listening_socket(struct fpm_worker_pool_s *wp, struct sockaddr *sa, int socklen) /* {{{ */</span>
<span class='curline'><a href='../S/1502.html#L224'>wp</a>                224 sapi/fpm/fpm/fpm_sockets.c 	sock = fpm_sockets_hash_op(0, sa, 0, wp-&gt;listen_address_domain, FPM_GET_USE_SOCKET);</span>
<span class='curline'><a href='../S/1502.html#L229'>wp</a>                229 sapi/fpm/fpm/fpm_sockets.c 	sock = fpm_sockets_new_listening_socket(wp, sa, socklen);</span>
<span class='curline'><a href='../S/1502.html#L230'>wp</a>                230 sapi/fpm/fpm/fpm_sockets.c 	fpm_sockets_hash_op(sock, sa, 0, wp-&gt;listen_address_domain, FPM_STORE_USE_SOCKET);</span>
<span class='curline'><a href='../S/1502.html#L249'>wp</a>                249 sapi/fpm/fpm/fpm_sockets.c static int fpm_socket_af_inet_listening_socket(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1502.html#L252'>wp</a>                252 sapi/fpm/fpm/fpm_sockets.c 	char *dup_address = strdup(wp-&gt;config-&gt;listen_address);</span>
<span class='curline'><a href='../S/1502.html#L297'>wp</a>                297 sapi/fpm/fpm/fpm_sockets.c 			if ((sock = fpm_sockets_get_listening_socket(wp, p-&gt;ai_addr, p-&gt;ai_addrlen)) != -1) {</span>
<span class='curline'><a href='../S/1502.html#L312'>wp</a>                312 sapi/fpm/fpm/fpm_sockets.c static int fpm_socket_af_unix_listening_socket(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1502.html#L317'>wp</a>                317 sapi/fpm/fpm/fpm_sockets.c 	strlcpy(sa_un.sun_path, wp-&gt;config-&gt;listen_address, sizeof(sa_un.sun_path));</span>
<span class='curline'><a href='../S/1502.html#L319'>wp</a>                319 sapi/fpm/fpm/fpm_sockets.c 	return fpm_sockets_get_listening_socket(wp, (struct sockaddr *) &amp;sa_un, sizeof(struct sockaddr_un));</span>
<span class='curline'><a href='../S/1502.html#L326'>wp</a>                326 sapi/fpm/fpm/fpm_sockets.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1502.html#L361'>wp</a>                361 sapi/fpm/fpm/fpm_sockets.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1502.html#L362'>wp</a>                362 sapi/fpm/fpm/fpm_sockets.c 		switch (wp-&gt;listen_address_domain) {</span>
<span class='curline'><a href='../S/1502.html#L364'>wp</a>                364 sapi/fpm/fpm/fpm_sockets.c 				wp-&gt;listening_socket = fpm_socket_af_inet_listening_socket(wp);</span>
<span class='curline'><a href='../S/1502.html#L368'>wp</a>                368 sapi/fpm/fpm/fpm_sockets.c 				if (0 &gt; fpm_unix_resolve_socket_premissions(wp)) {</span>
<span class='curline'><a href='../S/1502.html#L371'>wp</a>                371 sapi/fpm/fpm/fpm_sockets.c 				wp-&gt;listening_socket = fpm_socket_af_unix_listening_socket(wp);</span>
<span class='curline'><a href='../S/1502.html#L375'>wp</a>                375 sapi/fpm/fpm/fpm_sockets.c 		if (wp-&gt;listening_socket == -1) {</span>
<span class='curline'><a href='../S/1502.html#L379'>wp</a>                379 sapi/fpm/fpm/fpm_sockets.c 	if (wp-&gt;listen_address_domain == FPM_AF_INET &amp;&amp; fpm_socket_get_listening_queue(wp-&gt;listening_socket, NULL, &amp;lq_len) &gt;= 0) {</span>
<span class='curline'><a href='../S/1502.html#L380'>wp</a>                380 sapi/fpm/fpm/fpm_sockets.c 			fpm_scoreboard_update(-1, -1, -1, (int)lq_len, -1, -1, 0, FPM_SCOREBOARD_ACTION_SET, wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1504.html#L25'>wp</a>                 25 sapi/fpm/fpm/fpm_status.c int fpm_status_init_child(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1504.html#L27'>wp</a>                 27 sapi/fpm/fpm/fpm_status.c 	if (!wp || !wp-&gt;config) {</span>
<span class='curline'><a href='../S/1504.html#L32'>wp</a>                 32 sapi/fpm/fpm/fpm_status.c 	if (wp-&gt;config-&gt;pm_status_path) {</span>
<span class='curline'><a href='../S/1504.html#L33'>wp</a>                 33 sapi/fpm/fpm/fpm_status.c 		fpm_status_uri = strdup(wp-&gt;config-&gt;pm_status_path);</span>
<span class='curline'><a href='../S/1504.html#L36'>wp</a>                 36 sapi/fpm/fpm/fpm_status.c 	if (wp-&gt;config-&gt;ping_path) {</span>
<span class='curline'><a href='../S/1504.html#L37'>wp</a>                 37 sapi/fpm/fpm/fpm_status.c 		if (!wp-&gt;config-&gt;ping_response) {</span>
<span class='curline'><a href='../S/1504.html#L38'>wp</a>                 38 sapi/fpm/fpm/fpm_status.c 			zlog(ZLOG_ERROR, "[pool %s] ping is set (%s) but ping.response is not set.", wp-&gt;config-&gt;name, wp-&gt;config-&gt;ping_path);</span>
<span class='curline'><a href='../S/1504.html#L41'>wp</a>                 41 sapi/fpm/fpm/fpm_status.c 		fpm_status_ping_uri = strdup(wp-&gt;config-&gt;ping_path);</span>
<span class='curline'><a href='../S/1504.html#L42'>wp</a>                 42 sapi/fpm/fpm/fpm_status.c 		fpm_status_ping_response = strdup(wp-&gt;config-&gt;ping_response);</span>
<span class='curline'><a href='../S/1505.html#L24'>wp</a>                 24 sapi/fpm/fpm/fpm_status.h int fpm_status_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1506.html#L82'>wp</a>                 82 sapi/fpm/fpm/fpm_stdio.c int fpm_stdio_init_child(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1506.html#L100'>wp</a>                100 sapi/fpm/fpm/fpm_stdio.c 	if (wp-&gt;listening_socket != STDIN_FILENO) {</span>
<span class='curline'><a href='../S/1506.html#L101'>wp</a>                101 sapi/fpm/fpm/fpm_stdio.c 		if (0 &gt; dup2(wp-&gt;listening_socket, STDIN_FILENO)) {</span>
<span class='curline'><a href='../S/1506.html#L190'>wp</a>                190 sapi/fpm/fpm/fpm_stdio.c 					zlog(ZLOG_WARNING, "[pool %s] child %d said into %s: \"%s\"%s", child-&gt;wp-&gt;config-&gt;name,</span>
<span class='curline'><a href='../S/1506.html#L209'>wp</a>                209 sapi/fpm/fpm/fpm_stdio.c 	if (0 == child-&gt;wp-&gt;config-&gt;catch_workers_output) { /* not required */</span>
<span class='curline'><a href='../S/1506.html#L239'>wp</a>                239 sapi/fpm/fpm/fpm_stdio.c 	if (0 == child-&gt;wp-&gt;config-&gt;catch_workers_output) { /* not required */</span>
<span class='curline'><a href='../S/1506.html#L260'>wp</a>                260 sapi/fpm/fpm/fpm_stdio.c 	if (0 == child-&gt;wp-&gt;config-&gt;catch_workers_output) { /* not required */</span>
<span class='curline'><a href='../S/1506.html#L275'>wp</a>                275 sapi/fpm/fpm/fpm_stdio.c 	if (child-&gt;wp-&gt;config-&gt;catch_workers_output) {</span>
<span class='curline'><a href='../S/1507.html#L12'>wp</a>                 12 sapi/fpm/fpm/fpm_stdio.h int fpm_stdio_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1509.html#L17'>wp</a>                 17 sapi/fpm/fpm/fpm_systemd.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1509.html#L22'>wp</a>                 22 sapi/fpm/fpm/fpm_systemd.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1509.html#L23'>wp</a>                 23 sapi/fpm/fpm/fpm_systemd.c 		if (wp-&gt;scoreboard) {</span>
<span class='curline'><a href='../S/1509.html#L24'>wp</a>                 24 sapi/fpm/fpm/fpm_systemd.c 			active   += wp-&gt;scoreboard-&gt;active;</span>
<span class='curline'><a href='../S/1509.html#L25'>wp</a>                 25 sapi/fpm/fpm/fpm_systemd.c 			idle     += wp-&gt;scoreboard-&gt;idle;</span>
<span class='curline'><a href='../S/1509.html#L26'>wp</a>                 26 sapi/fpm/fpm/fpm_systemd.c 			requests += wp-&gt;scoreboard-&gt;requests;</span>
<span class='curline'><a href='../S/1509.html#L27'>wp</a>                 27 sapi/fpm/fpm/fpm_systemd.c 			slow_req += wp-&gt;scoreboard-&gt;slow_rq;</span>
<span class='curline'><a href='../S/1516.html#L39'>wp</a>                 39 sapi/fpm/fpm/fpm_unix.c int fpm_unix_resolve_socket_premissions(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1516.html#L41'>wp</a>                 41 sapi/fpm/fpm/fpm_unix.c 	struct fpm_worker_pool_config_s *c = wp-&gt;config;</span>
<span class='curline'><a href='../S/1516.html#L46'>wp</a>                 46 sapi/fpm/fpm/fpm_unix.c 	wp-&gt;socket_acl  = NULL;</span>
<span class='curline'><a href='../S/1516.html#L48'>wp</a>                 48 sapi/fpm/fpm/fpm_unix.c 	wp-&gt;socket_uid = -1;</span>
<span class='curline'><a href='../S/1516.html#L49'>wp</a>                 49 sapi/fpm/fpm/fpm_unix.c 	wp-&gt;socket_gid = -1;</span>
<span class='curline'><a href='../S/1516.html#L50'>wp</a>                 50 sapi/fpm/fpm/fpm_unix.c 	wp-&gt;socket_mode = 0660;</span>
<span class='curline'><a href='../S/1516.html#L57'>wp</a>                 57 sapi/fpm/fpm/fpm_unix.c 		wp-&gt;socket_mode = strtoul(c-&gt;listen_mode, 0, 8);</span>
<span class='curline'><a href='../S/1516.html#L86'>wp</a>                 86 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] cannot allocate ACL", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L100'>wp</a>                100 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_DEBUG, "[pool %s] user '%s' have uid=%d", wp-&gt;config-&gt;name, p, pwd-&gt;pw_uid);</span>
<span class='curline'><a href='../S/1516.html#L102'>wp</a>                102 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_SYSERROR, "[pool %s] cannot get uid for user '%s'", wp-&gt;config-&gt;name, p);</span>
<span class='curline'><a href='../S/1516.html#L114'>wp</a>                114 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_SYSERROR, "[pool %s] cannot create ACL for user '%s'", wp-&gt;config-&gt;name, p);</span>
<span class='curline'><a href='../S/1516.html#L133'>wp</a>                133 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_DEBUG, "[pool %s] group '%s' have gid=%d", wp-&gt;config-&gt;name, p, grp-&gt;gr_gid);</span>
<span class='curline'><a href='../S/1516.html#L135'>wp</a>                135 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_SYSERROR, "[pool %s] cannot get gid for group '%s'", wp-&gt;config-&gt;name, p);</span>
<span class='curline'><a href='../S/1516.html#L147'>wp</a>                147 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_SYSERROR, "[pool %s] cannot create ACL for group '%s'", wp-&gt;config-&gt;name, p);</span>
<span class='curline'><a href='../S/1516.html#L156'>wp</a>                156 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_WARNING, "[pool %s] ACL set, listen.owner = '%s' is ignored", wp-&gt;config-&gt;name, c-&gt;listen_owner);</span>
<span class='curline'><a href='../S/1516.html#L159'>wp</a>                159 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_WARNING, "[pool %s] ACL set, listen.group = '%s' is ignored", wp-&gt;config-&gt;name, c-&gt;listen_group);</span>
<span class='curline'><a href='../S/1516.html#L161'>wp</a>                161 sapi/fpm/fpm/fpm_unix.c 		wp-&gt;socket_acl  = acl;</span>
<span class='curline'><a href='../S/1516.html#L172'>wp</a>                172 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] cannot get uid for user '%s'", wp-&gt;config-&gt;name, c-&gt;listen_owner);</span>
<span class='curline'><a href='../S/1516.html#L176'>wp</a>                176 sapi/fpm/fpm/fpm_unix.c 		wp-&gt;socket_uid = pwd-&gt;pw_uid;</span>
<span class='curline'><a href='../S/1516.html#L177'>wp</a>                177 sapi/fpm/fpm/fpm_unix.c 		wp-&gt;socket_gid = pwd-&gt;pw_gid;</span>
<span class='curline'><a href='../S/1516.html#L185'>wp</a>                185 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] cannot get gid for group '%s'", wp-&gt;config-&gt;name, c-&gt;listen_group);</span>
<span class='curline'><a href='../S/1516.html#L188'>wp</a>                188 sapi/fpm/fpm/fpm_unix.c 		wp-&gt;socket_gid = grp-&gt;gr_gid;</span>
<span class='curline'><a href='../S/1516.html#L195'>wp</a>                195 sapi/fpm/fpm/fpm_unix.c int fpm_unix_set_socket_premissions(struct fpm_worker_pool_s *wp, const char *path) /* {{{ */</span>
<span class='curline'><a href='../S/1516.html#L198'>wp</a>                198 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;socket_acl) {</span>
<span class='curline'><a href='../S/1516.html#L204'>wp</a>                204 sapi/fpm/fpm/fpm_unix.c 		aclconf = wp-&gt;socket_acl;</span>
<span class='curline'><a href='../S/1516.html#L207'>wp</a>                207 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to read the ACL of the socket '%s'", wp-&gt;config-&gt;name, path);</span>
<span class='curline'><a href='../S/1516.html#L214'>wp</a>                214 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_SYSERROR, "[pool %s] failed to add entry to the ACL of the socket '%s'", wp-&gt;config-&gt;name, path);</span>
<span class='curline'><a href='../S/1516.html#L223'>wp</a>                223 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to write the ACL of the socket '%s'", wp-&gt;config-&gt;name, path);</span>
<span class='curline'><a href='../S/1516.html#L227'>wp</a>                227 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_DEBUG, "[pool %s] ACL of the socket '%s' is set", wp-&gt;config-&gt;name, path);</span>
<span class='curline'><a href='../S/1516.html#L236'>wp</a>                236 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;socket_uid != -1 || wp-&gt;socket_gid != -1) {</span>
<span class='curline'><a href='../S/1516.html#L237'>wp</a>                237 sapi/fpm/fpm/fpm_unix.c 		if (0 &gt; chown(path, wp-&gt;socket_uid, wp-&gt;socket_gid)) {</span>
<span class='curline'><a href='../S/1516.html#L238'>wp</a>                238 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to chown() the socket '%s'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;listen_address);</span>
<span class='curline'><a href='../S/1516.html#L246'>wp</a>                246 sapi/fpm/fpm/fpm_unix.c int fpm_unix_free_socket_premissions(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1516.html#L249'>wp</a>                249 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;socket_acl) {</span>
<span class='curline'><a href='../S/1516.html#L250'>wp</a>                250 sapi/fpm/fpm/fpm_unix.c 		return acl_free(wp-&gt;socket_acl);</span>
<span class='curline'><a href='../S/1516.html#L257'>wp</a>                257 sapi/fpm/fpm/fpm_unix.c static int fpm_unix_conf_wp(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1516.html#L263'>wp</a>                263 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;user &amp;&amp; *wp-&gt;config-&gt;user) {</span>
<span class='curline'><a href='../S/1516.html#L264'>wp</a>                264 sapi/fpm/fpm/fpm_unix.c 			if (strlen(wp-&gt;config-&gt;user) == strspn(wp-&gt;config-&gt;user, "0123456789")) {</span>
<span class='curline'><a href='../S/1516.html#L265'>wp</a>                265 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;set_uid = strtoul(wp-&gt;config-&gt;user, 0, 10);</span>
<span class='curline'><a href='../S/1516.html#L269'>wp</a>                269 sapi/fpm/fpm/fpm_unix.c 				pwd = getpwnam(wp-&gt;config-&gt;user);</span>
<span class='curline'><a href='../S/1516.html#L271'>wp</a>                271 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_ERROR, "[pool %s] cannot get uid for user '%s'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;user);</span>
<span class='curline'><a href='../S/1516.html#L275'>wp</a>                275 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;set_uid = pwd-&gt;pw_uid;</span>
<span class='curline'><a href='../S/1516.html#L276'>wp</a>                276 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;set_gid = pwd-&gt;pw_gid;</span>
<span class='curline'><a href='../S/1516.html#L278'>wp</a>                278 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;user = strdup(pwd-&gt;pw_name);</span>
<span class='curline'><a href='../S/1516.html#L279'>wp</a>                279 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;home = strdup(pwd-&gt;pw_dir);</span>
<span class='curline'><a href='../S/1516.html#L283'>wp</a>                283 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;group &amp;&amp; *wp-&gt;config-&gt;group) {</span>
<span class='curline'><a href='../S/1516.html#L284'>wp</a>                284 sapi/fpm/fpm/fpm_unix.c 			if (strlen(wp-&gt;config-&gt;group) == strspn(wp-&gt;config-&gt;group, "0123456789")) {</span>
<span class='curline'><a href='../S/1516.html#L285'>wp</a>                285 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;set_gid = strtoul(wp-&gt;config-&gt;group, 0, 10);</span>
<span class='curline'><a href='../S/1516.html#L289'>wp</a>                289 sapi/fpm/fpm/fpm_unix.c 				grp = getgrnam(wp-&gt;config-&gt;group);</span>
<span class='curline'><a href='../S/1516.html#L291'>wp</a>                291 sapi/fpm/fpm/fpm_unix.c 					zlog(ZLOG_ERROR, "[pool %s] cannot get gid for group '%s'", wp-&gt;config-&gt;name, wp-&gt;config-&gt;group);</span>
<span class='curline'><a href='../S/1516.html#L294'>wp</a>                294 sapi/fpm/fpm/fpm_unix.c 				wp-&gt;set_gid = grp-&gt;gr_gid;</span>
<span class='curline'><a href='../S/1516.html#L299'>wp</a>                299 sapi/fpm/fpm/fpm_unix.c 			if (wp-&gt;set_uid == 0 || wp-&gt;set_gid == 0) {</span>
<span class='curline'><a href='../S/1516.html#L300'>wp</a>                300 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_ERROR, "[pool %s] please specify user and group other than root", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L305'>wp</a>                305 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;user &amp;&amp; *wp-&gt;config-&gt;user) {</span>
<span class='curline'><a href='../S/1516.html#L306'>wp</a>                306 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_NOTICE, "[pool %s] 'user' directive is ignored when FPM is not running as root", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L308'>wp</a>                308 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;group &amp;&amp; *wp-&gt;config-&gt;group) {</span>
<span class='curline'><a href='../S/1516.html#L309'>wp</a>                309 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_NOTICE, "[pool %s] 'group' directive is ignored when FPM is not running as root", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L311'>wp</a>                311 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;chroot &amp;&amp; *wp-&gt;config-&gt;chroot) {</span>
<span class='curline'><a href='../S/1516.html#L312'>wp</a>                312 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_NOTICE, "[pool %s] 'chroot' directive is ignored when FPM is not running as root", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L314'>wp</a>                314 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;process_priority != 64) {</span>
<span class='curline'><a href='../S/1516.html#L315'>wp</a>                315 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_NOTICE, "[pool %s] 'process.priority' directive is ignored when FPM is not running as root", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L321'>wp</a>                321 sapi/fpm/fpm/fpm_unix.c 			wp-&gt;user = strdup(pwd-&gt;pw_name);</span>
<span class='curline'><a href='../S/1516.html#L322'>wp</a>                322 sapi/fpm/fpm/fpm_unix.c 			wp-&gt;home = strdup(pwd-&gt;pw_dir);</span>
<span class='curline'><a href='../S/1516.html#L329'>wp</a>                329 sapi/fpm/fpm/fpm_unix.c int fpm_unix_init_child(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1516.html#L334'>wp</a>                334 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;config-&gt;rlimit_files) {</span>
<span class='curline'><a href='../S/1516.html#L337'>wp</a>                337 sapi/fpm/fpm/fpm_unix.c 		r.rlim_max = r.rlim_cur = (rlim_t) wp-&gt;config-&gt;rlimit_files;</span>
<span class='curline'><a href='../S/1516.html#L340'>wp</a>                340 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to set rlimit_files for this pool. Please check your system limits or decrease rlimit_files. setrlimit(RLIMIT_NOFILE, %d)", wp-&gt;config-&gt;name, wp-&gt;config-&gt;rlimit_files);</span>
<span class='curline'><a href='../S/1516.html#L344'>wp</a>                344 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;config-&gt;rlimit_core) {</span>
<span class='curline'><a href='../S/1516.html#L347'>wp</a>                347 sapi/fpm/fpm/fpm_unix.c 		r.rlim_max = r.rlim_cur = wp-&gt;config-&gt;rlimit_core == -1 ? (rlim_t) RLIM_INFINITY : (rlim_t) wp-&gt;config-&gt;rlimit_core;</span>
<span class='curline'><a href='../S/1516.html#L350'>wp</a>                350 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to set rlimit_core for this pool. Please check your system limits or decrease rlimit_core. setrlimit(RLIMIT_CORE, %d)", wp-&gt;config-&gt;name, wp-&gt;config-&gt;rlimit_core);</span>
<span class='curline'><a href='../S/1516.html#L354'>wp</a>                354 sapi/fpm/fpm/fpm_unix.c 	if (is_root &amp;&amp; wp-&gt;config-&gt;chroot &amp;&amp; *wp-&gt;config-&gt;chroot) {</span>
<span class='curline'><a href='../S/1516.html#L355'>wp</a>                355 sapi/fpm/fpm/fpm_unix.c 		if (0 &gt; chroot(wp-&gt;config-&gt;chroot)) {</span>
<span class='curline'><a href='../S/1516.html#L356'>wp</a>                356 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to chroot(%s)",  wp-&gt;config-&gt;name, wp-&gt;config-&gt;chroot);</span>
<span class='curline'><a href='../S/1516.html#L362'>wp</a>                362 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;config-&gt;chdir &amp;&amp; *wp-&gt;config-&gt;chdir) {</span>
<span class='curline'><a href='../S/1516.html#L363'>wp</a>                363 sapi/fpm/fpm/fpm_unix.c 		if (0 &gt; chdir(wp-&gt;config-&gt;chdir)) {</span>
<span class='curline'><a href='../S/1516.html#L364'>wp</a>                364 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to chdir(%s)", wp-&gt;config-&gt;name, wp-&gt;config-&gt;chdir);</span>
<span class='curline'><a href='../S/1516.html#L369'>wp</a>                369 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_WARNING, "[pool %s] failed to chdir(/)", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L375'>wp</a>                375 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;config-&gt;process_priority != 64) {</span>
<span class='curline'><a href='../S/1516.html#L376'>wp</a>                376 sapi/fpm/fpm/fpm_unix.c 			if (setpriority(PRIO_PROCESS, 0, wp-&gt;config-&gt;process_priority) &lt; 0) {</span>
<span class='curline'><a href='../S/1516.html#L377'>wp</a>                377 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_SYSERROR, "[pool %s] Unable to set priority for this new process", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L382'>wp</a>                382 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;set_gid) {</span>
<span class='curline'><a href='../S/1516.html#L383'>wp</a>                383 sapi/fpm/fpm/fpm_unix.c 			if (0 &gt; setgid(wp-&gt;set_gid)) {</span>
<span class='curline'><a href='../S/1516.html#L384'>wp</a>                384 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_SYSERROR, "[pool %s] failed to setgid(%d)", wp-&gt;config-&gt;name, wp-&gt;set_gid);</span>
<span class='curline'><a href='../S/1516.html#L388'>wp</a>                388 sapi/fpm/fpm/fpm_unix.c 		if (wp-&gt;set_uid) {</span>
<span class='curline'><a href='../S/1516.html#L389'>wp</a>                389 sapi/fpm/fpm/fpm_unix.c 			if (0 &gt; initgroups(wp-&gt;config-&gt;user, wp-&gt;set_gid)) {</span>
<span class='curline'><a href='../S/1516.html#L390'>wp</a>                390 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_SYSERROR, "[pool %s] failed to initgroups(%s, %d)", wp-&gt;config-&gt;name, wp-&gt;config-&gt;user, wp-&gt;set_gid);</span>
<span class='curline'><a href='../S/1516.html#L393'>wp</a>                393 sapi/fpm/fpm/fpm_unix.c 			if (0 &gt; setuid(wp-&gt;set_uid)) {</span>
<span class='curline'><a href='../S/1516.html#L394'>wp</a>                394 sapi/fpm/fpm/fpm_unix.c 				zlog(ZLOG_SYSERROR, "[pool %s] failed to setuid(%d)", wp-&gt;config-&gt;name, wp-&gt;set_uid);</span>
<span class='curline'><a href='../S/1516.html#L402'>wp</a>                402 sapi/fpm/fpm/fpm_unix.c 		zlog(ZLOG_SYSERROR, "[pool %s] failed to prctl(PR_SET_DUMPABLE)", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L411'>wp</a>                411 sapi/fpm/fpm/fpm_unix.c 	if (wp-&gt;config-&gt;apparmor_hat) {</span>
<span class='curline'><a href='../S/1516.html#L415'>wp</a>                415 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to query apparmor confinement. Please check if \"/proc/*/attr/current\" is read and writeable.", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L419'>wp</a>                419 sapi/fpm/fpm/fpm_unix.c 		new_con = malloc(strlen(con) + strlen(wp-&gt;config-&gt;apparmor_hat) + 3); // // + 0 Byte</span>
<span class='curline'><a href='../S/1516.html#L421'>wp</a>                421 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to allocate memory for apparmor hat change.", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L425'>wp</a>                425 sapi/fpm/fpm/fpm_unix.c 		if (0 &gt; sprintf(new_con, "%s//%s", con, wp-&gt;config-&gt;apparmor_hat)) {</span>
<span class='curline'><a href='../S/1516.html#L426'>wp</a>                426 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to construct apparmor confinement.", wp-&gt;config-&gt;name);</span>
<span class='curline'><a href='../S/1516.html#L431'>wp</a>                431 sapi/fpm/fpm/fpm_unix.c 			zlog(ZLOG_SYSERROR, "[pool %s] failed to change to new confinement (%s). Please check if \"/proc/*/attr/current\" is read and writeable and \"change_profile -&gt; %s//*\" is allowed.", wp-&gt;config-&gt;name, new_con, con);</span>
<span class='curline'><a href='../S/1516.html#L446'>wp</a>                446 sapi/fpm/fpm/fpm_unix.c 	struct fpm_worker_pool_s *wp;</span>
<span class='curline'><a href='../S/1516.html#L573'>wp</a>                573 sapi/fpm/fpm/fpm_unix.c 	for (wp = fpm_worker_all_pools; wp; wp = wp-&gt;next) {</span>
<span class='curline'><a href='../S/1516.html#L574'>wp</a>                574 sapi/fpm/fpm/fpm_unix.c 		if (0 &gt; fpm_unix_conf_wp(wp)) {</span>
<span class='curline'><a href='../S/1517.html#L10'>wp</a>                 10 sapi/fpm/fpm/fpm_unix.h int fpm_unix_resolve_socket_premissions(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1517.html#L11'>wp</a>                 11 sapi/fpm/fpm/fpm_unix.h int fpm_unix_set_socket_premissions(struct fpm_worker_pool_s *wp, const char *path);</span>
<span class='curline'><a href='../S/1517.html#L12'>wp</a>                 12 sapi/fpm/fpm/fpm_unix.h int fpm_unix_free_socket_premissions(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1517.html#L14'>wp</a>                 14 sapi/fpm/fpm/fpm_unix.h int fpm_unix_init_child(struct fpm_worker_pool_s *wp);</span>
<span class='curline'><a href='../S/1518.html#L22'>wp</a>                 22 sapi/fpm/fpm/fpm_worker_pool.c void fpm_worker_pool_free(struct fpm_worker_pool_s *wp) /* {{{ */</span>
<span class='curline'><a href='../S/1518.html#L24'>wp</a>                 24 sapi/fpm/fpm/fpm_worker_pool.c 	if (wp-&gt;config) {</span>
<span class='curline'><a href='../S/1518.html#L25'>wp</a>                 25 sapi/fpm/fpm/fpm_worker_pool.c 		free(wp-&gt;config);</span>
<span class='curline'><a href='../S/1518.html#L27'>wp</a>                 27 sapi/fpm/fpm/fpm_worker_pool.c 	if (wp-&gt;user) {</span>
<span class='curline'><a href='../S/1518.html#L28'>wp</a>                 28 sapi/fpm/fpm/fpm_worker_pool.c 		free(wp-&gt;user);</span>
<span class='curline'><a href='../S/1518.html#L30'>wp</a>                 30 sapi/fpm/fpm/fpm_worker_pool.c 	if (wp-&gt;home) {</span>
<span class='curline'><a href='../S/1518.html#L31'>wp</a>                 31 sapi/fpm/fpm/fpm_worker_pool.c 		free(wp-&gt;home);</span>
<span class='curline'><a href='../S/1518.html#L33'>wp</a>                 33 sapi/fpm/fpm/fpm_worker_pool.c 	fpm_unix_free_socket_premissions(wp);</span>
<span class='curline'><a href='../S/1518.html#L34'>wp</a>                 34 sapi/fpm/fpm/fpm_worker_pool.c 	free(wp);</span>
<span class='curline'><a href='../S/1518.html#L40'>wp</a>                 40 sapi/fpm/fpm/fpm_worker_pool.c 	struct fpm_worker_pool_s *wp, *wp_next;</span>
<span class='curline'><a href='../S/1518.html#L42'>wp</a>                 42 sapi/fpm/fpm/fpm_worker_pool.c 	for (wp = fpm_worker_all_pools; wp; wp = wp_next) {</span>
<span class='curline'><a href='../S/1518.html#L43'>wp</a>                 43 sapi/fpm/fpm/fpm_worker_pool.c 		wp_next = wp-&gt;next;</span>
<span class='curline'><a href='../S/1518.html#L44'>wp</a>                 44 sapi/fpm/fpm/fpm_worker_pool.c 		fpm_worker_pool_config_free(wp-&gt;config);</span>
<span class='curline'><a href='../S/1518.html#L45'>wp</a>                 45 sapi/fpm/fpm/fpm_worker_pool.c 		fpm_children_free(wp-&gt;children);</span>
<span class='curline'><a href='../S/1518.html#L47'>wp</a>                 47 sapi/fpm/fpm/fpm_worker_pool.c 			fpm_scoreboard_free(wp-&gt;scoreboard);</span>
<span class='curline'><a href='../S/1518.html#L49'>wp</a>                 49 sapi/fpm/fpm/fpm_worker_pool.c 		fpm_worker_pool_free(wp);</span>
<span class='curline'><a href='../S/1519.html#L52'>wp</a>                 52 sapi/fpm/fpm/fpm_worker_pool.h void fpm_worker_pool_free(struct fpm_worker_pool_s *wp);</span>
</pre>
</body>
</html>
