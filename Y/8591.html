<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>aPool</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1054.html#L17944'>aPool</a>            17944 ext/sqlite3/libsqlite/sqlite3.c   Mem3Block *aPool;</span>
<span class='curline'><a href='../S/1054.html#L17986'>aPool</a>            17986 ext/sqlite3/libsqlite/sqlite3.c   u32 next = mem3.aPool[i].u.list.next;</span>
<span class='curline'><a href='../S/1054.html#L17987'>aPool</a>            17987 ext/sqlite3/libsqlite/sqlite3.c   u32 prev = mem3.aPool[i].u.list.prev;</span>
<span class='curline'><a href='../S/1054.html#L17992'>aPool</a>            17992 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[prev].u.list.next = next;</span>
<span class='curline'><a href='../S/1054.html#L17995'>aPool</a>            17995 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[next].u.list.prev = prev;</span>
<span class='curline'><a href='../S/1054.html#L17997'>aPool</a>            17997 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i].u.list.next = 0;</span>
<span class='curline'><a href='../S/1054.html#L17998'>aPool</a>            17998 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i].u.list.prev = 0;</span>
<span class='curline'><a href='../S/1054.html#L18008'>aPool</a>            18008 ext/sqlite3/libsqlite/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x &amp; 1)==0 );</span>
<span class='curline'><a href='../S/1054.html#L18010'>aPool</a>            18010 ext/sqlite3/libsqlite/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/1054.html#L18011'>aPool</a>            18011 ext/sqlite3/libsqlite/sqlite3.c   assert( size==mem3.aPool[i+size-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/1054.html#L18027'>aPool</a>            18027 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i].u.list.next = *pRoot;</span>
<span class='curline'><a href='../S/1054.html#L18028'>aPool</a>            18028 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i].u.list.prev = 0;</span>
<span class='curline'><a href='../S/1054.html#L18030'>aPool</a>            18030 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[*pRoot].u.list.prev = i;</span>
<span class='curline'><a href='../S/1054.html#L18043'>aPool</a>            18043 ext/sqlite3/libsqlite/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x &amp; 1)==0 );</span>
<span class='curline'><a href='../S/1054.html#L18044'>aPool</a>            18044 ext/sqlite3/libsqlite/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/1054.html#L18045'>aPool</a>            18045 ext/sqlite3/libsqlite/sqlite3.c   assert( size==mem3.aPool[i+size-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/1054.html#L18094'>aPool</a>            18094 ext/sqlite3/libsqlite/sqlite3.c   assert( mem3.aPool[i-1].u.hdr.size4x/4==nBlock );</span>
<span class='curline'><a href='../S/1054.html#L18095'>aPool</a>            18095 ext/sqlite3/libsqlite/sqlite3.c   assert( mem3.aPool[i+nBlock-1].u.hdr.prevSize==nBlock );</span>
<span class='curline'><a href='../S/1054.html#L18096'>aPool</a>            18096 ext/sqlite3/libsqlite/sqlite3.c   x = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/1054.html#L18097'>aPool</a>            18097 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i-1].u.hdr.size4x = nBlock*4 | 1 | (x&amp;2);</span>
<span class='curline'><a href='../S/1054.html#L18098'>aPool</a>            18098 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i+nBlock-1].u.hdr.prevSize = nBlock;</span>
<span class='curline'><a href='../S/1054.html#L18099'>aPool</a>            18099 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i+nBlock-1].u.hdr.size4x |= 2;</span>
<span class='curline'><a href='../S/1054.html#L18100'>aPool</a>            18100 ext/sqlite3/libsqlite/sqlite3.c   return &amp;mem3.aPool[i];</span>
<span class='curline'><a href='../S/1054.html#L18123'>aPool</a>            18123 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = nBlock;</span>
<span class='curline'><a href='../S/1054.html#L18124'>aPool</a>            18124 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x |= 2;</span>
<span class='curline'><a href='../S/1054.html#L18125'>aPool</a>            18125 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[newi-1].u.hdr.size4x = nBlock*4 + 1;</span>
<span class='curline'><a href='../S/1054.html#L18127'>aPool</a>            18127 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[newi-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/1054.html#L18128'>aPool</a>            18128 ext/sqlite3/libsqlite/sqlite3.c     x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/1054.html#L18129'>aPool</a>            18129 ext/sqlite3/libsqlite/sqlite3.c     mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/1054.html#L18133'>aPool</a>            18133 ext/sqlite3/libsqlite/sqlite3.c     return (void*)&amp;mem3.aPool[newi];</span>
<span class='curline'><a href='../S/1054.html#L18158'>aPool</a>            18158 ext/sqlite3/libsqlite/sqlite3.c     iNext = mem3.aPool[i].u.list.next;</span>
<span class='curline'><a href='../S/1054.html#L18159'>aPool</a>            18159 ext/sqlite3/libsqlite/sqlite3.c     size = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/1054.html#L18163'>aPool</a>            18163 ext/sqlite3/libsqlite/sqlite3.c       assert( i &gt; mem3.aPool[i-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/1054.html#L18164'>aPool</a>            18164 ext/sqlite3/libsqlite/sqlite3.c       prev = i - mem3.aPool[i-1].u.hdr.prevSize;</span>
<span class='curline'><a href='../S/1054.html#L18166'>aPool</a>            18166 ext/sqlite3/libsqlite/sqlite3.c         iNext = mem3.aPool[prev].u.list.next;</span>
<span class='curline'><a href='../S/1054.html#L18170'>aPool</a>            18170 ext/sqlite3/libsqlite/sqlite3.c       x = mem3.aPool[prev-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/1054.html#L18171'>aPool</a>            18171 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[prev-1].u.hdr.size4x = size*4 | x;</span>
<span class='curline'><a href='../S/1054.html#L18172'>aPool</a>            18172 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[prev+size-1].u.hdr.prevSize = size;</span>
<span class='curline'><a href='../S/1054.html#L18219'>aPool</a>            18219 ext/sqlite3/libsqlite/sqlite3.c     for(i=mem3.aiHash[hash]; i&gt;0; i=mem3.aPool[i].u.list.next){</span>
<span class='curline'><a href='../S/1054.html#L18220'>aPool</a>            18220 ext/sqlite3/libsqlite/sqlite3.c       if( mem3.aPool[i-1].u.hdr.size4x/4==nBlock ){</span>
<span class='curline'><a href='../S/1054.html#L18279'>aPool</a>            18279 ext/sqlite3/libsqlite/sqlite3.c   assert( p&gt;mem3.aPool &amp;&amp; p&lt;&amp;mem3.aPool[mem3.nPool] );</span>
<span class='curline'><a href='../S/1054.html#L18280'>aPool</a>            18280 ext/sqlite3/libsqlite/sqlite3.c   i = p - mem3.aPool;</span>
<span class='curline'><a href='../S/1054.html#L18281'>aPool</a>            18281 ext/sqlite3/libsqlite/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x&amp;1)==1 );</span>
<span class='curline'><a href='../S/1054.html#L18282'>aPool</a>            18282 ext/sqlite3/libsqlite/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/1054.html#L18284'>aPool</a>            18284 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i-1].u.hdr.size4x &amp;= ~1;</span>
<span class='curline'><a href='../S/1054.html#L18285'>aPool</a>            18285 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i+size-1].u.hdr.prevSize = size;</span>
<span class='curline'><a href='../S/1054.html#L18286'>aPool</a>            18286 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[i+size-1].u.hdr.size4x &amp;= ~2;</span>
<span class='curline'><a href='../S/1054.html#L18291'>aPool</a>            18291 ext/sqlite3/libsqlite/sqlite3.c     while( (mem3.aPool[mem3.iMaster-1].u.hdr.size4x&amp;2)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L18292'>aPool</a>            18292 ext/sqlite3/libsqlite/sqlite3.c       size = mem3.aPool[mem3.iMaster-1].u.hdr.prevSize;</span>
<span class='curline'><a href='../S/1054.html#L18296'>aPool</a>            18296 ext/sqlite3/libsqlite/sqlite3.c       x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/1054.html#L18297'>aPool</a>            18297 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/1054.html#L18298'>aPool</a>            18298 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/1054.html#L18300'>aPool</a>            18300 ext/sqlite3/libsqlite/sqlite3.c     x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/1054.html#L18301'>aPool</a>            18301 ext/sqlite3/libsqlite/sqlite3.c     while( (mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x&amp;1)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L18303'>aPool</a>            18303 ext/sqlite3/libsqlite/sqlite3.c       mem3.szMaster += mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/1054.html#L18304'>aPool</a>            18304 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/1054.html#L18305'>aPool</a>            18305 ext/sqlite3/libsqlite/sqlite3.c       mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/1054.html#L18398'>aPool</a>            18398 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool = (Mem3Block *)sqlite3GlobalConfig.pHeap;</span>
<span class='curline'><a href='../S/1054.html#L18405'>aPool</a>            18405 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[0].u.hdr.size4x = (mem3.szMaster&lt;&lt;2) + 2;</span>
<span class='curline'><a href='../S/1054.html#L18406'>aPool</a>            18406 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[mem3.nPool].u.hdr.prevSize = mem3.nPool;</span>
<span class='curline'><a href='../S/1054.html#L18407'>aPool</a>            18407 ext/sqlite3/libsqlite/sqlite3.c   mem3.aPool[mem3.nPool].u.hdr.size4x = 1;</span>
<span class='curline'><a href='../S/1054.html#L18445'>aPool</a>            18445 ext/sqlite3/libsqlite/sqlite3.c     size = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/1054.html#L18447'>aPool</a>            18447 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, "%p size error\n", &amp;mem3.aPool[i]);</span>
<span class='curline'><a href='../S/1054.html#L18451'>aPool</a>            18451 ext/sqlite3/libsqlite/sqlite3.c     if( (size&amp;1)==0 &amp;&amp; mem3.aPool[i+size/4-1].u.hdr.prevSize!=size/4 ){</span>
<span class='curline'><a href='../S/1054.html#L18452'>aPool</a>            18452 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, "%p tail size does not match\n", &amp;mem3.aPool[i]);</span>
<span class='curline'><a href='../S/1054.html#L18456'>aPool</a>            18456 ext/sqlite3/libsqlite/sqlite3.c     if( ((mem3.aPool[i+size/4-1].u.hdr.size4x&amp;2)&gt;&gt;1)!=(size&amp;1) ){</span>
<span class='curline'><a href='../S/1054.html#L18457'>aPool</a>            18457 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, "%p tail checkout bit is incorrect\n", &amp;mem3.aPool[i]);</span>
<span class='curline'><a href='../S/1054.html#L18462'>aPool</a>            18462 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, "%p %6d bytes checked out\n", &amp;mem3.aPool[i], (size/4)*8-8);</span>
<span class='curline'><a href='../S/1054.html#L18464'>aPool</a>            18464 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, "%p %6d bytes free%s\n", &amp;mem3.aPool[i], (size/4)*8-8,</span>
<span class='curline'><a href='../S/1054.html#L18471'>aPool</a>            18471 ext/sqlite3/libsqlite/sqlite3.c     for(j = mem3.aiSmall[i]; j&gt;0; j=mem3.aPool[j].u.list.next){</span>
<span class='curline'><a href='../S/1054.html#L18472'>aPool</a>            18472 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, " %p(%d)", &amp;mem3.aPool[j],</span>
<span class='curline'><a href='../S/1054.html#L18473'>aPool</a>            18473 ext/sqlite3/libsqlite/sqlite3.c               (mem3.aPool[j-1].u.hdr.size4x/4)*8-8);</span>
<span class='curline'><a href='../S/1054.html#L18480'>aPool</a>            18480 ext/sqlite3/libsqlite/sqlite3.c     for(j = mem3.aiHash[i]; j&gt;0; j=mem3.aPool[j].u.list.next){</span>
<span class='curline'><a href='../S/1054.html#L18481'>aPool</a>            18481 ext/sqlite3/libsqlite/sqlite3.c       fprintf(out, " %p(%d)", &amp;mem3.aPool[j],</span>
<span class='curline'><a href='../S/1054.html#L18482'>aPool</a>            18482 ext/sqlite3/libsqlite/sqlite3.c               (mem3.aPool[j-1].u.hdr.size4x/4)*8-8);</span>
</pre>
</body>
</html>
