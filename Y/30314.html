<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>pBt</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1054.html#L9552'>pBt</a>              9552 ext/sqlite3/libsqlite/sqlite3.c SQLITE_PRIVATE int sqlite3BtreeSetVersion(Btree *pBt, int iVersion);</span>
<span class='curline'><a href='../S/1054.html#L9557'>pBt</a>              9557 ext/sqlite3/libsqlite/sqlite3.c SQLITE_PRIVATE int sqlite3BtreeIsReadonly(Btree *pBt);</span>
<span class='curline'><a href='../S/1054.html#L10865'>pBt</a>              10865 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;          /* The B*Tree structure for this database file */</span>
<span class='curline'><a href='../S/1054.html#L14566'>pBt</a>              14566 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;           /* Separate file holding temporary table */</span>
<span class='curline'><a href='../S/1054.html#L15203'>pBt</a>              15203 ext/sqlite3/libsqlite/sqlite3.c         Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L15204'>pBt</a>              15204 ext/sqlite3/libsqlite/sqlite3.c         if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L15205'>pBt</a>              15205 ext/sqlite3/libsqlite/sqlite3.c           Pager *pPager = sqlite3BtreePager(pBt);</span>
<span class='curline'><a href='../S/1054.html#L15294'>pBt</a>              15294 ext/sqlite3/libsqlite/sqlite3.c         if( db-&gt;aDb[i].pBt ){</span>
<span class='curline'><a href='../S/1054.html#L15295'>pBt</a>              15295 ext/sqlite3/libsqlite/sqlite3.c           Pager *pPager = sqlite3BtreePager(db-&gt;aDb[i].pBt);</span>
<span class='curline'><a href='../S/1054.html#L17552'>pBt</a>              17552 ext/sqlite3/libsqlite/sqlite3.c   void **pBt;</span>
<span class='curline'><a href='../S/1054.html#L17566'>pBt</a>              17566 ext/sqlite3/libsqlite/sqlite3.c     pBt = (void**)&amp;z[mem.nTitle];</span>
<span class='curline'><a href='../S/1054.html#L17567'>pBt</a>              17567 ext/sqlite3/libsqlite/sqlite3.c     pHdr = (struct MemBlockHdr*)&amp;pBt[mem.nBacktrace];</span>
<span class='curline'><a href='../S/1054.html#L17583'>pBt</a>              17583 ext/sqlite3/libsqlite/sqlite3.c       memcpy(pBt, &amp;aAddr[1], pHdr-&gt;nBacktrace*sizeof(void*));</span>
<span class='curline'><a href='../S/1054.html#L17584'>pBt</a>              17584 ext/sqlite3/libsqlite/sqlite3.c       assert(pBt[0]);</span>
<span class='curline'><a href='../S/1054.html#L17611'>pBt</a>              17611 ext/sqlite3/libsqlite/sqlite3.c   void **pBt;</span>
<span class='curline'><a href='../S/1054.html#L17616'>pBt</a>              17616 ext/sqlite3/libsqlite/sqlite3.c   pBt = (void**)pHdr;</span>
<span class='curline'><a href='../S/1054.html#L17617'>pBt</a>              17617 ext/sqlite3/libsqlite/sqlite3.c   pBt -= pHdr-&gt;nBacktraceSlots;</span>
<span class='curline'><a href='../S/1054.html#L17633'>pBt</a>              17633 ext/sqlite3/libsqlite/sqlite3.c   z = (char*)pBt;</span>
<span class='curline'><a href='../S/1054.html#L17774'>pBt</a>              17774 ext/sqlite3/libsqlite/sqlite3.c     void **pBt = (void**)pHdr;</span>
<span class='curline'><a href='../S/1054.html#L17775'>pBt</a>              17775 ext/sqlite3/libsqlite/sqlite3.c     pBt -= pHdr-&gt;nBacktraceSlots;</span>
<span class='curline'><a href='../S/1054.html#L17776'>pBt</a>              17776 ext/sqlite3/libsqlite/sqlite3.c     mem.xBacktrace((int)pHdr-&gt;iSize, pHdr-&gt;nBacktrace-1, &amp;pBt[1]);</span>
<span class='curline'><a href='../S/1054.html#L17787'>pBt</a>              17787 ext/sqlite3/libsqlite/sqlite3.c   void **pBt;</span>
<span class='curline'><a href='../S/1054.html#L17802'>pBt</a>              17802 ext/sqlite3/libsqlite/sqlite3.c       pBt = (void**)pHdr;</span>
<span class='curline'><a href='../S/1054.html#L17803'>pBt</a>              17803 ext/sqlite3/libsqlite/sqlite3.c       pBt -= pHdr-&gt;nBacktraceSlots;</span>
<span class='curline'><a href='../S/1054.html#L17804'>pBt</a>              17804 ext/sqlite3/libsqlite/sqlite3.c       backtrace_symbols_fd(pBt, pHdr-&gt;nBacktrace, fileno(out));</span>
<span class='curline'><a href='../S/1054.html#L52303'>pBt</a>              52303 ext/sqlite3/libsqlite/sqlite3.c #define MX_CELL_SIZE(pBt)  ((int)(pBt-&gt;pageSize-8))</span>
<span class='curline'><a href='../S/1054.html#L52310'>pBt</a>              52310 ext/sqlite3/libsqlite/sqlite3.c #define MX_CELL(pBt) ((pBt-&gt;pageSize-8)/6)</span>
<span class='curline'><a href='../S/1054.html#L52374'>pBt</a>              52374 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;       /* Pointer to BtShared that this page is part of */</span>
<span class='curline'><a href='../S/1054.html#L52430'>pBt</a>              52430 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;     /* Sharable content of this btree */</span>
<span class='curline'><a href='../S/1054.html#L52586'>pBt</a>              52586 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;            /* The BtShared this cursor points to */</span>
<span class='curline'><a href='../S/1054.html#L52653'>pBt</a>              52653 ext/sqlite3/libsqlite/sqlite3.c # define PENDING_BYTE_PAGE(pBt) PAGER_MJ_PGNO(pBt)</span>
<span class='curline'><a href='../S/1054.html#L52670'>pBt</a>              52670 ext/sqlite3/libsqlite/sqlite3.c #define PTRMAP_PAGENO(pBt, pgno) ptrmapPageno(pBt, pgno)</span>
<span class='curline'><a href='../S/1054.html#L52672'>pBt</a>              52672 ext/sqlite3/libsqlite/sqlite3.c #define PTRMAP_ISPAGE(pBt, pgno) (PTRMAP_PAGENO((pBt),(pgno))==(pgno))</span>
<span class='curline'><a href='../S/1054.html#L52715'>pBt</a>              52715 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pBt-&gt;inTransaction!=TRANS_NONE || p-&gt;pBt-&gt;nTransaction==0 ); \</span>
<span class='curline'><a href='../S/1054.html#L52716'>pBt</a>              52716 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pBt-&gt;inTransaction&gt;=p-&gt;inTrans ); </span>
<span class='curline'><a href='../S/1054.html#L52727'>pBt</a>              52727 ext/sqlite3/libsqlite/sqlite3.c #define ISAUTOVACUUM (pBt-&gt;autoVacuum)</span>
<span class='curline'><a href='../S/1054.html#L52745'>pBt</a>              52745 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;    /* The tree being checked out */</span>
<span class='curline'><a href='../S/1054.html#L52777'>pBt</a>              52777 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_notheld(p-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L52780'>pBt</a>              52780 ext/sqlite3/libsqlite/sqlite3.c   sqlite3_mutex_enter(p-&gt;pBt-&gt;mutex);</span>
<span class='curline'><a href='../S/1054.html#L52781'>pBt</a>              52781 ext/sqlite3/libsqlite/sqlite3.c   p-&gt;pBt-&gt;db = p-&gt;db;</span>
<span class='curline'><a href='../S/1054.html#L52790'>pBt</a>              52790 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L52792'>pBt</a>              52792 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L52794'>pBt</a>              52794 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;db==pBt-&gt;db );</span>
<span class='curline'><a href='../S/1054.html#L52796'>pBt</a>              52796 ext/sqlite3/libsqlite/sqlite3.c   sqlite3_mutex_leave(pBt-&gt;mutex);</span>
<span class='curline'><a href='../S/1054.html#L52824'>pBt</a>              52824 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pNext==0 || p-&gt;pNext-&gt;pBt&gt;p-&gt;pBt );</span>
<span class='curline'><a href='../S/1054.html#L52825'>pBt</a>              52825 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pPrev==0 || p-&gt;pPrev-&gt;pBt&lt;p-&gt;pBt );</span>
<span class='curline'><a href='../S/1054.html#L52839'>pBt</a>              52839 ext/sqlite3/libsqlite/sqlite3.c   assert( (p-&gt;locked==0 &amp;&amp; p-&gt;sharable) || p-&gt;pBt-&gt;db==p-&gt;db );</span>
<span class='curline'><a href='../S/1054.html#L52860'>pBt</a>              52860 ext/sqlite3/libsqlite/sqlite3.c   if( sqlite3_mutex_try(p-&gt;pBt-&gt;mutex)==SQLITE_OK ){</span>
<span class='curline'><a href='../S/1054.html#L52861'>pBt</a>              52861 ext/sqlite3/libsqlite/sqlite3.c     p-&gt;pBt-&gt;db = p-&gt;db;</span>
<span class='curline'><a href='../S/1054.html#L52873'>pBt</a>              52873 ext/sqlite3/libsqlite/sqlite3.c     assert( pLater-&gt;pNext==0 || pLater-&gt;pNext-&gt;pBt&gt;pLater-&gt;pBt );</span>
<span class='curline'><a href='../S/1054.html#L52911'>pBt</a>              52911 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;sharable==0 || p-&gt;locked==0 || p-&gt;db==p-&gt;pBt-&gt;db );</span>
<span class='curline'><a href='../S/1054.html#L52912'>pBt</a>              52912 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;sharable==0 || p-&gt;locked==0 || sqlite3_mutex_held(p-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L52954'>pBt</a>              52954 ext/sqlite3/libsqlite/sqlite3.c     p = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L52963'>pBt</a>              52963 ext/sqlite3/libsqlite/sqlite3.c     p = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L52990'>pBt</a>              52990 ext/sqlite3/libsqlite/sqlite3.c     p = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L52992'>pBt</a>              52992 ext/sqlite3/libsqlite/sqlite3.c          (p-&gt;wantToLock==0 || !sqlite3_mutex_held(p-&gt;pBt-&gt;mutex)) ){</span>
<span class='curline'><a href='../S/1054.html#L53019'>pBt</a>              53019 ext/sqlite3/libsqlite/sqlite3.c   p = db-&gt;aDb[iDb].pBt;</span>
<span class='curline'><a href='../S/1054.html#L53037'>pBt</a>              53037 ext/sqlite3/libsqlite/sqlite3.c   p-&gt;pBt-&gt;db = p-&gt;db;</span>
<span class='curline'><a href='../S/1054.html#L53042'>pBt</a>              53042 ext/sqlite3/libsqlite/sqlite3.c     Btree *p = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L53044'>pBt</a>              53044 ext/sqlite3/libsqlite/sqlite3.c       p-&gt;pBt-&gt;db = p-&gt;db;</span>
<span class='curline'><a href='../S/1054.html#L53197'>pBt</a>              53197 ext/sqlite3/libsqlite/sqlite3.c   Schema *pSchema = (Schema *)pBtree-&gt;pBt-&gt;pSchema;</span>
<span class='curline'><a href='../S/1054.html#L53245'>pBt</a>              53245 ext/sqlite3/libsqlite/sqlite3.c   for(pLock=pBtree-&gt;pBt-&gt;pLock; pLock; pLock=pLock-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53280'>pBt</a>              53280 ext/sqlite3/libsqlite/sqlite3.c   for(p=pBtree-&gt;pBt-&gt;pCursor; p; p=p-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53299'>pBt</a>              53299 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L53311'>pBt</a>              53311 ext/sqlite3/libsqlite/sqlite3.c   assert( eLock==READ_LOCK || (p==pBt-&gt;pWriter &amp;&amp; p-&gt;inTrans==TRANS_WRITE) );</span>
<span class='curline'><a href='../S/1054.html#L53312'>pBt</a>              53312 ext/sqlite3/libsqlite/sqlite3.c   assert( eLock==READ_LOCK || pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L53322'>pBt</a>              53322 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;pWriter!=p &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_EXCLUSIVE)!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L53323'>pBt</a>              53323 ext/sqlite3/libsqlite/sqlite3.c     sqlite3ConnectionBlocked(p-&gt;db, pBt-&gt;pWriter-&gt;db);</span>
<span class='curline'><a href='../S/1054.html#L53327'>pBt</a>              53327 ext/sqlite3/libsqlite/sqlite3.c   for(pIter=pBt-&gt;pLock; pIter; pIter=pIter-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53342'>pBt</a>              53342 ext/sqlite3/libsqlite/sqlite3.c         assert( p==pBt-&gt;pWriter );</span>
<span class='curline'><a href='../S/1054.html#L53343'>pBt</a>              53343 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;btsFlags |= BTS_PENDING;</span>
<span class='curline'><a href='../S/1054.html#L53371'>pBt</a>              53371 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L53391'>pBt</a>              53391 ext/sqlite3/libsqlite/sqlite3.c   for(pIter=pBt-&gt;pLock; pIter; pIter=pIter-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53408'>pBt</a>              53408 ext/sqlite3/libsqlite/sqlite3.c     pLock-&gt;pNext = pBt-&gt;pLock;</span>
<span class='curline'><a href='../S/1054.html#L53409'>pBt</a>              53409 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pLock = pLock;</span>
<span class='curline'><a href='../S/1054.html#L53435'>pBt</a>              53435 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L53436'>pBt</a>              53436 ext/sqlite3/libsqlite/sqlite3.c   BtLock **ppIter = &amp;pBt-&gt;pLock;</span>
<span class='curline'><a href='../S/1054.html#L53444'>pBt</a>              53444 ext/sqlite3/libsqlite/sqlite3.c     assert( (pBt-&gt;btsFlags &amp; BTS_EXCLUSIVE)==0 || pBt-&gt;pWriter==pLock-&gt;pBtree );</span>
<span class='curline'><a href='../S/1054.html#L53457'>pBt</a>              53457 ext/sqlite3/libsqlite/sqlite3.c   assert( (pBt-&gt;btsFlags &amp; BTS_PENDING)==0 || pBt-&gt;pWriter );</span>
<span class='curline'><a href='../S/1054.html#L53458'>pBt</a>              53458 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;pWriter==p ){</span>
<span class='curline'><a href='../S/1054.html#L53459'>pBt</a>              53459 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pWriter = 0;</span>
<span class='curline'><a href='../S/1054.html#L53460'>pBt</a>              53460 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;btsFlags &amp;= ~(BTS_EXCLUSIVE|BTS_PENDING);</span>
<span class='curline'><a href='../S/1054.html#L53461'>pBt</a>              53461 ext/sqlite3/libsqlite/sqlite3.c   }else if( pBt-&gt;nTransaction==2 ){</span>
<span class='curline'><a href='../S/1054.html#L53471'>pBt</a>              53471 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;btsFlags &amp;= ~BTS_PENDING;</span>
<span class='curline'><a href='../S/1054.html#L53479'>pBt</a>              53479 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L53480'>pBt</a>              53480 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;pWriter==p ){</span>
<span class='curline'><a href='../S/1054.html#L53482'>pBt</a>              53482 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pWriter = 0;</span>
<span class='curline'><a href='../S/1054.html#L53483'>pBt</a>              53483 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;btsFlags &amp;= ~(BTS_EXCLUSIVE|BTS_PENDING);</span>
<span class='curline'><a href='../S/1054.html#L53484'>pBt</a>              53484 ext/sqlite3/libsqlite/sqlite3.c     for(pLock=pBt-&gt;pLock; pLock; pLock=pLock-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53502'>pBt</a>              53502 ext/sqlite3/libsqlite/sqlite3.c   return sqlite3_mutex_held(p-&gt;pBt-&gt;mutex);</span>
<span class='curline'><a href='../S/1054.html#L53516'>pBt</a>              53516 ext/sqlite3/libsqlite/sqlite3.c static void invalidateAllOverflowCache(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L53518'>pBt</a>              53518 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L53519'>pBt</a>              53519 ext/sqlite3/libsqlite/sqlite3.c   for(p=pBt-&gt;pCursor; p; p=p-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53544'>pBt</a>              53544 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pBtree-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L53546'>pBt</a>              53546 ext/sqlite3/libsqlite/sqlite3.c   for(p=pBt-&gt;pCursor; p; p=p-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53595'>pBt</a>              53595 ext/sqlite3/libsqlite/sqlite3.c static int btreeSetHasContent(BtShared *pBt, Pgno pgno){</span>
<span class='curline'><a href='../S/1054.html#L53597'>pBt</a>              53597 ext/sqlite3/libsqlite/sqlite3.c   if( !pBt-&gt;pHasContent ){</span>
<span class='curline'><a href='../S/1054.html#L53598'>pBt</a>              53598 ext/sqlite3/libsqlite/sqlite3.c     assert( pgno&lt;=pBt-&gt;nPage );</span>
<span class='curline'><a href='../S/1054.html#L53599'>pBt</a>              53599 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pHasContent = sqlite3BitvecCreate(pBt-&gt;nPage);</span>
<span class='curline'><a href='../S/1054.html#L53600'>pBt</a>              53600 ext/sqlite3/libsqlite/sqlite3.c     if( !pBt-&gt;pHasContent ){</span>
<span class='curline'><a href='../S/1054.html#L53604'>pBt</a>              53604 ext/sqlite3/libsqlite/sqlite3.c   if( rc==SQLITE_OK &amp;&amp; pgno&lt;=sqlite3BitvecSize(pBt-&gt;pHasContent) ){</span>
<span class='curline'><a href='../S/1054.html#L53605'>pBt</a>              53605 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BitvecSet(pBt-&gt;pHasContent, pgno);</span>
<span class='curline'><a href='../S/1054.html#L53617'>pBt</a>              53617 ext/sqlite3/libsqlite/sqlite3.c static int btreeGetHasContent(BtShared *pBt, Pgno pgno){</span>
<span class='curline'><a href='../S/1054.html#L53618'>pBt</a>              53618 ext/sqlite3/libsqlite/sqlite3.c   Bitvec *p = pBt-&gt;pHasContent;</span>
<span class='curline'><a href='../S/1054.html#L53626'>pBt</a>              53626 ext/sqlite3/libsqlite/sqlite3.c static void btreeClearHasContent(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L53627'>pBt</a>              53627 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BitvecDestroy(pBt-&gt;pHasContent);</span>
<span class='curline'><a href='../S/1054.html#L53628'>pBt</a>              53628 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;pHasContent = 0;</span>
<span class='curline'><a href='../S/1054.html#L53711'>pBt</a>              53711 ext/sqlite3/libsqlite/sqlite3.c static int saveAllCursors(BtShared *pBt, Pgno iRoot, BtCursor *pExcept){</span>
<span class='curline'><a href='../S/1054.html#L53713'>pBt</a>              53713 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L53714'>pBt</a>              53714 ext/sqlite3/libsqlite/sqlite3.c   assert( pExcept==0 || pExcept-&gt;pBt==pBt );</span>
<span class='curline'><a href='../S/1054.html#L53715'>pBt</a>              53715 ext/sqlite3/libsqlite/sqlite3.c   for(p=pBt-&gt;pCursor; p; p=p-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L53888'>pBt</a>              53888 ext/sqlite3/libsqlite/sqlite3.c static Pgno ptrmapPageno(BtShared *pBt, Pgno pgno){</span>
<span class='curline'><a href='../S/1054.html#L53891'>pBt</a>              53891 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L53893'>pBt</a>              53893 ext/sqlite3/libsqlite/sqlite3.c   nPagesPerMapPage = (pBt-&gt;usableSize/5)+1;</span>
<span class='curline'><a href='../S/1054.html#L53896'>pBt</a>              53896 ext/sqlite3/libsqlite/sqlite3.c   if( ret==PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L53912'>pBt</a>              53912 ext/sqlite3/libsqlite/sqlite3.c static void ptrmapPut(BtShared *pBt, Pgno key, u8 eType, Pgno parent, int *pRC){</span>
<span class='curline'><a href='../S/1054.html#L53921'>pBt</a>              53921 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L53923'>pBt</a>              53923 ext/sqlite3/libsqlite/sqlite3.c   assert( 0==PTRMAP_ISPAGE(pBt, PENDING_BYTE_PAGE(pBt)) );</span>
<span class='curline'><a href='../S/1054.html#L53925'>pBt</a>              53925 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;autoVacuum );</span>
<span class='curline'><a href='../S/1054.html#L53930'>pBt</a>              53930 ext/sqlite3/libsqlite/sqlite3.c   iPtrmap = PTRMAP_PAGENO(pBt, key);</span>
<span class='curline'><a href='../S/1054.html#L53931'>pBt</a>              53931 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerGet(pBt-&gt;pPager, iPtrmap, &amp;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L53941'>pBt</a>              53941 ext/sqlite3/libsqlite/sqlite3.c   assert( offset &lt;= (int)pBt-&gt;usableSize-5 );</span>
<span class='curline'><a href='../S/1054.html#L53964'>pBt</a>              53964 ext/sqlite3/libsqlite/sqlite3.c static int ptrmapGet(BtShared *pBt, Pgno key, u8 *pEType, Pgno *pPgno){</span>
<span class='curline'><a href='../S/1054.html#L53971'>pBt</a>              53971 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L53973'>pBt</a>              53973 ext/sqlite3/libsqlite/sqlite3.c   iPtrmap = PTRMAP_PAGENO(pBt, key);</span>
<span class='curline'><a href='../S/1054.html#L53974'>pBt</a>              53974 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerGet(pBt-&gt;pPager, iPtrmap, &amp;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L53985'>pBt</a>              53985 ext/sqlite3/libsqlite/sqlite3.c   assert( offset &lt;= (int)pBt-&gt;usableSize-5 );</span>
<span class='curline'><a href='../S/1054.html#L54019'>pBt</a>              54019 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54047'>pBt</a>              54047 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54094'>pBt</a>              54094 ext/sqlite3/libsqlite/sqlite3.c     surplus = minLocal + (nPayload - minLocal)%(pPage-&gt;pBt-&gt;usableSize - 4);</span>
<span class='curline'><a href='../S/1054.html#L54163'>pBt</a>              54163 ext/sqlite3/libsqlite/sqlite3.c     nSize = minLocal + (nSize - minLocal) % (pPage-&gt;pBt-&gt;usableSize - 4);</span>
<span class='curline'><a href='../S/1054.html#L54196'>pBt</a>              54196 ext/sqlite3/libsqlite/sqlite3.c     ptrmapPut(pPage-&gt;pBt, ovfl, PTRMAP_OVERFLOW1, pPage-&gt;pgno, pRC);</span>
<span class='curline'><a href='../S/1054.html#L54230'>pBt</a>              54230 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L54231'>pBt</a>              54231 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;pBt-&gt;usableSize &lt;= SQLITE_MAX_PAGE_SIZE );</span>
<span class='curline'><a href='../S/1054.html#L54233'>pBt</a>              54233 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54240'>pBt</a>              54240 ext/sqlite3/libsqlite/sqlite3.c   usableSize = pPage-&gt;pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L54277'>pBt</a>              54277 ext/sqlite3/libsqlite/sqlite3.c       temp = sqlite3PagerTempSpace(pPage-&gt;pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L54316'>pBt</a>              54316 ext/sqlite3/libsqlite/sqlite3.c   int usableSize = pPg-&gt;pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L54381'>pBt</a>              54381 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;pBt );</span>
<span class='curline'><a href='../S/1054.html#L54382'>pBt</a>              54382 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54386'>pBt</a>              54386 ext/sqlite3/libsqlite/sqlite3.c   assert( nByte &lt; (int)(pPage-&gt;pBt-&gt;usableSize-8) );</span>
<span class='curline'><a href='../S/1054.html#L54440'>pBt</a>              54440 ext/sqlite3/libsqlite/sqlite3.c   assert( top+nByte &lt;= (int)pPage-&gt;pBt-&gt;usableSize );</span>
<span class='curline'><a href='../S/1054.html#L54464'>pBt</a>              54464 ext/sqlite3/libsqlite/sqlite3.c   u32 iLast = pPage-&gt;pBt-&gt;usableSize-4; /* Largest possible freeblock offset */</span>
<span class='curline'><a href='../S/1054.html#L54468'>pBt</a>              54468 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L54471'>pBt</a>              54471 ext/sqlite3/libsqlite/sqlite3.c   assert( CORRUPT_DB || iEnd &lt;= pPage-&gt;pBt-&gt;usableSize );</span>
<span class='curline'><a href='../S/1054.html#L54472'>pBt</a>              54472 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54478'>pBt</a>              54478 ext/sqlite3/libsqlite/sqlite3.c   if( pPage-&gt;pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE ){</span>
<span class='curline'><a href='../S/1054.html#L54557'>pBt</a>              54557 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;     /* A copy of pPage-&gt;pBt */</span>
<span class='curline'><a href='../S/1054.html#L54560'>pBt</a>              54560 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54564'>pBt</a>              54564 ext/sqlite3/libsqlite/sqlite3.c   pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L54575'>pBt</a>              54575 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;maxLocal = pBt-&gt;maxLeaf;</span>
<span class='curline'><a href='../S/1054.html#L54576'>pBt</a>              54576 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;minLocal = pBt-&gt;minLeaf;</span>
<span class='curline'><a href='../S/1054.html#L54587'>pBt</a>              54587 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;maxLocal = pBt-&gt;maxLocal;</span>
<span class='curline'><a href='../S/1054.html#L54588'>pBt</a>              54588 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;minLocal = pBt-&gt;minLocal;</span>
<span class='curline'><a href='../S/1054.html#L54594'>pBt</a>              54594 ext/sqlite3/libsqlite/sqlite3.c   pPage-&gt;max1bytePayload = pBt-&gt;max1bytePayload;</span>
<span class='curline'><a href='../S/1054.html#L54609'>pBt</a>              54609 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L54610'>pBt</a>              54610 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54619'>pBt</a>              54619 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt;        /* The main btree structure */</span>
<span class='curline'><a href='../S/1054.html#L54627'>pBt</a>              54627 ext/sqlite3/libsqlite/sqlite3.c     pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L54634'>pBt</a>              54634 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt-&gt;pageSize&gt;=512 &amp;&amp; pBt-&gt;pageSize&lt;=65536 );</span>
<span class='curline'><a href='../S/1054.html#L54635'>pBt</a>              54635 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;maskPage = (u16)(pBt-&gt;pageSize - 1);</span>
<span class='curline'><a href='../S/1054.html#L54637'>pBt</a>              54637 ext/sqlite3/libsqlite/sqlite3.c     usableSize = pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L54648'>pBt</a>              54648 ext/sqlite3/libsqlite/sqlite3.c     if( pPage-&gt;nCell&gt;MX_CELL(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L54652'>pBt</a>              54652 ext/sqlite3/libsqlite/sqlite3.c     testcase( pPage-&gt;nCell==MX_CELL(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L54740'>pBt</a>              54740 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L54748'>pBt</a>              54748 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54749'>pBt</a>              54749 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE ){</span>
<span class='curline'><a href='../S/1054.html#L54750'>pBt</a>              54750 ext/sqlite3/libsqlite/sqlite3.c     memset(&amp;data[hdr], 0, pBt-&gt;usableSize - hdr);</span>
<span class='curline'><a href='../S/1054.html#L54756'>pBt</a>              54756 ext/sqlite3/libsqlite/sqlite3.c   put2byte(&amp;data[hdr+5], pBt-&gt;usableSize);</span>
<span class='curline'><a href='../S/1054.html#L54757'>pBt</a>              54757 ext/sqlite3/libsqlite/sqlite3.c   pPage-&gt;nFree = (u16)(pBt-&gt;usableSize - first);</span>
<span class='curline'><a href='../S/1054.html#L54760'>pBt</a>              54760 ext/sqlite3/libsqlite/sqlite3.c   pPage-&gt;aDataEnd = &amp;data[pBt-&gt;usableSize];</span>
<span class='curline'><a href='../S/1054.html#L54763'>pBt</a>              54763 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;pageSize&gt;=512 &amp;&amp; pBt-&gt;pageSize&lt;=65536 );</span>
<span class='curline'><a href='../S/1054.html#L54764'>pBt</a>              54764 ext/sqlite3/libsqlite/sqlite3.c   pPage-&gt;maskPage = (u16)(pBt-&gt;pageSize - 1);</span>
<span class='curline'><a href='../S/1054.html#L54774'>pBt</a>              54774 ext/sqlite3/libsqlite/sqlite3.c static MemPage *btreePageFromDbPage(DbPage *pDbPage, Pgno pgno, BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L54778'>pBt</a>              54778 ext/sqlite3/libsqlite/sqlite3.c   pPage-&gt;pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L54796'>pBt</a>              54796 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,       /* The btree */</span>
<span class='curline'><a href='../S/1054.html#L54805'>pBt</a>              54805 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54806'>pBt</a>              54806 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerAcquire(pBt-&gt;pPager, pgno, (DbPage**)&amp;pDbPage, flags);</span>
<span class='curline'><a href='../S/1054.html#L54808'>pBt</a>              54808 ext/sqlite3/libsqlite/sqlite3.c   *ppPage = btreePageFromDbPage(pDbPage, pgno, pBt);</span>
<span class='curline'><a href='../S/1054.html#L54817'>pBt</a>              54817 ext/sqlite3/libsqlite/sqlite3.c static MemPage *btreePageLookup(BtShared *pBt, Pgno pgno){</span>
<span class='curline'><a href='../S/1054.html#L54819'>pBt</a>              54819 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54820'>pBt</a>              54820 ext/sqlite3/libsqlite/sqlite3.c   pDbPage = sqlite3PagerLookup(pBt-&gt;pPager, pgno);</span>
<span class='curline'><a href='../S/1054.html#L54822'>pBt</a>              54822 ext/sqlite3/libsqlite/sqlite3.c     return btreePageFromDbPage(pDbPage, pgno, pBt);</span>
<span class='curline'><a href='../S/1054.html#L54831'>pBt</a>              54831 ext/sqlite3/libsqlite/sqlite3.c static Pgno btreePagecount(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L54832'>pBt</a>              54832 ext/sqlite3/libsqlite/sqlite3.c   return pBt-&gt;nPage;</span>
<span class='curline'><a href='../S/1054.html#L54836'>pBt</a>              54836 ext/sqlite3/libsqlite/sqlite3.c   assert( ((p-&gt;pBt-&gt;nPage)&amp;0x8000000)==0 );</span>
<span class='curline'><a href='../S/1054.html#L54837'>pBt</a>              54837 ext/sqlite3/libsqlite/sqlite3.c   return btreePagecount(p-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L54849'>pBt</a>              54849 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,                  /* The database file */</span>
<span class='curline'><a href='../S/1054.html#L54855'>pBt</a>              54855 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54858'>pBt</a>              54858 ext/sqlite3/libsqlite/sqlite3.c   if( pgno&gt;btreePagecount(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L54861'>pBt</a>              54861 ext/sqlite3/libsqlite/sqlite3.c     rc = btreeGetPage(pBt, pgno, ppPage, bReadonly);</span>
<span class='curline'><a href='../S/1054.html#L54882'>pBt</a>              54882 ext/sqlite3/libsqlite/sqlite3.c     assert( pPage-&gt;pBt );</span>
<span class='curline'><a href='../S/1054.html#L54886'>pBt</a>              54886 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54904'>pBt</a>              54904 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54922'>pBt</a>              54922 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = (BtShared*)pArg;</span>
<span class='curline'><a href='../S/1054.html#L54923'>pBt</a>              54923 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;db );</span>
<span class='curline'><a href='../S/1054.html#L54924'>pBt</a>              54924 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;db-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L54925'>pBt</a>              54925 ext/sqlite3/libsqlite/sqlite3.c   return sqlite3InvokeBusyHandler(&amp;pBt-&gt;db-&gt;busyHandler);</span>
<span class='curline'><a href='../S/1054.html#L54957'>pBt</a>              54957 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = 0;             /* Shared part of btree structure */</span>
<span class='curline'><a href='../S/1054.html#L55040'>pBt</a>              55040 ext/sqlite3/libsqlite/sqlite3.c       for(pBt=GLOBAL(BtShared*,sqlite3SharedCacheList); pBt; pBt=pBt-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L55041'>pBt</a>              55041 ext/sqlite3/libsqlite/sqlite3.c         assert( pBt-&gt;nRef&gt;0 );</span>
<span class='curline'><a href='../S/1054.html#L55042'>pBt</a>              55042 ext/sqlite3/libsqlite/sqlite3.c         if( 0==strcmp(zFullPathname, sqlite3PagerFilename(pBt-&gt;pPager, 0))</span>
<span class='curline'><a href='../S/1054.html#L55043'>pBt</a>              55043 ext/sqlite3/libsqlite/sqlite3.c                  &amp;&amp; sqlite3PagerVfs(pBt-&gt;pPager)==pVfs ){</span>
<span class='curline'><a href='../S/1054.html#L55046'>pBt</a>              55046 ext/sqlite3/libsqlite/sqlite3.c             Btree *pExisting = db-&gt;aDb[iDb].pBt;</span>
<span class='curline'><a href='../S/1054.html#L55047'>pBt</a>              55047 ext/sqlite3/libsqlite/sqlite3.c             if( pExisting &amp;&amp; pExisting-&gt;pBt==pBt ){</span>
<span class='curline'><a href='../S/1054.html#L55055'>pBt</a>              55055 ext/sqlite3/libsqlite/sqlite3.c           p-&gt;pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L55056'>pBt</a>              55056 ext/sqlite3/libsqlite/sqlite3.c           pBt-&gt;nRef++;</span>
<span class='curline'><a href='../S/1054.html#L55075'>pBt</a>              55075 ext/sqlite3/libsqlite/sqlite3.c   if( pBt==0 ){</span>
<span class='curline'><a href='../S/1054.html#L55087'>pBt</a>              55087 ext/sqlite3/libsqlite/sqlite3.c     pBt = sqlite3MallocZero( sizeof(*pBt) );</span>
<span class='curline'><a href='../S/1054.html#L55088'>pBt</a>              55088 ext/sqlite3/libsqlite/sqlite3.c     if( pBt==0 ){</span>
<span class='curline'><a href='../S/1054.html#L55092'>pBt</a>              55092 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerOpen(pVfs, &amp;pBt-&gt;pPager, zFilename,</span>
<span class='curline'><a href='../S/1054.html#L55095'>pBt</a>              55095 ext/sqlite3/libsqlite/sqlite3.c       sqlite3PagerSetMmapLimit(pBt-&gt;pPager, db-&gt;szMmap);</span>
<span class='curline'><a href='../S/1054.html#L55096'>pBt</a>              55096 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerReadFileheader(pBt-&gt;pPager,sizeof(zDbHeader),zDbHeader);</span>
<span class='curline'><a href='../S/1054.html#L55101'>pBt</a>              55101 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;openFlags = (u8)flags;</span>
<span class='curline'><a href='../S/1054.html#L55102'>pBt</a>              55102 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;db = db;</span>
<span class='curline'><a href='../S/1054.html#L55103'>pBt</a>              55103 ext/sqlite3/libsqlite/sqlite3.c     sqlite3PagerSetBusyhandler(pBt-&gt;pPager, btreeInvokeBusyHandler, pBt);</span>
<span class='curline'><a href='../S/1054.html#L55104'>pBt</a>              55104 ext/sqlite3/libsqlite/sqlite3.c     p-&gt;pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L55106'>pBt</a>              55106 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pCursor = 0;</span>
<span class='curline'><a href='../S/1054.html#L55107'>pBt</a>              55107 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pPage1 = 0;</span>
<span class='curline'><a href='../S/1054.html#L55108'>pBt</a>              55108 ext/sqlite3/libsqlite/sqlite3.c     if( sqlite3PagerIsreadonly(pBt-&gt;pPager) ) pBt-&gt;btsFlags |= BTS_READ_ONLY;</span>
<span class='curline'><a href='../S/1054.html#L55110'>pBt</a>              55110 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;btsFlags |= BTS_SECURE_DELETE;</span>
<span class='curline'><a href='../S/1054.html#L55115'>pBt</a>              55115 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pageSize = (zDbHeader[16]&lt;&lt;8) | (zDbHeader[17]&lt;&lt;16);</span>
<span class='curline'><a href='../S/1054.html#L55116'>pBt</a>              55116 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;pageSize&lt;512 || pBt-&gt;pageSize&gt;SQLITE_MAX_PAGE_SIZE</span>
<span class='curline'><a href='../S/1054.html#L55117'>pBt</a>              55117 ext/sqlite3/libsqlite/sqlite3.c          || ((pBt-&gt;pageSize-1)&amp;pBt-&gt;pageSize)!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L55118'>pBt</a>              55118 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pageSize = 0;</span>
<span class='curline'><a href='../S/1054.html#L55127'>pBt</a>              55127 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;autoVacuum = (SQLITE_DEFAULT_AUTOVACUUM ? 1 : 0);</span>
<span class='curline'><a href='../S/1054.html#L55128'>pBt</a>              55128 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;incrVacuum = (SQLITE_DEFAULT_AUTOVACUUM==2 ? 1 : 0);</span>
<span class='curline'><a href='../S/1054.html#L55137'>pBt</a>              55137 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;btsFlags |= BTS_PAGESIZE_FIXED;</span>
<span class='curline'><a href='../S/1054.html#L55139'>pBt</a>              55139 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;autoVacuum = (get4byte(&amp;zDbHeader[36 + 4*4])?1:0);</span>
<span class='curline'><a href='../S/1054.html#L55140'>pBt</a>              55140 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;incrVacuum = (get4byte(&amp;zDbHeader[36 + 7*4])?1:0);</span>
<span class='curline'><a href='../S/1054.html#L55143'>pBt</a>              55143 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerSetPagesize(pBt-&gt;pPager, &amp;pBt-&gt;pageSize, nReserve);</span>
<span class='curline'><a href='../S/1054.html#L55145'>pBt</a>              55145 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;usableSize = pBt-&gt;pageSize - nReserve;</span>
<span class='curline'><a href='../S/1054.html#L55146'>pBt</a>              55146 ext/sqlite3/libsqlite/sqlite3.c     assert( (pBt-&gt;pageSize &amp; 7)==0 );  /* 8-byte alignment of pageSize */</span>
<span class='curline'><a href='../S/1054.html#L55153'>pBt</a>              55153 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nRef = 1;</span>
<span class='curline'><a href='../S/1054.html#L55156'>pBt</a>              55156 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;mutex = sqlite3MutexAlloc(SQLITE_MUTEX_FAST);</span>
<span class='curline'><a href='../S/1054.html#L55157'>pBt</a>              55157 ext/sqlite3/libsqlite/sqlite3.c         if( pBt-&gt;mutex==0 ){</span>
<span class='curline'><a href='../S/1054.html#L55164'>pBt</a>              55164 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pNext = GLOBAL(BtShared*,sqlite3SharedCacheList);</span>
<span class='curline'><a href='../S/1054.html#L55165'>pBt</a>              55165 ext/sqlite3/libsqlite/sqlite3.c       GLOBAL(BtShared*,sqlite3SharedCacheList) = pBt;</span>
<span class='curline'><a href='../S/1054.html#L55180'>pBt</a>              55180 ext/sqlite3/libsqlite/sqlite3.c       if( (pSib = db-&gt;aDb[i].pBt)!=0 &amp;&amp; pSib-&gt;sharable ){</span>
<span class='curline'><a href='../S/1054.html#L55182'>pBt</a>              55182 ext/sqlite3/libsqlite/sqlite3.c         if( p-&gt;pBt&lt;pSib-&gt;pBt ){</span>
<span class='curline'><a href='../S/1054.html#L55187'>pBt</a>              55187 ext/sqlite3/libsqlite/sqlite3.c           while( pSib-&gt;pNext &amp;&amp; pSib-&gt;pNext-&gt;pBt&lt;p-&gt;pBt ){</span>
<span class='curline'><a href='../S/1054.html#L55206'>pBt</a>              55206 ext/sqlite3/libsqlite/sqlite3.c     if( pBt &amp;&amp; pBt-&gt;pPager ){</span>
<span class='curline'><a href='../S/1054.html#L55207'>pBt</a>              55207 ext/sqlite3/libsqlite/sqlite3.c       sqlite3PagerClose(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L55209'>pBt</a>              55209 ext/sqlite3/libsqlite/sqlite3.c     sqlite3_free(pBt);</span>
<span class='curline'><a href='../S/1054.html#L55218'>pBt</a>              55218 ext/sqlite3/libsqlite/sqlite3.c       sqlite3PagerSetCachesize(p-&gt;pBt-&gt;pPager, SQLITE_DEFAULT_CACHE_SIZE);</span>
<span class='curline'><a href='../S/1054.html#L55234'>pBt</a>              55234 ext/sqlite3/libsqlite/sqlite3.c static int removeFromSharingList(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55240'>pBt</a>              55240 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_notheld(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L55243'>pBt</a>              55243 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;nRef--;</span>
<span class='curline'><a href='../S/1054.html#L55244'>pBt</a>              55244 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;nRef&lt;=0 ){</span>
<span class='curline'><a href='../S/1054.html#L55245'>pBt</a>              55245 ext/sqlite3/libsqlite/sqlite3.c     if( GLOBAL(BtShared*,sqlite3SharedCacheList)==pBt ){</span>
<span class='curline'><a href='../S/1054.html#L55246'>pBt</a>              55246 ext/sqlite3/libsqlite/sqlite3.c       GLOBAL(BtShared*,sqlite3SharedCacheList) = pBt-&gt;pNext;</span>
<span class='curline'><a href='../S/1054.html#L55249'>pBt</a>              55249 ext/sqlite3/libsqlite/sqlite3.c       while( ALWAYS(pList) &amp;&amp; pList-&gt;pNext!=pBt ){</span>
<span class='curline'><a href='../S/1054.html#L55253'>pBt</a>              55253 ext/sqlite3/libsqlite/sqlite3.c         pList-&gt;pNext = pBt-&gt;pNext;</span>
<span class='curline'><a href='../S/1054.html#L55257'>pBt</a>              55257 ext/sqlite3/libsqlite/sqlite3.c       sqlite3_mutex_free(pBt-&gt;mutex);</span>
<span class='curline'><a href='../S/1054.html#L55273'>pBt</a>              55273 ext/sqlite3/libsqlite/sqlite3.c static void allocateTempSpace(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55274'>pBt</a>              55274 ext/sqlite3/libsqlite/sqlite3.c   if( !pBt-&gt;pTmpSpace ){</span>
<span class='curline'><a href='../S/1054.html#L55275'>pBt</a>              55275 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pTmpSpace = sqlite3PageMalloc( pBt-&gt;pageSize );</span>
<span class='curline'><a href='../S/1054.html#L55292'>pBt</a>              55292 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;pTmpSpace ){</span>
<span class='curline'><a href='../S/1054.html#L55293'>pBt</a>              55293 ext/sqlite3/libsqlite/sqlite3.c       memset(pBt-&gt;pTmpSpace, 0, 8);</span>
<span class='curline'><a href='../S/1054.html#L55294'>pBt</a>              55294 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pTmpSpace += 4;</span>
<span class='curline'><a href='../S/1054.html#L55302'>pBt</a>              55302 ext/sqlite3/libsqlite/sqlite3.c static void freeTempSpace(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55303'>pBt</a>              55303 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;pTmpSpace ){</span>
<span class='curline'><a href='../S/1054.html#L55304'>pBt</a>              55304 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pTmpSpace -= 4;</span>
<span class='curline'><a href='../S/1054.html#L55305'>pBt</a>              55305 ext/sqlite3/libsqlite/sqlite3.c     sqlite3PageFree(pBt-&gt;pTmpSpace);</span>
<span class='curline'><a href='../S/1054.html#L55306'>pBt</a>              55306 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pTmpSpace = 0;</span>
<span class='curline'><a href='../S/1054.html#L55314'>pBt</a>              55314 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55320'>pBt</a>              55320 ext/sqlite3/libsqlite/sqlite3.c   pCur = pBt-&gt;pCursor;</span>
<span class='curline'><a href='../S/1054.html#L55341'>pBt</a>              55341 ext/sqlite3/libsqlite/sqlite3.c   if( !p-&gt;sharable || removeFromSharingList(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L55347'>pBt</a>              55347 ext/sqlite3/libsqlite/sqlite3.c     assert( !pBt-&gt;pCursor );</span>
<span class='curline'><a href='../S/1054.html#L55348'>pBt</a>              55348 ext/sqlite3/libsqlite/sqlite3.c     sqlite3PagerClose(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L55349'>pBt</a>              55349 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;xFreeSchema &amp;&amp; pBt-&gt;pSchema ){</span>
<span class='curline'><a href='../S/1054.html#L55350'>pBt</a>              55350 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;xFreeSchema(pBt-&gt;pSchema);</span>
<span class='curline'><a href='../S/1054.html#L55352'>pBt</a>              55352 ext/sqlite3/libsqlite/sqlite3.c     sqlite3DbFree(0, pBt-&gt;pSchema);</span>
<span class='curline'><a href='../S/1054.html#L55353'>pBt</a>              55353 ext/sqlite3/libsqlite/sqlite3.c     freeTempSpace(pBt);</span>
<span class='curline'><a href='../S/1054.html#L55354'>pBt</a>              55354 ext/sqlite3/libsqlite/sqlite3.c     sqlite3_free(pBt);</span>
<span class='curline'><a href='../S/1054.html#L55384'>pBt</a>              55384 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55387'>pBt</a>              55387 ext/sqlite3/libsqlite/sqlite3.c   sqlite3PagerSetCachesize(pBt-&gt;pPager, mxPage);</span>
<span class='curline'><a href='../S/1054.html#L55398'>pBt</a>              55398 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55401'>pBt</a>              55401 ext/sqlite3/libsqlite/sqlite3.c   sqlite3PagerSetMmapLimit(pBt-&gt;pPager, szMmap);</span>
<span class='curline'><a href='../S/1054.html#L55420'>pBt</a>              55420 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55423'>pBt</a>              55423 ext/sqlite3/libsqlite/sqlite3.c   sqlite3PagerSetFlags(pBt-&gt;pPager, pgFlags);</span>
<span class='curline'><a href='../S/1054.html#L55434'>pBt</a>              55434 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55438'>pBt</a>              55438 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt &amp;&amp; pBt-&gt;pPager );</span>
<span class='curline'><a href='../S/1054.html#L55439'>pBt</a>              55439 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerNosync(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L55466'>pBt</a>              55466 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55470'>pBt</a>              55470 ext/sqlite3/libsqlite/sqlite3.c   if( nReserve&gt;pBt-&gt;optimalReserve ) pBt-&gt;optimalReserve = (u8)nReserve;</span>
<span class='curline'><a href='../S/1054.html#L55472'>pBt</a>              55472 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;btsFlags &amp; BTS_PAGESIZE_FIXED ){</span>
<span class='curline'><a href='../S/1054.html#L55477'>pBt</a>              55477 ext/sqlite3/libsqlite/sqlite3.c     nReserve = pBt-&gt;pageSize - pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L55483'>pBt</a>              55483 ext/sqlite3/libsqlite/sqlite3.c     assert( !pBt-&gt;pCursor );</span>
<span class='curline'><a href='../S/1054.html#L55484'>pBt</a>              55484 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pageSize = (u32)pageSize;</span>
<span class='curline'><a href='../S/1054.html#L55485'>pBt</a>              55485 ext/sqlite3/libsqlite/sqlite3.c     freeTempSpace(pBt);</span>
<span class='curline'><a href='../S/1054.html#L55487'>pBt</a>              55487 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerSetPagesize(pBt-&gt;pPager, &amp;pBt-&gt;pageSize, nReserve);</span>
<span class='curline'><a href='../S/1054.html#L55488'>pBt</a>              55488 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;usableSize = pBt-&gt;pageSize - (u16)nReserve;</span>
<span class='curline'><a href='../S/1054.html#L55489'>pBt</a>              55489 ext/sqlite3/libsqlite/sqlite3.c   if( iFix ) pBt-&gt;btsFlags |= BTS_PAGESIZE_FIXED;</span>
<span class='curline'><a href='../S/1054.html#L55498'>pBt</a>              55498 ext/sqlite3/libsqlite/sqlite3.c   return p-&gt;pBt-&gt;pageSize;</span>
<span class='curline'><a href='../S/1054.html#L55514'>pBt</a>              55514 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(p-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L55515'>pBt</a>              55515 ext/sqlite3/libsqlite/sqlite3.c   n = p-&gt;pBt-&gt;pageSize - p-&gt;pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L55533'>pBt</a>              55533 ext/sqlite3/libsqlite/sqlite3.c   if( n&lt;p-&gt;pBt-&gt;optimalReserve ) n = p-&gt;pBt-&gt;optimalReserve;</span>
<span class='curline'><a href='../S/1054.html#L55548'>pBt</a>              55548 ext/sqlite3/libsqlite/sqlite3.c   n = sqlite3PagerMaxPageCount(p-&gt;pBt-&gt;pPager, mxPage);</span>
<span class='curline'><a href='../S/1054.html#L55563'>pBt</a>              55563 ext/sqlite3/libsqlite/sqlite3.c     p-&gt;pBt-&gt;btsFlags &amp;= ~BTS_SECURE_DELETE;</span>
<span class='curline'><a href='../S/1054.html#L55564'>pBt</a>              55564 ext/sqlite3/libsqlite/sqlite3.c     if( newFlag ) p-&gt;pBt-&gt;btsFlags |= BTS_SECURE_DELETE;</span>
<span class='curline'><a href='../S/1054.html#L55566'>pBt</a>              55566 ext/sqlite3/libsqlite/sqlite3.c   b = (p-&gt;pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE)!=0;</span>
<span class='curline'><a href='../S/1054.html#L55581'>pBt</a>              55581 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55586'>pBt</a>              55586 ext/sqlite3/libsqlite/sqlite3.c   if( (pBt-&gt;btsFlags &amp; BTS_PAGESIZE_FIXED)!=0 &amp;&amp; (av ?1:0)!=pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L55589'>pBt</a>              55589 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;autoVacuum = av ?1:0;</span>
<span class='curline'><a href='../S/1054.html#L55590'>pBt</a>              55590 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;incrVacuum = av==2 ?1:0;</span>
<span class='curline'><a href='../S/1054.html#L55608'>pBt</a>              55608 ext/sqlite3/libsqlite/sqlite3.c     (!p-&gt;pBt-&gt;autoVacuum)?BTREE_AUTOVACUUM_NONE:</span>
<span class='curline'><a href='../S/1054.html#L55609'>pBt</a>              55609 ext/sqlite3/libsqlite/sqlite3.c     (!p-&gt;pBt-&gt;incrVacuum)?BTREE_AUTOVACUUM_FULL:</span>
<span class='curline'><a href='../S/1054.html#L55627'>pBt</a>              55627 ext/sqlite3/libsqlite/sqlite3.c static int lockBtree(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55634'>pBt</a>              55634 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L55635'>pBt</a>              55635 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;pPage1==0 );</span>
<span class='curline'><a href='../S/1054.html#L55636'>pBt</a>              55636 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerSharedLock(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L55638'>pBt</a>              55638 ext/sqlite3/libsqlite/sqlite3.c   rc = btreeGetPage(pBt, 1, &amp;pPage1, 0);</span>
<span class='curline'><a href='../S/1054.html#L55645'>pBt</a>              55645 ext/sqlite3/libsqlite/sqlite3.c   sqlite3PagerPagecount(pBt-&gt;pPager, &amp;nPageFile);</span>
<span class='curline'><a href='../S/1054.html#L55663'>pBt</a>              55663 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;btsFlags |= BTS_READ_ONLY;</span>
<span class='curline'><a href='../S/1054.html#L55670'>pBt</a>              55670 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;btsFlags |= BTS_READ_ONLY;</span>
<span class='curline'><a href='../S/1054.html#L55684'>pBt</a>              55684 ext/sqlite3/libsqlite/sqlite3.c     if( page1[19]==2 &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_NO_WAL)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L55686'>pBt</a>              55686 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerOpenWal(pBt-&gt;pPager, &amp;isOpen);</span>
<span class='curline'><a href='../S/1054.html#L55727'>pBt</a>              55727 ext/sqlite3/libsqlite/sqlite3.c     if( (u32)pageSize!=pBt-&gt;pageSize ){</span>
<span class='curline'><a href='../S/1054.html#L55735'>pBt</a>              55735 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;usableSize = usableSize;</span>
<span class='curline'><a href='../S/1054.html#L55736'>pBt</a>              55736 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pageSize = pageSize;</span>
<span class='curline'><a href='../S/1054.html#L55737'>pBt</a>              55737 ext/sqlite3/libsqlite/sqlite3.c       freeTempSpace(pBt);</span>
<span class='curline'><a href='../S/1054.html#L55738'>pBt</a>              55738 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerSetPagesize(pBt-&gt;pPager, &amp;pBt-&gt;pageSize,</span>
<span class='curline'><a href='../S/1054.html#L55742'>pBt</a>              55742 ext/sqlite3/libsqlite/sqlite3.c     if( (pBt-&gt;db-&gt;flags &amp; SQLITE_RecoveryMode)==0 &amp;&amp; nPage&gt;nPageFile ){</span>
<span class='curline'><a href='../S/1054.html#L55752'>pBt</a>              55752 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pageSize = pageSize;</span>
<span class='curline'><a href='../S/1054.html#L55753'>pBt</a>              55753 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;usableSize = usableSize;</span>
<span class='curline'><a href='../S/1054.html#L55755'>pBt</a>              55755 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;autoVacuum = (get4byte(&amp;page1[36 + 4*4])?1:0);</span>
<span class='curline'><a href='../S/1054.html#L55756'>pBt</a>              55756 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;incrVacuum = (get4byte(&amp;page1[36 + 7*4])?1:0);</span>
<span class='curline'><a href='../S/1054.html#L55773'>pBt</a>              55773 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;maxLocal = (u16)((pBt-&gt;usableSize-12)*64/255 - 23);</span>
<span class='curline'><a href='../S/1054.html#L55774'>pBt</a>              55774 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;minLocal = (u16)((pBt-&gt;usableSize-12)*32/255 - 23);</span>
<span class='curline'><a href='../S/1054.html#L55775'>pBt</a>              55775 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;maxLeaf = (u16)(pBt-&gt;usableSize - 35);</span>
<span class='curline'><a href='../S/1054.html#L55776'>pBt</a>              55776 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;minLeaf = (u16)((pBt-&gt;usableSize-12)*32/255 - 23);</span>
<span class='curline'><a href='../S/1054.html#L55777'>pBt</a>              55777 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;maxLocal&gt;127 ){</span>
<span class='curline'><a href='../S/1054.html#L55778'>pBt</a>              55778 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;max1bytePayload = 127;</span>
<span class='curline'><a href='../S/1054.html#L55780'>pBt</a>              55780 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;max1bytePayload = (u8)pBt-&gt;maxLocal;</span>
<span class='curline'><a href='../S/1054.html#L55782'>pBt</a>              55782 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;maxLeaf + 23 &lt;= MX_CELL_SIZE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L55783'>pBt</a>              55783 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;pPage1 = pPage1;</span>
<span class='curline'><a href='../S/1054.html#L55784'>pBt</a>              55784 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;nPage = nPage;</span>
<span class='curline'><a href='../S/1054.html#L55789'>pBt</a>              55789 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;pPage1 = 0;</span>
<span class='curline'><a href='../S/1054.html#L55806'>pBt</a>              55806 ext/sqlite3/libsqlite/sqlite3.c static int countValidCursors(BtShared *pBt, int wrOnly){</span>
<span class='curline'><a href='../S/1054.html#L55809'>pBt</a>              55809 ext/sqlite3/libsqlite/sqlite3.c   for(pCur=pBt-&gt;pCursor; pCur; pCur=pCur-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L55825'>pBt</a>              55825 ext/sqlite3/libsqlite/sqlite3.c static void unlockBtreeIfUnused(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55826'>pBt</a>              55826 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L55827'>pBt</a>              55827 ext/sqlite3/libsqlite/sqlite3.c   assert( countValidCursors(pBt,0)==0 || pBt-&gt;inTransaction&gt;TRANS_NONE );</span>
<span class='curline'><a href='../S/1054.html#L55828'>pBt</a>              55828 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;inTransaction==TRANS_NONE &amp;&amp; pBt-&gt;pPage1!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L55829'>pBt</a>              55829 ext/sqlite3/libsqlite/sqlite3.c     MemPage *pPage1 = pBt-&gt;pPage1;</span>
<span class='curline'><a href='../S/1054.html#L55831'>pBt</a>              55831 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3PagerRefcount(pBt-&gt;pPager)==1 );</span>
<span class='curline'><a href='../S/1054.html#L55832'>pBt</a>              55832 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pPage1 = 0;</span>
<span class='curline'><a href='../S/1054.html#L55842'>pBt</a>              55842 ext/sqlite3/libsqlite/sqlite3.c static int newDatabase(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L55847'>pBt</a>              55847 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L55848'>pBt</a>              55848 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;nPage&gt;0 ){</span>
<span class='curline'><a href='../S/1054.html#L55851'>pBt</a>              55851 ext/sqlite3/libsqlite/sqlite3.c   pP1 = pBt-&gt;pPage1;</span>
<span class='curline'><a href='../S/1054.html#L55858'>pBt</a>              55858 ext/sqlite3/libsqlite/sqlite3.c   data[16] = (u8)((pBt-&gt;pageSize&gt;&gt;8)&amp;0xff);</span>
<span class='curline'><a href='../S/1054.html#L55859'>pBt</a>              55859 ext/sqlite3/libsqlite/sqlite3.c   data[17] = (u8)((pBt-&gt;pageSize&gt;&gt;16)&amp;0xff);</span>
<span class='curline'><a href='../S/1054.html#L55862'>pBt</a>              55862 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;usableSize&lt;=pBt-&gt;pageSize &amp;&amp; pBt-&gt;usableSize+255&gt;=pBt-&gt;pageSize);</span>
<span class='curline'><a href='../S/1054.html#L55863'>pBt</a>              55863 ext/sqlite3/libsqlite/sqlite3.c   data[20] = (u8)(pBt-&gt;pageSize - pBt-&gt;usableSize);</span>
<span class='curline'><a href='../S/1054.html#L55869'>pBt</a>              55869 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;btsFlags |= BTS_PAGESIZE_FIXED;</span>
<span class='curline'><a href='../S/1054.html#L55871'>pBt</a>              55871 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;autoVacuum==1 || pBt-&gt;autoVacuum==0 );</span>
<span class='curline'><a href='../S/1054.html#L55872'>pBt</a>              55872 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;incrVacuum==1 || pBt-&gt;incrVacuum==0 );</span>
<span class='curline'><a href='../S/1054.html#L55873'>pBt</a>              55873 ext/sqlite3/libsqlite/sqlite3.c   put4byte(&amp;data[36 + 4*4], pBt-&gt;autoVacuum);</span>
<span class='curline'><a href='../S/1054.html#L55874'>pBt</a>              55874 ext/sqlite3/libsqlite/sqlite3.c   put4byte(&amp;data[36 + 7*4], pBt-&gt;incrVacuum);</span>
<span class='curline'><a href='../S/1054.html#L55876'>pBt</a>              55876 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;nPage = 1;</span>
<span class='curline'><a href='../S/1054.html#L55889'>pBt</a>              55889 ext/sqlite3/libsqlite/sqlite3.c   p-&gt;pBt-&gt;nPage = 0;</span>
<span class='curline'><a href='../S/1054.html#L55890'>pBt</a>              55890 ext/sqlite3/libsqlite/sqlite3.c   rc = newDatabase(p-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L55932'>pBt</a>              55932 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L55945'>pBt</a>              55945 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;inTransaction==TRANS_WRITE || IfNotOmitAV(pBt-&gt;bDoTruncate)==0 );</span>
<span class='curline'><a href='../S/1054.html#L55948'>pBt</a>              55948 ext/sqlite3/libsqlite/sqlite3.c   if( (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)!=0 &amp;&amp; wrflag ){</span>
<span class='curline'><a href='../S/1054.html#L55958'>pBt</a>              55958 ext/sqlite3/libsqlite/sqlite3.c   if( (wrflag &amp;&amp; pBt-&gt;inTransaction==TRANS_WRITE)</span>
<span class='curline'><a href='../S/1054.html#L55959'>pBt</a>              55959 ext/sqlite3/libsqlite/sqlite3.c    || (pBt-&gt;btsFlags &amp; BTS_PENDING)!=0</span>
<span class='curline'><a href='../S/1054.html#L55961'>pBt</a>              55961 ext/sqlite3/libsqlite/sqlite3.c     pBlock = pBt-&gt;pWriter-&gt;db;</span>
<span class='curline'><a href='../S/1054.html#L55964'>pBt</a>              55964 ext/sqlite3/libsqlite/sqlite3.c     for(pIter=pBt-&gt;pLock; pIter; pIter=pIter-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L55984'>pBt</a>              55984 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;btsFlags &amp;= ~BTS_INITIALLY_EMPTY;</span>
<span class='curline'><a href='../S/1054.html#L55985'>pBt</a>              55985 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;nPage==0 ) pBt-&gt;btsFlags |= BTS_INITIALLY_EMPTY;</span>
<span class='curline'><a href='../S/1054.html#L55994'>pBt</a>              55994 ext/sqlite3/libsqlite/sqlite3.c     while( pBt-&gt;pPage1==0 &amp;&amp; SQLITE_OK==(rc = lockBtree(pBt)) );</span>
<span class='curline'><a href='../S/1054.html#L55997'>pBt</a>              55997 ext/sqlite3/libsqlite/sqlite3.c       if( (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L56000'>pBt</a>              56000 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3PagerBegin(pBt-&gt;pPager,wrflag&gt;1,sqlite3TempInMemory(p-&gt;db));</span>
<span class='curline'><a href='../S/1054.html#L56002'>pBt</a>              56002 ext/sqlite3/libsqlite/sqlite3.c           rc = newDatabase(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56008'>pBt</a>              56008 ext/sqlite3/libsqlite/sqlite3.c       unlockBtreeIfUnused(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56010'>pBt</a>              56010 ext/sqlite3/libsqlite/sqlite3.c   }while( (rc&amp;0xFF)==SQLITE_BUSY &amp;&amp; pBt-&gt;inTransaction==TRANS_NONE &amp;&amp;</span>
<span class='curline'><a href='../S/1054.html#L56011'>pBt</a>              56011 ext/sqlite3/libsqlite/sqlite3.c           btreeInvokeBusyHandler(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L56015'>pBt</a>              56015 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nTransaction++;</span>
<span class='curline'><a href='../S/1054.html#L56020'>pBt</a>              56020 ext/sqlite3/libsqlite/sqlite3.c         p-&gt;lock.pNext = pBt-&gt;pLock;</span>
<span class='curline'><a href='../S/1054.html#L56021'>pBt</a>              56021 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;pLock = &amp;p-&gt;lock;</span>
<span class='curline'><a href='../S/1054.html#L56026'>pBt</a>              56026 ext/sqlite3/libsqlite/sqlite3.c     if( p-&gt;inTrans&gt;pBt-&gt;inTransaction ){</span>
<span class='curline'><a href='../S/1054.html#L56027'>pBt</a>              56027 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;inTransaction = p-&gt;inTrans;</span>
<span class='curline'><a href='../S/1054.html#L56030'>pBt</a>              56030 ext/sqlite3/libsqlite/sqlite3.c       MemPage *pPage1 = pBt-&gt;pPage1;</span>
<span class='curline'><a href='../S/1054.html#L56032'>pBt</a>              56032 ext/sqlite3/libsqlite/sqlite3.c       assert( !pBt-&gt;pWriter );</span>
<span class='curline'><a href='../S/1054.html#L56033'>pBt</a>              56033 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pWriter = p;</span>
<span class='curline'><a href='../S/1054.html#L56034'>pBt</a>              56034 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;btsFlags &amp;= ~BTS_EXCLUSIVE;</span>
<span class='curline'><a href='../S/1054.html#L56035'>pBt</a>              56035 ext/sqlite3/libsqlite/sqlite3.c       if( wrflag&gt;1 ) pBt-&gt;btsFlags |= BTS_EXCLUSIVE;</span>
<span class='curline'><a href='../S/1054.html#L56044'>pBt</a>              56044 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;nPage!=get4byte(&amp;pPage1-&gt;aData[28]) ){</span>
<span class='curline'><a href='../S/1054.html#L56047'>pBt</a>              56047 ext/sqlite3/libsqlite/sqlite3.c           put4byte(&amp;pPage1-&gt;aData[28], pBt-&gt;nPage);</span>
<span class='curline'><a href='../S/1054.html#L56060'>pBt</a>              56060 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerOpenSavepoint(pBt-&gt;pPager, p-&gt;db-&gt;nSavepoint);</span>
<span class='curline'><a href='../S/1054.html#L56079'>pBt</a>              56079 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56083'>pBt</a>              56083 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L56097'>pBt</a>              56097 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, childPgno, PTRMAP_BTREE, pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L56103'>pBt</a>              56103 ext/sqlite3/libsqlite/sqlite3.c     ptrmapPut(pBt, childPgno, PTRMAP_BTREE, pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L56126'>pBt</a>              56126 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L56186'>pBt</a>              56186 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,           /* Btree */</span>
<span class='curline'><a href='../S/1054.html#L56195'>pBt</a>              56195 ext/sqlite3/libsqlite/sqlite3.c   Pager *pPager = pBt-&gt;pPager;</span>
<span class='curline'><a href='../S/1054.html#L56200'>pBt</a>              56200 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L56201'>pBt</a>              56201 ext/sqlite3/libsqlite/sqlite3.c   assert( pDbPage-&gt;pBt==pBt );</span>
<span class='curline'><a href='../S/1054.html#L56228'>pBt</a>              56228 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, nextOvfl, PTRMAP_OVERFLOW2, iFreePage, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L56240'>pBt</a>              56240 ext/sqlite3/libsqlite/sqlite3.c     rc = btreeGetPage(pBt, iPtrPage, &amp;pPtrPage, 0);</span>
<span class='curline'><a href='../S/1054.html#L56252'>pBt</a>              56252 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, iFreePage, eType, iPtrPage, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L56278'>pBt</a>              56278 ext/sqlite3/libsqlite/sqlite3.c static int incrVacuumStep(BtShared *pBt, Pgno nFin, Pgno iLastPg, int bCommit){</span>
<span class='curline'><a href='../S/1054.html#L56282'>pBt</a>              56282 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L56285'>pBt</a>              56285 ext/sqlite3/libsqlite/sqlite3.c   if( !PTRMAP_ISPAGE(pBt, iLastPg) &amp;&amp; iLastPg!=PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L56289'>pBt</a>              56289 ext/sqlite3/libsqlite/sqlite3.c     nFreeList = get4byte(&amp;pBt-&gt;pPage1-&gt;aData[36]);</span>
<span class='curline'><a href='../S/1054.html#L56294'>pBt</a>              56294 ext/sqlite3/libsqlite/sqlite3.c     rc = ptrmapGet(pBt, iLastPg, &amp;eType, &amp;iPtrPage);</span>
<span class='curline'><a href='../S/1054.html#L56311'>pBt</a>              56311 ext/sqlite3/libsqlite/sqlite3.c         rc = allocateBtreePage(pBt, &amp;pFreePg, &amp;iFreePg, iLastPg, BTALLOC_EXACT);</span>
<span class='curline'><a href='../S/1054.html#L56324'>pBt</a>              56324 ext/sqlite3/libsqlite/sqlite3.c       rc = btreeGetPage(pBt, iLastPg, &amp;pLastPg, 0);</span>
<span class='curline'><a href='../S/1054.html#L56342'>pBt</a>              56342 ext/sqlite3/libsqlite/sqlite3.c         rc = allocateBtreePage(pBt, &amp;pFreePg, &amp;iFreePg, iNear, eMode);</span>
<span class='curline'><a href='../S/1054.html#L56351'>pBt</a>              56351 ext/sqlite3/libsqlite/sqlite3.c       rc = relocatePage(pBt, pLastPg, eType, iPtrPage, iFreePg, bCommit);</span>
<span class='curline'><a href='../S/1054.html#L56362'>pBt</a>              56362 ext/sqlite3/libsqlite/sqlite3.c     }while( iLastPg==PENDING_BYTE_PAGE(pBt) || PTRMAP_ISPAGE(pBt, iLastPg) );</span>
<span class='curline'><a href='../S/1054.html#L56363'>pBt</a>              56363 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;bDoTruncate = 1;</span>
<span class='curline'><a href='../S/1054.html#L56364'>pBt</a>              56364 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;nPage = iLastPg;</span>
<span class='curline'><a href='../S/1054.html#L56374'>pBt</a>              56374 ext/sqlite3/libsqlite/sqlite3.c static Pgno finalDbSize(BtShared *pBt, Pgno nOrig, Pgno nFree){</span>
<span class='curline'><a href='../S/1054.html#L56379'>pBt</a>              56379 ext/sqlite3/libsqlite/sqlite3.c   nEntry = pBt-&gt;usableSize/5;</span>
<span class='curline'><a href='../S/1054.html#L56380'>pBt</a>              56380 ext/sqlite3/libsqlite/sqlite3.c   nPtrmap = (nFree-nOrig+PTRMAP_PAGENO(pBt, nOrig)+nEntry)/nEntry;</span>
<span class='curline'><a href='../S/1054.html#L56382'>pBt</a>              56382 ext/sqlite3/libsqlite/sqlite3.c   if( nOrig&gt;PENDING_BYTE_PAGE(pBt) &amp;&amp; nFin&lt;PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L56385'>pBt</a>              56385 ext/sqlite3/libsqlite/sqlite3.c   while( PTRMAP_ISPAGE(pBt, nFin) || nFin==PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L56402'>pBt</a>              56402 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56405'>pBt</a>              56405 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;inTransaction==TRANS_WRITE &amp;&amp; p-&gt;inTrans==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L56406'>pBt</a>              56406 ext/sqlite3/libsqlite/sqlite3.c   if( !pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L56409'>pBt</a>              56409 ext/sqlite3/libsqlite/sqlite3.c     Pgno nOrig = btreePagecount(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56410'>pBt</a>              56410 ext/sqlite3/libsqlite/sqlite3.c     Pgno nFree = get4byte(&amp;pBt-&gt;pPage1-&gt;aData[36]);</span>
<span class='curline'><a href='../S/1054.html#L56411'>pBt</a>              56411 ext/sqlite3/libsqlite/sqlite3.c     Pgno nFin = finalDbSize(pBt, nOrig, nFree);</span>
<span class='curline'><a href='../S/1054.html#L56416'>pBt</a>              56416 ext/sqlite3/libsqlite/sqlite3.c       rc = saveAllCursors(pBt, 0, 0);</span>
<span class='curline'><a href='../S/1054.html#L56418'>pBt</a>              56418 ext/sqlite3/libsqlite/sqlite3.c         invalidateAllOverflowCache(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56419'>pBt</a>              56419 ext/sqlite3/libsqlite/sqlite3.c         rc = incrVacuumStep(pBt, nFin, nOrig, 0);</span>
<span class='curline'><a href='../S/1054.html#L56422'>pBt</a>              56422 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3PagerWrite(pBt-&gt;pPage1-&gt;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L56423'>pBt</a>              56423 ext/sqlite3/libsqlite/sqlite3.c         put4byte(&amp;pBt-&gt;pPage1-&gt;aData[28], pBt-&gt;nPage);</span>
<span class='curline'><a href='../S/1054.html#L56442'>pBt</a>              56442 ext/sqlite3/libsqlite/sqlite3.c static int autoVacuumCommit(BtShared *pBt){</span>
<span class='curline'><a href='../S/1054.html#L56444'>pBt</a>              56444 ext/sqlite3/libsqlite/sqlite3.c   Pager *pPager = pBt-&gt;pPager;</span>
<span class='curline'><a href='../S/1054.html#L56447'>pBt</a>              56447 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L56448'>pBt</a>              56448 ext/sqlite3/libsqlite/sqlite3.c   invalidateAllOverflowCache(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56449'>pBt</a>              56449 ext/sqlite3/libsqlite/sqlite3.c   assert(pBt-&gt;autoVacuum);</span>
<span class='curline'><a href='../S/1054.html#L56450'>pBt</a>              56450 ext/sqlite3/libsqlite/sqlite3.c   if( !pBt-&gt;incrVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L56456'>pBt</a>              56456 ext/sqlite3/libsqlite/sqlite3.c     nOrig = btreePagecount(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56457'>pBt</a>              56457 ext/sqlite3/libsqlite/sqlite3.c     if( PTRMAP_ISPAGE(pBt, nOrig) || nOrig==PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L56465'>pBt</a>              56465 ext/sqlite3/libsqlite/sqlite3.c     nFree = get4byte(&amp;pBt-&gt;pPage1-&gt;aData[36]);</span>
<span class='curline'><a href='../S/1054.html#L56466'>pBt</a>              56466 ext/sqlite3/libsqlite/sqlite3.c     nFin = finalDbSize(pBt, nOrig, nFree);</span>
<span class='curline'><a href='../S/1054.html#L56469'>pBt</a>              56469 ext/sqlite3/libsqlite/sqlite3.c       rc = saveAllCursors(pBt, 0, 0);</span>
<span class='curline'><a href='../S/1054.html#L56472'>pBt</a>              56472 ext/sqlite3/libsqlite/sqlite3.c       rc = incrVacuumStep(pBt, nFin, iFree, 1);</span>
<span class='curline'><a href='../S/1054.html#L56475'>pBt</a>              56475 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerWrite(pBt-&gt;pPage1-&gt;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L56476'>pBt</a>              56476 ext/sqlite3/libsqlite/sqlite3.c       put4byte(&amp;pBt-&gt;pPage1-&gt;aData[32], 0);</span>
<span class='curline'><a href='../S/1054.html#L56477'>pBt</a>              56477 ext/sqlite3/libsqlite/sqlite3.c       put4byte(&amp;pBt-&gt;pPage1-&gt;aData[36], 0);</span>
<span class='curline'><a href='../S/1054.html#L56478'>pBt</a>              56478 ext/sqlite3/libsqlite/sqlite3.c       put4byte(&amp;pBt-&gt;pPage1-&gt;aData[28], nFin);</span>
<span class='curline'><a href='../S/1054.html#L56479'>pBt</a>              56479 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;bDoTruncate = 1;</span>
<span class='curline'><a href='../S/1054.html#L56480'>pBt</a>              56480 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nPage = nFin;</span>
<span class='curline'><a href='../S/1054.html#L56524'>pBt</a>              56524 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56527'>pBt</a>              56527 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L56528'>pBt</a>              56528 ext/sqlite3/libsqlite/sqlite3.c       rc = autoVacuumCommit(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56534'>pBt</a>              56534 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;bDoTruncate ){</span>
<span class='curline'><a href='../S/1054.html#L56535'>pBt</a>              56535 ext/sqlite3/libsqlite/sqlite3.c       sqlite3PagerTruncateImage(pBt-&gt;pPager, pBt-&gt;nPage);</span>
<span class='curline'><a href='../S/1054.html#L56538'>pBt</a>              56538 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerCommitPhaseOne(pBt-&gt;pPager, zMaster, 0);</span>
<span class='curline'><a href='../S/1054.html#L56549'>pBt</a>              56549 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56554'>pBt</a>              56554 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;bDoTruncate = 0;</span>
<span class='curline'><a href='../S/1054.html#L56569'>pBt</a>              56569 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nTransaction--;</span>
<span class='curline'><a href='../S/1054.html#L56570'>pBt</a>              56570 ext/sqlite3/libsqlite/sqlite3.c       if( 0==pBt-&gt;nTransaction ){</span>
<span class='curline'><a href='../S/1054.html#L56571'>pBt</a>              56571 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;inTransaction = TRANS_NONE;</span>
<span class='curline'><a href='../S/1054.html#L56578'>pBt</a>              56578 ext/sqlite3/libsqlite/sqlite3.c     unlockBtreeIfUnused(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56621'>pBt</a>              56621 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56622'>pBt</a>              56622 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L56623'>pBt</a>              56623 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt-&gt;nTransaction&gt;0 );</span>
<span class='curline'><a href='../S/1054.html#L56624'>pBt</a>              56624 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerCommitPhaseTwo(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L56630'>pBt</a>              56630 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;inTransaction = TRANS_READ;</span>
<span class='curline'><a href='../S/1054.html#L56631'>pBt</a>              56631 ext/sqlite3/libsqlite/sqlite3.c     btreeClearHasContent(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56686'>pBt</a>              56686 ext/sqlite3/libsqlite/sqlite3.c     for(p=pBtree-&gt;pBt-&gt;pCursor; p; p=p-&gt;pNext){</span>
<span class='curline'><a href='../S/1054.html#L56724'>pBt</a>              56724 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56731'>pBt</a>              56731 ext/sqlite3/libsqlite/sqlite3.c     rc = tripCode = saveAllCursors(pBt, 0, 0);</span>
<span class='curline'><a href='../S/1054.html#L56746'>pBt</a>              56746 ext/sqlite3/libsqlite/sqlite3.c     assert( TRANS_WRITE==pBt-&gt;inTransaction );</span>
<span class='curline'><a href='../S/1054.html#L56747'>pBt</a>              56747 ext/sqlite3/libsqlite/sqlite3.c     rc2 = sqlite3PagerRollback(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L56755'>pBt</a>              56755 ext/sqlite3/libsqlite/sqlite3.c     if( btreeGetPage(pBt, 1, &amp;pPage1, 0)==SQLITE_OK ){</span>
<span class='curline'><a href='../S/1054.html#L56758'>pBt</a>              56758 ext/sqlite3/libsqlite/sqlite3.c       if( nPage==0 ) sqlite3PagerPagecount(pBt-&gt;pPager, &amp;nPage);</span>
<span class='curline'><a href='../S/1054.html#L56759'>pBt</a>              56759 ext/sqlite3/libsqlite/sqlite3.c       testcase( pBt-&gt;nPage!=nPage );</span>
<span class='curline'><a href='../S/1054.html#L56760'>pBt</a>              56760 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nPage = nPage;</span>
<span class='curline'><a href='../S/1054.html#L56763'>pBt</a>              56763 ext/sqlite3/libsqlite/sqlite3.c     assert( countValidCursors(pBt, 1)==0 );</span>
<span class='curline'><a href='../S/1054.html#L56764'>pBt</a>              56764 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;inTransaction = TRANS_READ;</span>
<span class='curline'><a href='../S/1054.html#L56765'>pBt</a>              56765 ext/sqlite3/libsqlite/sqlite3.c     btreeClearHasContent(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56793'>pBt</a>              56793 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56796'>pBt</a>              56796 ext/sqlite3/libsqlite/sqlite3.c   assert( (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)==0 );</span>
<span class='curline'><a href='../S/1054.html#L56799'>pBt</a>              56799 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L56805'>pBt</a>              56805 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerOpenSavepoint(pBt-&gt;pPager, iStatement);</span>
<span class='curline'><a href='../S/1054.html#L56825'>pBt</a>              56825 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56829'>pBt</a>              56829 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerSavepoint(pBt-&gt;pPager, op, iSavepoint);</span>
<span class='curline'><a href='../S/1054.html#L56831'>pBt</a>              56831 ext/sqlite3/libsqlite/sqlite3.c       if( iSavepoint&lt;0 &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_INITIALLY_EMPTY)!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L56832'>pBt</a>              56832 ext/sqlite3/libsqlite/sqlite3.c         pBt-&gt;nPage = 0;</span>
<span class='curline'><a href='../S/1054.html#L56834'>pBt</a>              56834 ext/sqlite3/libsqlite/sqlite3.c       rc = newDatabase(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56835'>pBt</a>              56835 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nPage = get4byte(28 + pBt-&gt;pPage1-&gt;aData);</span>
<span class='curline'><a href='../S/1054.html#L56840'>pBt</a>              56840 ext/sqlite3/libsqlite/sqlite3.c       assert( pBt-&gt;nPage&gt;0 );</span>
<span class='curline'><a href='../S/1054.html#L56886'>pBt</a>              56886 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;                /* Shared b-tree handle */</span>
<span class='curline'><a href='../S/1054.html#L56901'>pBt</a>              56901 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;pPage1 &amp;&amp; pBt-&gt;pPage1-&gt;aData );</span>
<span class='curline'><a href='../S/1054.html#L56903'>pBt</a>              56903 ext/sqlite3/libsqlite/sqlite3.c   if( NEVER(wrFlag &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)!=0) ){</span>
<span class='curline'><a href='../S/1054.html#L56907'>pBt</a>              56907 ext/sqlite3/libsqlite/sqlite3.c     allocateTempSpace(pBt);</span>
<span class='curline'><a href='../S/1054.html#L56908'>pBt</a>              56908 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;pTmpSpace==0 ) return SQLITE_NOMEM;</span>
<span class='curline'><a href='../S/1054.html#L56910'>pBt</a>              56910 ext/sqlite3/libsqlite/sqlite3.c   if( iTable==1 &amp;&amp; btreePagecount(pBt)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L56921'>pBt</a>              56921 ext/sqlite3/libsqlite/sqlite3.c   pCur-&gt;pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L56924'>pBt</a>              56924 ext/sqlite3/libsqlite/sqlite3.c   pCur-&gt;pNext = pBt-&gt;pCursor;</span>
<span class='curline'><a href='../S/1054.html#L56928'>pBt</a>              56928 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;pCursor = pCur;</span>
<span class='curline'><a href='../S/1054.html#L56978'>pBt</a>              56978 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = pCur-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L56984'>pBt</a>              56984 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;pCursor = pCur-&gt;pNext;</span>
<span class='curline'><a href='../S/1054.html#L56992'>pBt</a>              56992 ext/sqlite3/libsqlite/sqlite3.c     unlockBtreeIfUnused(pBt);</span>
<span class='curline'><a href='../S/1054.html#L57123'>pBt</a>              57123 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,               /* The database file */</span>
<span class='curline'><a href='../S/1054.html#L57132'>pBt</a>              57132 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L57142'>pBt</a>              57142 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L57147'>pBt</a>              57147 ext/sqlite3/libsqlite/sqlite3.c     while( PTRMAP_ISPAGE(pBt, iGuess) || iGuess==PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L57151'>pBt</a>              57151 ext/sqlite3/libsqlite/sqlite3.c     if( iGuess&lt;=btreePagecount(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L57152'>pBt</a>              57152 ext/sqlite3/libsqlite/sqlite3.c       rc = ptrmapGet(pBt, iGuess, &amp;eType, &amp;pgno);</span>
<span class='curline'><a href='../S/1054.html#L57163'>pBt</a>              57163 ext/sqlite3/libsqlite/sqlite3.c     rc = btreeGetPage(pBt, ovfl, &amp;pPage, (ppPage==0) ? PAGER_GET_READONLY : 0);</span>
<span class='curline'><a href='../S/1054.html#L57252'>pBt</a>              57252 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pCur-&gt;pBt;                  /* Btree this cursor belongs to */</span>
<span class='curline'><a href='../S/1054.html#L57271'>pBt</a>              57271 ext/sqlite3/libsqlite/sqlite3.c   if( &amp;aPayload[pCur-&gt;info.nLocal] &gt; &amp;pPage-&gt;aData[pBt-&gt;usableSize] ){</span>
<span class='curline'><a href='../S/1054.html#L57292'>pBt</a>              57292 ext/sqlite3/libsqlite/sqlite3.c     const u32 ovflSize = pBt-&gt;usableSize - 4;  /* Bytes content per ovfl page */</span>
<span class='curline'><a href='../S/1054.html#L57356'>pBt</a>              57356 ext/sqlite3/libsqlite/sqlite3.c         assert( pCur-&gt;pBtree-&gt;db==pBt-&gt;db );</span>
<span class='curline'><a href='../S/1054.html#L57360'>pBt</a>              57360 ext/sqlite3/libsqlite/sqlite3.c           rc = getOverflowPage(pBt, nextPage, 0, &amp;nextPage);</span>
<span class='curline'><a href='../S/1054.html#L57393'>pBt</a>              57393 ext/sqlite3/libsqlite/sqlite3.c          &amp;&amp; pBt-&gt;inTransaction==TRANS_READ                     /* (4) */</span>
<span class='curline'><a href='../S/1054.html#L57394'>pBt</a>              57394 ext/sqlite3/libsqlite/sqlite3.c          &amp;&amp; (fd = sqlite3PagerFile(pBt-&gt;pPager))-&gt;pMethods     /* (3) */</span>
<span class='curline'><a href='../S/1054.html#L57395'>pBt</a>              57395 ext/sqlite3/libsqlite/sqlite3.c          &amp;&amp; pBt-&gt;pPage1-&gt;aData[19]==0x01                       /* (5) */</span>
<span class='curline'><a href='../S/1054.html#L57402'>pBt</a>              57402 ext/sqlite3/libsqlite/sqlite3.c           rc = sqlite3OsRead(fd, aWrite, a+4, (i64)pBt-&gt;pageSize*(nextPage-1));</span>
<span class='curline'><a href='../S/1054.html#L57410'>pBt</a>              57410 ext/sqlite3/libsqlite/sqlite3.c           rc = sqlite3PagerAcquire(pBt-&gt;pPager, nextPage, &amp;pDbPage,</span>
<span class='curline'><a href='../S/1054.html#L57556'>pBt</a>              57556 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pCur-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L57565'>pBt</a>              57565 ext/sqlite3/libsqlite/sqlite3.c   rc = getAndInitPage(pBt, newPgno, &amp;pNewPage,</span>
<span class='curline'><a href='../S/1054.html#L57671'>pBt</a>              57671 ext/sqlite3/libsqlite/sqlite3.c     rc = getAndInitPage(pCur-&gt;pBtree-&gt;pBt, pCur-&gt;pgnoRoot, &amp;pCur-&gt;apPage[0],</span>
<span class='curline'><a href='../S/1054.html#L58312'>pBt</a>              58312 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,         /* The btree */</span>
<span class='curline'><a href='../S/1054.html#L58326'>pBt</a>              58326 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L58327'>pBt</a>              58327 ext/sqlite3/libsqlite/sqlite3.c   assert( eMode==BTALLOC_ANY || (nearby&gt;0 &amp;&amp; IfNotOmitAV(pBt-&gt;autoVacuum)) );</span>
<span class='curline'><a href='../S/1054.html#L58328'>pBt</a>              58328 ext/sqlite3/libsqlite/sqlite3.c   pPage1 = pBt-&gt;pPage1;</span>
<span class='curline'><a href='../S/1054.html#L58329'>pBt</a>              58329 ext/sqlite3/libsqlite/sqlite3.c   mxPage = btreePagecount(pBt);</span>
<span class='curline'><a href='../S/1054.html#L58351'>pBt</a>              58351 ext/sqlite3/libsqlite/sqlite3.c         assert( pBt-&gt;autoVacuum );</span>
<span class='curline'><a href='../S/1054.html#L58352'>pBt</a>              58352 ext/sqlite3/libsqlite/sqlite3.c         rc = ptrmapGet(pBt, nearby, &amp;eType, 0);</span>
<span class='curline'><a href='../S/1054.html#L58392'>pBt</a>              58392 ext/sqlite3/libsqlite/sqlite3.c         rc = btreeGetPage(pBt, iTrunk, &amp;pTrunk, 0);</span>
<span class='curline'><a href='../S/1054.html#L58417'>pBt</a>              58417 ext/sqlite3/libsqlite/sqlite3.c       }else if( k&gt;(u32)(pBt-&gt;usableSize/4 - 2) ){</span>
<span class='curline'><a href='../S/1054.html#L58457'>pBt</a>              58457 ext/sqlite3/libsqlite/sqlite3.c           rc = btreeGetPage(pBt, iNewTrunk, &amp;pNewTrunk, 0);</span>
<span class='curline'><a href='../S/1054.html#L58536'>pBt</a>              58536 ext/sqlite3/libsqlite/sqlite3.c           noContent = !btreeGetHasContent(pBt, *pPgno)? PAGER_GET_NOCONTENT : 0;</span>
<span class='curline'><a href='../S/1054.html#L58537'>pBt</a>              58537 ext/sqlite3/libsqlite/sqlite3.c           rc = btreeGetPage(pBt, *pPgno, ppPage, noContent);</span>
<span class='curline'><a href='../S/1054.html#L58569'>pBt</a>              58569 ext/sqlite3/libsqlite/sqlite3.c     int bNoContent = (0==IfNotOmitAV(pBt-&gt;bDoTruncate))? PAGER_GET_NOCONTENT:0;</span>
<span class='curline'><a href='../S/1054.html#L58571'>pBt</a>              58571 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3PagerWrite(pBt-&gt;pPage1-&gt;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L58573'>pBt</a>              58573 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;nPage++;</span>
<span class='curline'><a href='../S/1054.html#L58574'>pBt</a>              58574 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;nPage==PENDING_BYTE_PAGE(pBt) ) pBt-&gt;nPage++;</span>
<span class='curline'><a href='../S/1054.html#L58577'>pBt</a>              58577 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;autoVacuum &amp;&amp; PTRMAP_ISPAGE(pBt, pBt-&gt;nPage) ){</span>
<span class='curline'><a href='../S/1054.html#L58583'>pBt</a>              58583 ext/sqlite3/libsqlite/sqlite3.c       TRACE(("ALLOCATE: %d from end of file (pointer-map page)\n", pBt-&gt;nPage));</span>
<span class='curline'><a href='../S/1054.html#L58584'>pBt</a>              58584 ext/sqlite3/libsqlite/sqlite3.c       assert( pBt-&gt;nPage!=PENDING_BYTE_PAGE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L58585'>pBt</a>              58585 ext/sqlite3/libsqlite/sqlite3.c       rc = btreeGetPage(pBt, pBt-&gt;nPage, &amp;pPg, bNoContent);</span>
<span class='curline'><a href='../S/1054.html#L58591'>pBt</a>              58591 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;nPage++;</span>
<span class='curline'><a href='../S/1054.html#L58592'>pBt</a>              58592 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;nPage==PENDING_BYTE_PAGE(pBt) ){ pBt-&gt;nPage++; }</span>
<span class='curline'><a href='../S/1054.html#L58595'>pBt</a>              58595 ext/sqlite3/libsqlite/sqlite3.c     put4byte(28 + (u8*)pBt-&gt;pPage1-&gt;aData, pBt-&gt;nPage);</span>
<span class='curline'><a href='../S/1054.html#L58596'>pBt</a>              58596 ext/sqlite3/libsqlite/sqlite3.c     *pPgno = pBt-&gt;nPage;</span>
<span class='curline'><a href='../S/1054.html#L58598'>pBt</a>              58598 ext/sqlite3/libsqlite/sqlite3.c     assert( *pPgno!=PENDING_BYTE_PAGE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L58599'>pBt</a>              58599 ext/sqlite3/libsqlite/sqlite3.c     rc = btreeGetPage(pBt, *pPgno, ppPage, bNoContent);</span>
<span class='curline'><a href='../S/1054.html#L58608'>pBt</a>              58608 ext/sqlite3/libsqlite/sqlite3.c   assert( *pPgno!=PENDING_BYTE_PAGE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L58639'>pBt</a>              58639 ext/sqlite3/libsqlite/sqlite3.c static int freePage2(BtShared *pBt, MemPage *pMemPage, Pgno iPage){</span>
<span class='curline'><a href='../S/1054.html#L58642'>pBt</a>              58642 ext/sqlite3/libsqlite/sqlite3.c   MemPage *pPage1 = pBt-&gt;pPage1;      /* Local reference to page 1 */</span>
<span class='curline'><a href='../S/1054.html#L58647'>pBt</a>              58647 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L58655'>pBt</a>              58655 ext/sqlite3/libsqlite/sqlite3.c     pPage = btreePageLookup(pBt, iPage);</span>
<span class='curline'><a href='../S/1054.html#L58664'>pBt</a>              58664 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE ){</span>
<span class='curline'><a href='../S/1054.html#L58668'>pBt</a>              58668 ext/sqlite3/libsqlite/sqlite3.c     if( (!pPage &amp;&amp; ((rc = btreeGetPage(pBt, iPage, &amp;pPage, 0))!=0) )</span>
<span class='curline'><a href='../S/1054.html#L58673'>pBt</a>              58673 ext/sqlite3/libsqlite/sqlite3.c     memset(pPage-&gt;aData, 0, pPage-&gt;pBt-&gt;pageSize);</span>
<span class='curline'><a href='../S/1054.html#L58680'>pBt</a>              58680 ext/sqlite3/libsqlite/sqlite3.c     ptrmapPut(pBt, iPage, PTRMAP_FREEPAGE, 0, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L58695'>pBt</a>              58695 ext/sqlite3/libsqlite/sqlite3.c     rc = btreeGetPage(pBt, iTrunk, &amp;pTrunk, 0);</span>
<span class='curline'><a href='../S/1054.html#L58701'>pBt</a>              58701 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt-&gt;usableSize&gt;32 );</span>
<span class='curline'><a href='../S/1054.html#L58702'>pBt</a>              58702 ext/sqlite3/libsqlite/sqlite3.c     if( nLeaf &gt; (u32)pBt-&gt;usableSize/4 - 2 ){</span>
<span class='curline'><a href='../S/1054.html#L58706'>pBt</a>              58706 ext/sqlite3/libsqlite/sqlite3.c     if( nLeaf &lt; (u32)pBt-&gt;usableSize/4 - 8 ){</span>
<span class='curline'><a href='../S/1054.html#L58730'>pBt</a>              58730 ext/sqlite3/libsqlite/sqlite3.c         if( pPage &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L58733'>pBt</a>              58733 ext/sqlite3/libsqlite/sqlite3.c         rc = btreeSetHasContent(pBt, iPage);</span>
<span class='curline'><a href='../S/1054.html#L58746'>pBt</a>              58746 ext/sqlite3/libsqlite/sqlite3.c   if( pPage==0 &amp;&amp; SQLITE_OK!=(rc = btreeGetPage(pBt, iPage, &amp;pPage, 0)) ){</span>
<span class='curline'><a href='../S/1054.html#L58768'>pBt</a>              58768 ext/sqlite3/libsqlite/sqlite3.c     *pRC = freePage2(pPage-&gt;pBt, pPage, pPage-&gt;pgno);</span>
<span class='curline'><a href='../S/1054.html#L58782'>pBt</a>              58782 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L58789'>pBt</a>              58789 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L58799'>pBt</a>              58799 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;usableSize &gt; 4 );</span>
<span class='curline'><a href='../S/1054.html#L58800'>pBt</a>              58800 ext/sqlite3/libsqlite/sqlite3.c   ovflPageSize = pBt-&gt;usableSize - 4;</span>
<span class='curline'><a href='../S/1054.html#L58806'>pBt</a>              58806 ext/sqlite3/libsqlite/sqlite3.c     if( ovflPgno&lt;2 || ovflPgno&gt;btreePagecount(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L58813'>pBt</a>              58813 ext/sqlite3/libsqlite/sqlite3.c       rc = getOverflowPage(pBt, ovflPgno, &amp;pOvfl, &amp;iNext);</span>
<span class='curline'><a href='../S/1054.html#L58817'>pBt</a>              58817 ext/sqlite3/libsqlite/sqlite3.c     if( ( pOvfl || ((pOvfl = btreePageLookup(pBt, ovflPgno))!=0) )</span>
<span class='curline'><a href='../S/1054.html#L58832'>pBt</a>              58832 ext/sqlite3/libsqlite/sqlite3.c       rc = freePage2(pBt, pOvfl, ovflPgno);</span>
<span class='curline'><a href='../S/1054.html#L58872'>pBt</a>              58872 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L58876'>pBt</a>              58876 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L58880'>pBt</a>              58880 ext/sqlite3/libsqlite/sqlite3.c   assert( pCell&lt;pPage-&gt;aData || pCell&gt;=&amp;pPage-&gt;aData[pBt-&gt;pageSize]</span>
<span class='curline'><a href='../S/1054.html#L58917'>pBt</a>              58917 ext/sqlite3/libsqlite/sqlite3.c     n = mn + (nPayload - mn) % (pPage-&gt;pBt-&gt;usableSize - 4);</span>
<span class='curline'><a href='../S/1054.html#L58956'>pBt</a>              58956 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L58960'>pBt</a>              58960 ext/sqlite3/libsqlite/sqlite3.c           PTRMAP_ISPAGE(pBt, pgnoOvfl) || pgnoOvfl==PENDING_BYTE_PAGE(pBt) </span>
<span class='curline'><a href='../S/1054.html#L58964'>pBt</a>              58964 ext/sqlite3/libsqlite/sqlite3.c       rc = allocateBtreePage(pBt, &amp;pOvfl, &amp;pgnoOvfl, pgnoOvfl, 0);</span>
<span class='curline'><a href='../S/1054.html#L58976'>pBt</a>              58976 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;autoVacuum &amp;&amp; rc==SQLITE_OK ){</span>
<span class='curline'><a href='../S/1054.html#L58978'>pBt</a>              58978 ext/sqlite3/libsqlite/sqlite3.c         ptrmapPut(pBt, pgnoOvfl, eType, pgnoPtrmap, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L58995'>pBt</a>              58995 ext/sqlite3/libsqlite/sqlite3.c       assert( pPrior&lt;pPage-&gt;aData || pPrior&gt;=&amp;pPage-&gt;aData[pBt-&gt;pageSize]</span>
<span class='curline'><a href='../S/1054.html#L59004'>pBt</a>              59004 ext/sqlite3/libsqlite/sqlite3.c       spaceLeft = pBt-&gt;usableSize - 4;</span>
<span class='curline'><a href='../S/1054.html#L59015'>pBt</a>              59015 ext/sqlite3/libsqlite/sqlite3.c     assert( pPayload&lt;pPage-&gt;aData || pPayload&gt;=&amp;pPage-&gt;aData[pBt-&gt;pageSize]</span>
<span class='curline'><a href='../S/1054.html#L59059'>pBt</a>              59059 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L59065'>pBt</a>              59065 ext/sqlite3/libsqlite/sqlite3.c   testcase( pc+sz==pPage-&gt;pBt-&gt;usableSize );</span>
<span class='curline'><a href='../S/1054.html#L59066'>pBt</a>              59066 ext/sqlite3/libsqlite/sqlite3.c   if( pc &lt; (u32)get2byte(&amp;data[hdr+5]) || pc+sz &gt; pPage-&gt;pBt-&gt;usableSize ){</span>
<span class='curline'><a href='../S/1054.html#L59079'>pBt</a>              59079 ext/sqlite3/libsqlite/sqlite3.c     put2byte(&amp;data[hdr+5], pPage-&gt;pBt-&gt;usableSize);</span>
<span class='curline'><a href='../S/1054.html#L59080'>pBt</a>              59080 ext/sqlite3/libsqlite/sqlite3.c     pPage-&gt;nFree = pPage-&gt;pBt-&gt;usableSize - pPage-&gt;hdrOffset</span>
<span class='curline'><a href='../S/1054.html#L59120'>pBt</a>              59120 ext/sqlite3/libsqlite/sqlite3.c   assert( MX_CELL(pPage-&gt;pBt)&lt;=10921 );</span>
<span class='curline'><a href='../S/1054.html#L59121'>pBt</a>              59121 ext/sqlite3/libsqlite/sqlite3.c   assert( pPage-&gt;nCell&lt;=MX_CELL(pPage-&gt;pBt) || CORRUPT_DB );</span>
<span class='curline'><a href='../S/1054.html#L59124'>pBt</a>              59124 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L59159'>pBt</a>              59159 ext/sqlite3/libsqlite/sqlite3.c     assert( idx+sz &lt;= (int)pPage-&gt;pBt-&gt;usableSize );</span>
<span class='curline'><a href='../S/1054.html#L59170'>pBt</a>              59170 ext/sqlite3/libsqlite/sqlite3.c     if( pPage-&gt;pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L59201'>pBt</a>              59201 ext/sqlite3/libsqlite/sqlite3.c   const int usableSize = pPg-&gt;pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L59205'>pBt</a>              59205 ext/sqlite3/libsqlite/sqlite3.c   u8 *pTmp = sqlite3PagerTempSpace(pPg-&gt;pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L59306'>pBt</a>              59306 ext/sqlite3/libsqlite/sqlite3.c   u8 * const pEnd = &amp;aData[pPg-&gt;pBt-&gt;usableSize];</span>
<span class='curline'><a href='../S/1054.html#L59370'>pBt</a>              59370 ext/sqlite3/libsqlite/sqlite3.c   u8 *pTmp = sqlite3PagerTempSpace(pPg-&gt;pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L59371'>pBt</a>              59371 ext/sqlite3/libsqlite/sqlite3.c   memcpy(pTmp, aData, pPg-&gt;pBt-&gt;usableSize);</span>
<span class='curline'><a href='../S/1054.html#L59435'>pBt</a>              59435 ext/sqlite3/libsqlite/sqlite3.c     if( pCell&gt;=aData &amp;&amp; pCell&lt;&amp;aData[pPg-&gt;pBt-&gt;usableSize] ){</span>
<span class='curline'><a href='../S/1054.html#L59489'>pBt</a>              59489 ext/sqlite3/libsqlite/sqlite3.c   BtShared *const pBt = pPage-&gt;pBt;    /* B-Tree Database */</span>
<span class='curline'><a href='../S/1054.html#L59494'>pBt</a>              59494 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pPage-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L59505'>pBt</a>              59505 ext/sqlite3/libsqlite/sqlite3.c   rc = allocateBtreePage(pBt, &amp;pNew, &amp;pgnoNew, 0, 0);</span>
<span class='curline'><a href='../S/1054.html#L59518'>pBt</a>              59518 ext/sqlite3/libsqlite/sqlite3.c     pNew-&gt;nFree = pBt-&gt;usableSize - pNew-&gt;cellOffset - 2 - szCell;</span>
<span class='curline'><a href='../S/1054.html#L59530'>pBt</a>              59530 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, pgnoNew, PTRMAP_BTREE, pParent-&gt;pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L59582'>pBt</a>              59582 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = pPage-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L59593'>pBt</a>              59593 ext/sqlite3/libsqlite/sqlite3.c         ptrmapGet(pBt, ovfl, &amp;e, &amp;n);</span>
<span class='curline'><a href='../S/1054.html#L59598'>pBt</a>              59598 ext/sqlite3/libsqlite/sqlite3.c         ptrmapGet(pBt, child, &amp;e, &amp;n);</span>
<span class='curline'><a href='../S/1054.html#L59604'>pBt</a>              59604 ext/sqlite3/libsqlite/sqlite3.c       ptrmapGet(pBt, child, &amp;e, &amp;n);</span>
<span class='curline'><a href='../S/1054.html#L59631'>pBt</a>              59631 ext/sqlite3/libsqlite/sqlite3.c     BtShared * const pBt = pFrom-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L59642'>pBt</a>              59642 ext/sqlite3/libsqlite/sqlite3.c     assert( get2byte(&amp;aFrom[iFromHdr+5]) &lt;= (int)pBt-&gt;usableSize );</span>
<span class='curline'><a href='../S/1054.html#L59646'>pBt</a>              59646 ext/sqlite3/libsqlite/sqlite3.c     memcpy(&amp;aTo[iData], &amp;aFrom[iData], pBt-&gt;usableSize-iData);</span>
<span class='curline'><a href='../S/1054.html#L59720'>pBt</a>              59720 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;               /* The whole database */</span>
<span class='curline'><a href='../S/1054.html#L59753'>pBt</a>              59753 ext/sqlite3/libsqlite/sqlite3.c   pBt = pParent-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L59754'>pBt</a>              59754 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L59806'>pBt</a>              59806 ext/sqlite3/libsqlite/sqlite3.c     rc = getAndInitPage(pBt, pgno, &amp;apOld[i], 0);</span>
<span class='curline'><a href='../S/1054.html#L59836'>pBt</a>              59836 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;btsFlags &amp; BTS_SECURE_DELETE ){</span>
<span class='curline'><a href='../S/1054.html#L59840'>pBt</a>              59840 ext/sqlite3/libsqlite/sqlite3.c         if( (iOff+szNew[i])&gt;(int)pBt-&gt;usableSize ){</span>
<span class='curline'><a href='../S/1054.html#L59863'>pBt</a>              59863 ext/sqlite3/libsqlite/sqlite3.c      + pBt-&gt;pageSize;                              /* aSpace1 */</span>
<span class='curline'><a href='../S/1054.html#L59867'>pBt</a>              59867 ext/sqlite3/libsqlite/sqlite3.c   assert( szScratch&lt;=6*(int)pBt-&gt;pageSize );</span>
<span class='curline'><a href='../S/1054.html#L59926'>pBt</a>              59926 ext/sqlite3/libsqlite/sqlite3.c       assert( sz&lt;=pBt-&gt;maxLocal+23 );</span>
<span class='curline'><a href='../S/1054.html#L59927'>pBt</a>              59927 ext/sqlite3/libsqlite/sqlite3.c       assert( iSpace1 &lt;= (int)pBt-&gt;pageSize );</span>
<span class='curline'><a href='../S/1054.html#L59969'>pBt</a>              59969 ext/sqlite3/libsqlite/sqlite3.c   usableSpace = pBt-&gt;usableSize - 12 + leafCorrection;</span>
<span class='curline'><a href='../S/1054.html#L60052'>pBt</a>              60052 ext/sqlite3/libsqlite/sqlite3.c       rc = allocateBtreePage(pBt, &amp;pNew, &amp;pgno, (bBulk ? 1 : pgno), 0);</span>
<span class='curline'><a href='../S/1054.html#L60061'>pBt</a>              60061 ext/sqlite3/libsqlite/sqlite3.c         ptrmapPut(pBt, pNew-&gt;pgno, PTRMAP_BTREE, pParent-&gt;pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L60107'>pBt</a>              60107 ext/sqlite3/libsqlite/sqlite3.c         sqlite3PagerRekey(apNew[iBest]-&gt;pDbPage, pBt-&gt;nPage+iBest+1, 0);</span>
<span class='curline'><a href='../S/1054.html#L60158'>pBt</a>              60158 ext/sqlite3/libsqlite/sqlite3.c     int usableSize = pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L60186'>pBt</a>              60186 ext/sqlite3/libsqlite/sqlite3.c           ptrmapPut(pBt, get4byte(pCell), PTRMAP_BTREE, pNew-&gt;pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L60240'>pBt</a>              60240 ext/sqlite3/libsqlite/sqlite3.c     assert( sz&lt;=pBt-&gt;maxLocal+23 );</span>
<span class='curline'><a href='../S/1054.html#L60241'>pBt</a>              60241 ext/sqlite3/libsqlite/sqlite3.c     assert( iOvflSpace &lt;= (int)pBt-&gt;pageSize );</span>
<span class='curline'><a href='../S/1054.html#L60342'>pBt</a>              60342 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, key, PTRMAP_BTREE, apNew[i]-&gt;pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L60409'>pBt</a>              60409 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pRoot-&gt;pBt;    /* The BTree */</span>
<span class='curline'><a href='../S/1054.html#L60412'>pBt</a>              60412 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L60420'>pBt</a>              60420 ext/sqlite3/libsqlite/sqlite3.c     rc = allocateBtreePage(pBt,&amp;pChild,&amp;pgnoChild,pRoot-&gt;pgno,0);</span>
<span class='curline'><a href='../S/1054.html#L60423'>pBt</a>              60423 ext/sqlite3/libsqlite/sqlite3.c       ptrmapPut(pBt, pgnoChild, PTRMAP_BTREE, pRoot-&gt;pgno, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L60464'>pBt</a>              60464 ext/sqlite3/libsqlite/sqlite3.c   const int nMin = pCur-&gt;pBt-&gt;usableSize * 2 / 3;</span>
<span class='curline'><a href='../S/1054.html#L60543'>pBt</a>              60543 ext/sqlite3/libsqlite/sqlite3.c           u8 *pSpace = sqlite3PageMalloc(pCur-&gt;pBt-&gt;pageSize);</span>
<span class='curline'><a href='../S/1054.html#L60613'>pBt</a>              60613 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L60624'>pBt</a>              60624 ext/sqlite3/libsqlite/sqlite3.c               &amp;&amp; pBt-&gt;inTransaction==TRANS_WRITE</span>
<span class='curline'><a href='../S/1054.html#L60625'>pBt</a>              60625 ext/sqlite3/libsqlite/sqlite3.c               &amp;&amp; (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)==0 );</span>
<span class='curline'><a href='../S/1054.html#L60646'>pBt</a>              60646 ext/sqlite3/libsqlite/sqlite3.c   rc = saveAllCursors(pBt, pCur-&gt;pgnoRoot, pCur);</span>
<span class='curline'><a href='../S/1054.html#L60677'>pBt</a>              60677 ext/sqlite3/libsqlite/sqlite3.c   newCell = pBt-&gt;pTmpSpace;</span>
<span class='curline'><a href='../S/1054.html#L60682'>pBt</a>              60682 ext/sqlite3/libsqlite/sqlite3.c   assert( szNew &lt;= MX_CELL_SIZE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L60751'>pBt</a>              60751 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;              </span>
<span class='curline'><a href='../S/1054.html#L60760'>pBt</a>              60760 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L60761'>pBt</a>              60761 ext/sqlite3/libsqlite/sqlite3.c   assert( (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)==0 );</span>
<span class='curline'><a href='../S/1054.html#L60795'>pBt</a>              60795 ext/sqlite3/libsqlite/sqlite3.c   rc = saveAllCursors(pBt, pCur-&gt;pgnoRoot, pCur);</span>
<span class='curline'><a href='../S/1054.html#L60823'>pBt</a>              60823 ext/sqlite3/libsqlite/sqlite3.c     assert( MX_CELL_SIZE(pBt) &gt;= nCell );</span>
<span class='curline'><a href='../S/1054.html#L60824'>pBt</a>              60824 ext/sqlite3/libsqlite/sqlite3.c     pTmp = pBt-&gt;pTmpSpace;</span>
<span class='curline'><a href='../S/1054.html#L60873'>pBt</a>              60873 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L60880'>pBt</a>              60880 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L60881'>pBt</a>              60881 ext/sqlite3/libsqlite/sqlite3.c   assert( (pBt-&gt;btsFlags &amp; BTS_READ_ONLY)==0 );</span>
<span class='curline'><a href='../S/1054.html#L60884'>pBt</a>              60884 ext/sqlite3/libsqlite/sqlite3.c   rc = allocateBtreePage(pBt, &amp;pRoot, &amp;pgnoRoot, 1, 0);</span>
<span class='curline'><a href='../S/1054.html#L60889'>pBt</a>              60889 ext/sqlite3/libsqlite/sqlite3.c   if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L60898'>pBt</a>              60898 ext/sqlite3/libsqlite/sqlite3.c     invalidateAllOverflowCache(pBt);</span>
<span class='curline'><a href='../S/1054.html#L60910'>pBt</a>              60910 ext/sqlite3/libsqlite/sqlite3.c     while( pgnoRoot==PTRMAP_PAGENO(pBt, pgnoRoot) ||</span>
<span class='curline'><a href='../S/1054.html#L60911'>pBt</a>              60911 ext/sqlite3/libsqlite/sqlite3.c         pgnoRoot==PENDING_BYTE_PAGE(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L60920'>pBt</a>              60920 ext/sqlite3/libsqlite/sqlite3.c     rc = allocateBtreePage(pBt, &amp;pPageMove, &amp;pgnoMove, pgnoRoot, BTALLOC_EXACT);</span>
<span class='curline'><a href='../S/1054.html#L60938'>pBt</a>              60938 ext/sqlite3/libsqlite/sqlite3.c       rc = saveAllCursors(pBt, 0, 0);</span>
<span class='curline'><a href='../S/1054.html#L60945'>pBt</a>              60945 ext/sqlite3/libsqlite/sqlite3.c       rc = btreeGetPage(pBt, pgnoRoot, &amp;pRoot, 0);</span>
<span class='curline'><a href='../S/1054.html#L60949'>pBt</a>              60949 ext/sqlite3/libsqlite/sqlite3.c       rc = ptrmapGet(pBt, pgnoRoot, &amp;eType, &amp;iPtrPage);</span>
<span class='curline'><a href='../S/1054.html#L60959'>pBt</a>              60959 ext/sqlite3/libsqlite/sqlite3.c       rc = relocatePage(pBt, pRoot, eType, iPtrPage, pgnoMove, 0);</span>
<span class='curline'><a href='../S/1054.html#L60966'>pBt</a>              60966 ext/sqlite3/libsqlite/sqlite3.c       rc = btreeGetPage(pBt, pgnoRoot, &amp;pRoot, 0);</span>
<span class='curline'><a href='../S/1054.html#L60980'>pBt</a>              60980 ext/sqlite3/libsqlite/sqlite3.c     ptrmapPut(pBt, pgnoRoot, PTRMAP_ROOTPAGE, 0, &amp;rc);</span>
<span class='curline'><a href='../S/1054.html#L60990'>pBt</a>              60990 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3PagerIswriteable(pBt-&gt;pPage1-&gt;pDbPage) );</span>
<span class='curline'><a href='../S/1054.html#L60998'>pBt</a>              60998 ext/sqlite3/libsqlite/sqlite3.c     rc = allocateBtreePage(pBt, &amp;pRoot, &amp;pgnoRoot, 1, 0);</span>
<span class='curline'><a href='../S/1054.html#L61010'>pBt</a>              61010 ext/sqlite3/libsqlite/sqlite3.c   assert( (pBt-&gt;openFlags &amp; BTREE_SINGLE)==0 || pgnoRoot==2 );</span>
<span class='curline'><a href='../S/1054.html#L61027'>pBt</a>              61027 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt,           /* The BTree that contains the table */</span>
<span class='curline'><a href='../S/1054.html#L61039'>pBt</a>              61039 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3_mutex_held(pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L61040'>pBt</a>              61040 ext/sqlite3/libsqlite/sqlite3.c   if( pgno&gt;btreePagecount(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L61043'>pBt</a>              61043 ext/sqlite3/libsqlite/sqlite3.c   rc = getAndInitPage(pBt, pgno, &amp;pPage, 0);</span>
<span class='curline'><a href='../S/1054.html#L61054'>pBt</a>              61054 ext/sqlite3/libsqlite/sqlite3.c       rc = clearDatabasePage(pBt, get4byte(pCell), 1, pnChange);</span>
<span class='curline'><a href='../S/1054.html#L61061'>pBt</a>              61061 ext/sqlite3/libsqlite/sqlite3.c     rc = clearDatabasePage(pBt, get4byte(&amp;pPage-&gt;aData[hdr+8]), 1, pnChange);</span>
<span class='curline'><a href='../S/1054.html#L61094'>pBt</a>              61094 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61098'>pBt</a>              61098 ext/sqlite3/libsqlite/sqlite3.c   rc = saveAllCursors(pBt, (Pgno)iTable, 0);</span>
<span class='curline'><a href='../S/1054.html#L61105'>pBt</a>              61105 ext/sqlite3/libsqlite/sqlite3.c     rc = clearDatabasePage(pBt, (Pgno)iTable, 0, pnChange);</span>
<span class='curline'><a href='../S/1054.html#L61143'>pBt</a>              61143 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61156'>pBt</a>              61156 ext/sqlite3/libsqlite/sqlite3.c   if( NEVER(pBt-&gt;pCursor) ){</span>
<span class='curline'><a href='../S/1054.html#L61157'>pBt</a>              61157 ext/sqlite3/libsqlite/sqlite3.c     sqlite3ConnectionBlocked(p-&gt;db, pBt-&gt;pCursor-&gt;pBtree-&gt;db);</span>
<span class='curline'><a href='../S/1054.html#L61161'>pBt</a>              61161 ext/sqlite3/libsqlite/sqlite3.c   rc = btreeGetPage(pBt, (Pgno)iTable, &amp;pPage, 0);</span>
<span class='curline'><a href='../S/1054.html#L61176'>pBt</a>              61176 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61196'>pBt</a>              61196 ext/sqlite3/libsqlite/sqlite3.c         rc = btreeGetPage(pBt, maxRootPgno, &amp;pMove, 0);</span>
<span class='curline'><a href='../S/1054.html#L61200'>pBt</a>              61200 ext/sqlite3/libsqlite/sqlite3.c         rc = relocatePage(pBt, pMove, PTRMAP_ROOTPAGE, 0, iTable, 0);</span>
<span class='curline'><a href='../S/1054.html#L61206'>pBt</a>              61206 ext/sqlite3/libsqlite/sqlite3.c         rc = btreeGetPage(pBt, maxRootPgno, &amp;pMove, 0);</span>
<span class='curline'><a href='../S/1054.html#L61221'>pBt</a>              61221 ext/sqlite3/libsqlite/sqlite3.c       while( maxRootPgno==PENDING_BYTE_PAGE(pBt)</span>
<span class='curline'><a href='../S/1054.html#L61222'>pBt</a>              61222 ext/sqlite3/libsqlite/sqlite3.c              || PTRMAP_ISPAGE(pBt, maxRootPgno) ){</span>
<span class='curline'><a href='../S/1054.html#L61225'>pBt</a>              61225 ext/sqlite3/libsqlite/sqlite3.c       assert( maxRootPgno!=PENDING_BYTE_PAGE(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L61273'>pBt</a>              61273 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61278'>pBt</a>              61278 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;pPage1 );</span>
<span class='curline'><a href='../S/1054.html#L61282'>pBt</a>              61282 ext/sqlite3/libsqlite/sqlite3.c     *pMeta = sqlite3PagerDataVersion(pBt-&gt;pPager) + p-&gt;iDataVersion;</span>
<span class='curline'><a href='../S/1054.html#L61284'>pBt</a>              61284 ext/sqlite3/libsqlite/sqlite3.c     *pMeta = get4byte(&amp;pBt-&gt;pPage1-&gt;aData[36 + idx*4]);</span>
<span class='curline'><a href='../S/1054.html#L61291'>pBt</a>              61291 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;btsFlags |= BTS_READ_ONLY;</span>
<span class='curline'><a href='../S/1054.html#L61303'>pBt</a>              61303 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61309'>pBt</a>              61309 ext/sqlite3/libsqlite/sqlite3.c   assert( pBt-&gt;pPage1!=0 );</span>
<span class='curline'><a href='../S/1054.html#L61310'>pBt</a>              61310 ext/sqlite3/libsqlite/sqlite3.c   pP1 = pBt-&gt;pPage1-&gt;aData;</span>
<span class='curline'><a href='../S/1054.html#L61311'>pBt</a>              61311 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3PagerWrite(pBt-&gt;pPage1-&gt;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L61316'>pBt</a>              61316 ext/sqlite3/libsqlite/sqlite3.c       assert( pBt-&gt;autoVacuum || iMeta==0 );</span>
<span class='curline'><a href='../S/1054.html#L61318'>pBt</a>              61318 ext/sqlite3/libsqlite/sqlite3.c       pBt-&gt;incrVacuum = (u8)iMeta;</span>
<span class='curline'><a href='../S/1054.html#L61406'>pBt</a>              61406 ext/sqlite3/libsqlite/sqlite3.c   return p-&gt;pBt-&gt;pPager;</span>
<span class='curline'><a href='../S/1054.html#L61497'>pBt</a>              61497 ext/sqlite3/libsqlite/sqlite3.c   rc = ptrmapGet(pCheck-&gt;pBt, iChild, &amp;ePtrmapType, &amp;iPtrmapParent);</span>
<span class='curline'><a href='../S/1054.html#L61543'>pBt</a>              61543 ext/sqlite3/libsqlite/sqlite3.c       if( pCheck-&gt;pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61547'>pBt</a>              61547 ext/sqlite3/libsqlite/sqlite3.c       if( n&gt;(int)pCheck-&gt;pBt-&gt;usableSize/4-2 ){</span>
<span class='curline'><a href='../S/1054.html#L61555'>pBt</a>              61555 ext/sqlite3/libsqlite/sqlite3.c           if( pCheck-&gt;pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61570'>pBt</a>              61570 ext/sqlite3/libsqlite/sqlite3.c       if( pCheck-&gt;pBt-&gt;autoVacuum &amp;&amp; N&gt;0 ){</span>
<span class='curline'><a href='../S/1054.html#L61663'>pBt</a>              61663 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt;</span>
<span class='curline'><a href='../S/1054.html#L61675'>pBt</a>              61675 ext/sqlite3/libsqlite/sqlite3.c   pBt = pCheck-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61676'>pBt</a>              61676 ext/sqlite3/libsqlite/sqlite3.c   usableSize = pBt-&gt;usableSize;</span>
<span class='curline'><a href='../S/1054.html#L61681'>pBt</a>              61681 ext/sqlite3/libsqlite/sqlite3.c   if( (rc = btreeGetPage(pBt, (Pgno)iPage, &amp;pPage, 0))!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L61728'>pBt</a>              61728 ext/sqlite3/libsqlite/sqlite3.c      &amp;&amp; (&amp;pCell[info.iOverflow]&lt;=&amp;pPage-&gt;aData[pBt-&gt;usableSize])</span>
<span class='curline'><a href='../S/1054.html#L61733'>pBt</a>              61733 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61745'>pBt</a>              61745 ext/sqlite3/libsqlite/sqlite3.c       if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61762'>pBt</a>              61762 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;autoVacuum ){</span>
<span class='curline'><a href='../S/1054.html#L61811'>pBt</a>              61811 ext/sqlite3/libsqlite/sqlite3.c   heap = (u32*)sqlite3PageMalloc( pBt-&gt;pageSize );</span>
<span class='curline'><a href='../S/1054.html#L61924'>pBt</a>              61924 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L61928'>pBt</a>              61928 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;inTrans&gt;TRANS_NONE &amp;&amp; pBt-&gt;inTransaction&gt;TRANS_NONE );</span>
<span class='curline'><a href='../S/1054.html#L61929'>pBt</a>              61929 ext/sqlite3/libsqlite/sqlite3.c   nRef = sqlite3PagerRefcount(pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L61930'>pBt</a>              61930 ext/sqlite3/libsqlite/sqlite3.c   sCheck.pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L61931'>pBt</a>              61931 ext/sqlite3/libsqlite/sqlite3.c   sCheck.pPager = pBt-&gt;pPager;</span>
<span class='curline'><a href='../S/1054.html#L61932'>pBt</a>              61932 ext/sqlite3/libsqlite/sqlite3.c   sCheck.nPage = btreePagecount(sCheck.pBt);</span>
<span class='curline'><a href='../S/1054.html#L61951'>pBt</a>              61951 ext/sqlite3/libsqlite/sqlite3.c   i = PENDING_BYTE_PAGE(pBt);</span>
<span class='curline'><a href='../S/1054.html#L61958'>pBt</a>              61958 ext/sqlite3/libsqlite/sqlite3.c   checkList(&amp;sCheck, 1, get4byte(&amp;pBt-&gt;pPage1-&gt;aData[32]),</span>
<span class='curline'><a href='../S/1054.html#L61959'>pBt</a>              61959 ext/sqlite3/libsqlite/sqlite3.c             get4byte(&amp;pBt-&gt;pPage1-&gt;aData[36]));</span>
<span class='curline'><a href='../S/1054.html#L61967'>pBt</a>              61967 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;autoVacuum &amp;&amp; aRoot[i]&gt;1 ){</span>
<span class='curline'><a href='../S/1054.html#L61988'>pBt</a>              61988 ext/sqlite3/libsqlite/sqlite3.c        (PTRMAP_PAGENO(pBt, i)!=i || !pBt-&gt;autoVacuum) ){</span>
<span class='curline'><a href='../S/1054.html#L61992'>pBt</a>              61992 ext/sqlite3/libsqlite/sqlite3.c        (PTRMAP_PAGENO(pBt, i)==i &amp;&amp; pBt-&gt;autoVacuum) ){</span>
<span class='curline'><a href='../S/1054.html#L62002'>pBt</a>              62002 ext/sqlite3/libsqlite/sqlite3.c   if( NEVER(nRef != sqlite3PagerRefcount(pBt-&gt;pPager)) ){</span>
<span class='curline'><a href='../S/1054.html#L62005'>pBt</a>              62005 ext/sqlite3/libsqlite/sqlite3.c       nRef, sqlite3PagerRefcount(pBt-&gt;pPager)</span>
<span class='curline'><a href='../S/1054.html#L62032'>pBt</a>              62032 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pBt-&gt;pPager!=0 );</span>
<span class='curline'><a href='../S/1054.html#L62033'>pBt</a>              62033 ext/sqlite3/libsqlite/sqlite3.c   return sqlite3PagerFilename(p-&gt;pBt-&gt;pPager, 1);</span>
<span class='curline'><a href='../S/1054.html#L62045'>pBt</a>              62045 ext/sqlite3/libsqlite/sqlite3.c   assert( p-&gt;pBt-&gt;pPager!=0 );</span>
<span class='curline'><a href='../S/1054.html#L62046'>pBt</a>              62046 ext/sqlite3/libsqlite/sqlite3.c   return sqlite3PagerJournalname(p-&gt;pBt-&gt;pPager);</span>
<span class='curline'><a href='../S/1054.html#L62069'>pBt</a>              62069 ext/sqlite3/libsqlite/sqlite3.c     BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L62071'>pBt</a>              62071 ext/sqlite3/libsqlite/sqlite3.c     if( pBt-&gt;inTransaction!=TRANS_NONE ){</span>
<span class='curline'><a href='../S/1054.html#L62074'>pBt</a>              62074 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerCheckpoint(pBt-&gt;pPager, eMode, pnLog, pnCkpt);</span>
<span class='curline'><a href='../S/1054.html#L62118'>pBt</a>              62118 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = p-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L62120'>pBt</a>              62120 ext/sqlite3/libsqlite/sqlite3.c   if( !pBt-&gt;pSchema &amp;&amp; nBytes ){</span>
<span class='curline'><a href='../S/1054.html#L62121'>pBt</a>              62121 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;pSchema = sqlite3DbMallocZero(0, nBytes);</span>
<span class='curline'><a href='../S/1054.html#L62122'>pBt</a>              62122 ext/sqlite3/libsqlite/sqlite3.c     pBt-&gt;xFreeSchema = xFree;</span>
<span class='curline'><a href='../S/1054.html#L62125'>pBt</a>              62125 ext/sqlite3/libsqlite/sqlite3.c   return pBt-&gt;pSchema;</span>
<span class='curline'><a href='../S/1054.html#L62203'>pBt</a>              62203 ext/sqlite3/libsqlite/sqlite3.c   VVA_ONLY(rc =) saveAllCursors(pCsr-&gt;pBt, pCsr-&gt;pgnoRoot, pCsr);</span>
<span class='curline'><a href='../S/1054.html#L62216'>pBt</a>              62216 ext/sqlite3/libsqlite/sqlite3.c   assert( (pCsr-&gt;pBt-&gt;btsFlags &amp; BTS_READ_ONLY)==0</span>
<span class='curline'><a href='../S/1054.html#L62217'>pBt</a>              62217 ext/sqlite3/libsqlite/sqlite3.c               &amp;&amp; pCsr-&gt;pBt-&gt;inTransaction==TRANS_WRITE );</span>
<span class='curline'><a href='../S/1054.html#L62239'>pBt</a>              62239 ext/sqlite3/libsqlite/sqlite3.c   BtShared *pBt = pBtree-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L62247'>pBt</a>              62247 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;btsFlags &amp;= ~BTS_NO_WAL;</span>
<span class='curline'><a href='../S/1054.html#L62248'>pBt</a>              62248 ext/sqlite3/libsqlite/sqlite3.c   if( iVersion==1 ) pBt-&gt;btsFlags |= BTS_NO_WAL;</span>
<span class='curline'><a href='../S/1054.html#L62252'>pBt</a>              62252 ext/sqlite3/libsqlite/sqlite3.c     u8 *aData = pBt-&gt;pPage1-&gt;aData;</span>
<span class='curline'><a href='../S/1054.html#L62256'>pBt</a>              62256 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3PagerWrite(pBt-&gt;pPage1-&gt;pDbPage);</span>
<span class='curline'><a href='../S/1054.html#L62265'>pBt</a>              62265 ext/sqlite3/libsqlite/sqlite3.c   pBt-&gt;btsFlags &amp;= ~BTS_NO_WAL;</span>
<span class='curline'><a href='../S/1054.html#L62291'>pBt</a>              62291 ext/sqlite3/libsqlite/sqlite3.c   return (p-&gt;pBt-&gt;btsFlags &amp; BTS_READ_ONLY)!=0;</span>
<span class='curline'><a href='../S/1054.html#L62410'>pBt</a>              62410 ext/sqlite3/libsqlite/sqlite3.c   return pDb-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L62556'>pBt</a>              62556 ext/sqlite3/libsqlite/sqlite3.c   assert( iSrcPg!=PENDING_BYTE_PAGE(p-&gt;pSrc-&gt;pBt) );</span>
<span class='curline'><a href='../S/1054.html#L62593'>pBt</a>              62593 ext/sqlite3/libsqlite/sqlite3.c     if( iDest==PENDING_BYTE_PAGE(p-&gt;pDest-&gt;pBt) ) continue;</span>
<span class='curline'><a href='../S/1054.html#L62679'>pBt</a>              62679 ext/sqlite3/libsqlite/sqlite3.c     if( p-&gt;pDestDb &amp;&amp; p-&gt;pSrc-&gt;pBt-&gt;inTransaction==TRANS_WRITE ){</span>
<span class='curline'><a href='../S/1054.html#L62718'>pBt</a>              62718 ext/sqlite3/libsqlite/sqlite3.c       if( iSrcPg!=PENDING_BYTE_PAGE(p-&gt;pSrc-&gt;pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L62779'>pBt</a>              62779 ext/sqlite3/libsqlite/sqlite3.c           if( nDestTruncate==(int)PENDING_BYTE_PAGE(p-&gt;pDest-&gt;pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L62807'>pBt</a>              62807 ext/sqlite3/libsqlite/sqlite3.c                 nDestTruncate==(int)(PENDING_BYTE_PAGE(p-&gt;pDest-&gt;pBt)-1)</span>
<span class='curline'><a href='../S/1054.html#L62819'>pBt</a>              62819 ext/sqlite3/libsqlite/sqlite3.c             if( iPg!=PENDING_BYTE_PAGE(p-&gt;pDest-&gt;pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L62989'>pBt</a>              62989 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3_mutex_held(p-&gt;pSrc-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L63022'>pBt</a>              63022 ext/sqlite3/libsqlite/sqlite3.c     assert( sqlite3_mutex_held(p-&gt;pSrc-&gt;pBt-&gt;mutex) );</span>
<span class='curline'><a href='../S/1054.html#L63074'>pBt</a>              63074 ext/sqlite3/libsqlite/sqlite3.c     pTo-&gt;pBt-&gt;btsFlags &amp;= ~BTS_PAGESIZE_FIXED;</span>
<span class='curline'><a href='../S/1054.html#L65944'>pBt</a>              65944 ext/sqlite3/libsqlite/sqlite3.c   if( i!=1 &amp;&amp; sqlite3BtreeSharable(p-&gt;db-&gt;aDb[i].pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L65981'>pBt</a>              65981 ext/sqlite3/libsqlite/sqlite3.c     if( i!=1 &amp;&amp; DbMaskTest(p-&gt;lockMask,i) &amp;&amp; ALWAYS(aDb[i].pBt!=0) ){</span>
<span class='curline'><a href='../S/1054.html#L65982'>pBt</a>              65982 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeEnter(aDb[i].pBt);</span>
<span class='curline'><a href='../S/1054.html#L66002'>pBt</a>              66002 ext/sqlite3/libsqlite/sqlite3.c     if( i!=1 &amp;&amp; DbMaskTest(p-&gt;lockMask,i) &amp;&amp; ALWAYS(aDb[i].pBt!=0) ){</span>
<span class='curline'><a href='../S/1054.html#L66003'>pBt</a>              66003 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeLeave(aDb[i].pBt);</span>
<span class='curline'><a href='../S/1054.html#L66556'>pBt</a>              66556 ext/sqlite3/libsqlite/sqlite3.c   if( pCx-&gt;pBt ){</span>
<span class='curline'><a href='../S/1054.html#L66557'>pBt</a>              66557 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeClose(pCx-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L66758'>pBt</a>              66758 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66759'>pBt</a>              66759 ext/sqlite3/libsqlite/sqlite3.c     if( sqlite3BtreeIsInTrans(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L66762'>pBt</a>              66762 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeEnter(pBt);</span>
<span class='curline'><a href='../S/1054.html#L66763'>pBt</a>              66763 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3PagerExclusiveLock(sqlite3BtreePager(pBt));</span>
<span class='curline'><a href='../S/1054.html#L66764'>pBt</a>              66764 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeLeave(pBt);</span>
<span class='curline'><a href='../S/1054.html#L66788'>pBt</a>              66788 ext/sqlite3/libsqlite/sqlite3.c   if( 0==sqlite3Strlen30(sqlite3BtreeGetFilename(db-&gt;aDb[0].pBt))</span>
<span class='curline'><a href='../S/1054.html#L66792'>pBt</a>              66792 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66793'>pBt</a>              66793 ext/sqlite3/libsqlite/sqlite3.c       if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L66794'>pBt</a>              66794 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeCommitPhaseOne(pBt, 0);</span>
<span class='curline'><a href='../S/1054.html#L66804'>pBt</a>              66804 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66805'>pBt</a>              66805 ext/sqlite3/libsqlite/sqlite3.c       if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L66806'>pBt</a>              66806 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeCommitPhaseTwo(pBt, 0);</span>
<span class='curline'><a href='../S/1054.html#L66823'>pBt</a>              66823 ext/sqlite3/libsqlite/sqlite3.c     char const *zMainFile = sqlite3BtreeGetFilename(db-&gt;aDb[0].pBt);</span>
<span class='curline'><a href='../S/1054.html#L66874'>pBt</a>              66874 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66875'>pBt</a>              66875 ext/sqlite3/libsqlite/sqlite3.c       if( sqlite3BtreeIsInTrans(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L66876'>pBt</a>              66876 ext/sqlite3/libsqlite/sqlite3.c         char const *zFile = sqlite3BtreeGetJournalname(pBt);</span>
<span class='curline'><a href='../S/1054.html#L66881'>pBt</a>              66881 ext/sqlite3/libsqlite/sqlite3.c         if( !needSync &amp;&amp; !sqlite3BtreeSyncDisabled(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L66919'>pBt</a>              66919 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66920'>pBt</a>              66920 ext/sqlite3/libsqlite/sqlite3.c       if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L66921'>pBt</a>              66921 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeCommitPhaseOne(pBt, zMaster);</span>
<span class='curline'><a href='../S/1054.html#L66952'>pBt</a>              66952 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L66953'>pBt</a>              66953 ext/sqlite3/libsqlite/sqlite3.c       if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L66954'>pBt</a>              66954 ext/sqlite3/libsqlite/sqlite3.c         sqlite3BtreeCommitPhaseTwo(pBt, 1);</span>
<span class='curline'><a href='../S/1054.html#L67028'>pBt</a>              67028 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L67029'>pBt</a>              67029 ext/sqlite3/libsqlite/sqlite3.c       if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L67031'>pBt</a>              67031 ext/sqlite3/libsqlite/sqlite3.c           rc2 = sqlite3BtreeSavepoint(pBt, SAVEPOINT_ROLLBACK, iSavepoint);</span>
<span class='curline'><a href='../S/1054.html#L67034'>pBt</a>              67034 ext/sqlite3/libsqlite/sqlite3.c           rc2 = sqlite3BtreeSavepoint(pBt, SAVEPOINT_RELEASE, iSavepoint);</span>
<span class='curline'><a href='../S/1054.html#L69383'>pBt</a>              69383 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L69384'>pBt</a>              69384 ext/sqlite3/libsqlite/sqlite3.c     if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L69386'>pBt</a>              69386 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeEnter(pBt);</span>
<span class='curline'><a href='../S/1054.html#L69387'>pBt</a>              69387 ext/sqlite3/libsqlite/sqlite3.c       nEntry = sqlite3PagerWalCallback(sqlite3BtreePager(pBt));</span>
<span class='curline'><a href='../S/1054.html#L69388'>pBt</a>              69388 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeLeave(pBt);</span>
<span class='curline'><a href='../S/1054.html#L73715'>pBt</a>              73715 ext/sqlite3/libsqlite/sqlite3.c             rc = sqlite3BtreeTripAllCursors(db-&gt;aDb[ii].pBt,</span>
<span class='curline'><a href='../S/1054.html#L73724'>pBt</a>              73724 ext/sqlite3/libsqlite/sqlite3.c           rc = sqlite3BtreeSavepoint(db-&gt;aDb[ii].pBt, p1, iSavepoint);</span>
<span class='curline'><a href='../S/1054.html#L73881'>pBt</a>              73881 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L73893'>pBt</a>              73893 ext/sqlite3/libsqlite/sqlite3.c   pBt = db-&gt;aDb[pOp-&gt;p1].pBt;</span>
<span class='curline'><a href='../S/1054.html#L73895'>pBt</a>              73895 ext/sqlite3/libsqlite/sqlite3.c   if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L73896'>pBt</a>              73896 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeBeginTrans(pBt, pOp-&gt;p2);</span>
<span class='curline'><a href='../S/1054.html#L73909'>pBt</a>              73909 ext/sqlite3/libsqlite/sqlite3.c       assert( sqlite3BtreeIsInTrans(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L73918'>pBt</a>              73918 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeBeginStmt(pBt, p-&gt;iStatement);</span>
<span class='curline'><a href='../S/1054.html#L73934'>pBt</a>              73934 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeGetMeta(pBt, BTREE_SCHEMA_VERSION, (u32 *)&amp;iMeta);</span>
<span class='curline'><a href='../S/1054.html#L73987'>pBt</a>              73987 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;aDb[iDb].pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L73990'>pBt</a>              73990 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeGetMeta(db-&gt;aDb[iDb].pBt, iCookie, (u32 *)&amp;iMeta);</span>
<span class='curline'><a href='../S/1054.html#L74013'>pBt</a>              74013 ext/sqlite3/libsqlite/sqlite3.c   assert( pDb-&gt;pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L74018'>pBt</a>              74018 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeUpdateMeta(pDb-&gt;pBt, pOp-&gt;p2, (int)pIn3-&gt;u.i);</span>
<span class='curline'><a href='../S/1054.html#L74141'>pBt</a>              74141 ext/sqlite3/libsqlite/sqlite3.c   pX = pDb-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L74244'>pBt</a>              74244 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeOpen(db-&gt;pVfs, 0, db, &amp;pCx-&gt;pBt, </span>
<span class='curline'><a href='../S/1054.html#L74247'>pBt</a>              74247 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeBeginTrans(pCx-&gt;pBt, 1);</span>
<span class='curline'><a href='../S/1054.html#L74258'>pBt</a>              74258 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeCreateTable(pCx-&gt;pBt, &amp;pgno, BTREE_BLOBKEY | pOp-&gt;p5); </span>
<span class='curline'><a href='../S/1054.html#L74264'>pBt</a>              74264 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeCursor(pCx-&gt;pBt, pgno, 1, pKeyInfo, pCx-&gt;pCursor);</span>
<span class='curline'><a href='../S/1054.html#L74268'>pBt</a>              74268 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeCursor(pCx-&gt;pBt, MASTER_ROOT, 1, 0, pCx-&gt;pCursor);</span>
<span class='curline'><a href='../S/1054.html#L75822'>pBt</a>              75822 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeDropTable(db-&gt;aDb[iDb].pBt, pOp-&gt;p1, &amp;iMoved);</span>
<span class='curline'><a href='../S/1054.html#L75862'>pBt</a>              75862 ext/sqlite3/libsqlite/sqlite3.c       db-&gt;aDb[pOp-&gt;p2].pBt, pOp-&gt;p1, (pOp-&gt;p3 ? &amp;nChange : 0)</span>
<span class='curline'><a href='../S/1054.html#L75934'>pBt</a>              75934 ext/sqlite3/libsqlite/sqlite3.c   assert( pDb-&gt;pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L75941'>pBt</a>              75941 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeCreateTable(pDb-&gt;pBt, &amp;pgno, flags);</span>
<span class='curline'><a href='../S/1054.html#L75966'>pBt</a>              75966 ext/sqlite3/libsqlite/sqlite3.c     assert( iDb==1 || sqlite3BtreeHoldsMutex(db-&gt;aDb[iDb].pBt) );</span>
<span class='curline'><a href='../S/1054.html#L76100'>pBt</a>              76100 ext/sqlite3/libsqlite/sqlite3.c   z = sqlite3BtreeIntegrityCheck(db-&gt;aDb[pOp-&gt;p5].pBt, aRoot, nRoot,</span>
<span class='curline'><a href='../S/1054.html#L76664'>pBt</a>              76664 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;                     /* Btree to change journal mode of */</span>
<span class='curline'><a href='../S/1054.html#L76685'>pBt</a>              76685 ext/sqlite3/libsqlite/sqlite3.c   pBt = db-&gt;aDb[pOp-&gt;p1].pBt;</span>
<span class='curline'><a href='../S/1054.html#L76686'>pBt</a>              76686 ext/sqlite3/libsqlite/sqlite3.c   pPager = sqlite3BtreePager(pBt);</span>
<span class='curline'><a href='../S/1054.html#L76735'>pBt</a>              76735 ext/sqlite3/libsqlite/sqlite3.c       assert( sqlite3BtreeIsInTrans(pBt)==0 );</span>
<span class='curline'><a href='../S/1054.html#L76737'>pBt</a>              76737 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3BtreeSetVersion(pBt, (eNew==PAGER_JOURNALMODE_WAL ? 2 : 1));</span>
<span class='curline'><a href='../S/1054.html#L76779'>pBt</a>              76779 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L76784'>pBt</a>              76784 ext/sqlite3/libsqlite/sqlite3.c   pBt = db-&gt;aDb[pOp-&gt;p1].pBt;</span>
<span class='curline'><a href='../S/1054.html#L76785'>pBt</a>              76785 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeIncrVacuum(pBt);</span>
<span class='curline'><a href='../S/1054.html#L76837'>pBt</a>              76837 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeLockTable(db-&gt;aDb[p1].pBt, pOp-&gt;p2, isWriteLock);</span>
<span class='curline'><a href='../S/1054.html#L77224'>pBt</a>              77224 ext/sqlite3/libsqlite/sqlite3.c   pOut-&gt;u.i = sqlite3BtreeLastPage(db-&gt;aDb[pOp-&gt;p1].pBt);</span>
<span class='curline'><a href='../S/1054.html#L77241'>pBt</a>              77241 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L77244'>pBt</a>              77244 ext/sqlite3/libsqlite/sqlite3.c   pBt = db-&gt;aDb[pOp-&gt;p1].pBt;</span>
<span class='curline'><a href='../S/1054.html#L77247'>pBt</a>              77247 ext/sqlite3/libsqlite/sqlite3.c     newMax = sqlite3BtreeLastPage(pBt);</span>
<span class='curline'><a href='../S/1054.html#L77250'>pBt</a>              77250 ext/sqlite3/libsqlite/sqlite3.c   pOut-&gt;u.i = sqlite3BtreeMaxPageCount(pBt, newMax);</span>
<span class='curline'><a href='../S/1054.html#L78861'>pBt</a>              78861 ext/sqlite3/libsqlite/sqlite3.c   assert( pCsr-&gt;pKeyInfo &amp;&amp; pCsr-&gt;pBt==0 );</span>
<span class='curline'><a href='../S/1054.html#L78877'>pBt</a>              78877 ext/sqlite3/libsqlite/sqlite3.c     pSorter-&gt;pgsz = pgsz = sqlite3BtreeGetPageSize(db-&gt;aDb[0].pBt);</span>
<span class='curline'><a href='../S/1054.html#L89900'>pBt</a>              89900 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;aDb[iDb].pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L90092'>pBt</a>              90092 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeOpen(pVfs, zPath, db, &amp;aNew-&gt;pBt, 0, flags);</span>
<span class='curline'><a href='../S/1054.html#L90100'>pBt</a>              90100 ext/sqlite3/libsqlite/sqlite3.c     aNew-&gt;pSchema = sqlite3SchemaGet(db, aNew-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L90108'>pBt</a>              90108 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeEnter(aNew-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L90109'>pBt</a>              90109 ext/sqlite3/libsqlite/sqlite3.c     pPager = sqlite3BtreePager(aNew-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L90111'>pBt</a>              90111 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeSecureDelete(aNew-&gt;pBt,</span>
<span class='curline'><a href='../S/1054.html#L90112'>pBt</a>              90112 ext/sqlite3/libsqlite/sqlite3.c                              sqlite3BtreeSecureDelete(db-&gt;aDb[0].pBt,-1) );</span>
<span class='curline'><a href='../S/1054.html#L90114'>pBt</a>              90114 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeSetPagerFlags(aNew-&gt;pBt, 3 | (db-&gt;flags &amp; PAGER_FLAGS_MASK));</span>
<span class='curline'><a href='../S/1054.html#L90116'>pBt</a>              90116 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeLeave(aNew-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L90149'>pBt</a>              90149 ext/sqlite3/libsqlite/sqlite3.c         if( nKey&gt;0 || sqlite3BtreeGetOptimalReserve(db-&gt;aDb[0].pBt)&gt;0 ){</span>
<span class='curline'><a href='../S/1054.html#L90179'>pBt</a>              90179 ext/sqlite3/libsqlite/sqlite3.c     if( db-&gt;aDb[iDb].pBt ){</span>
<span class='curline'><a href='../S/1054.html#L90180'>pBt</a>              90180 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeClose(db-&gt;aDb[iDb].pBt);</span>
<span class='curline'><a href='../S/1054.html#L90181'>pBt</a>              90181 ext/sqlite3/libsqlite/sqlite3.c       db-&gt;aDb[iDb].pBt = 0;</span>
<span class='curline'><a href='../S/1054.html#L90231'>pBt</a>              90231 ext/sqlite3/libsqlite/sqlite3.c     if( pDb-&gt;pBt==0 ) continue;</span>
<span class='curline'><a href='../S/1054.html#L90248'>pBt</a>              90248 ext/sqlite3/libsqlite/sqlite3.c   if( sqlite3BtreeIsInReadTrans(pDb-&gt;pBt) || sqlite3BtreeIsInBackup(pDb-&gt;pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L90253'>pBt</a>              90253 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeClose(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L90254'>pBt</a>              90254 ext/sqlite3/libsqlite/sqlite3.c   pDb-&gt;pBt = 0;</span>
<span class='curline'><a href='../S/1054.html#L91291'>pBt</a>              91291 ext/sqlite3/libsqlite/sqlite3.c     if( pDb-&gt;pBt==0 ){</span>
<span class='curline'><a href='../S/1054.html#L92159'>pBt</a>              92159 ext/sqlite3/libsqlite/sqlite3.c    &amp;&amp; !sqlite3BtreeIsReadonly(db-&gt;aDb[db-&gt;init.iDb].pBt)</span>
<span class='curline'><a href='../S/1054.html#L94677'>pBt</a>              94677 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;aDb[1].pBt==0 &amp;&amp; !pParse-&gt;explain ){</span>
<span class='curline'><a href='../S/1054.html#L94679'>pBt</a>              94679 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L94687'>pBt</a>              94687 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeOpen(db-&gt;pVfs, 0, db, &amp;pBt, 0, flags);</span>
<span class='curline'><a href='../S/1054.html#L94694'>pBt</a>              94694 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;aDb[1].pBt = pBt;</span>
<span class='curline'><a href='../S/1054.html#L94696'>pBt</a>              94696 ext/sqlite3/libsqlite/sqlite3.c     if( SQLITE_NOMEM==sqlite3BtreeSetPageSize(pBt, db-&gt;nextPagesize, -1, 0) ){</span>
<span class='curline'><a href='../S/1054.html#L94715'>pBt</a>              94715 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;aDb[iDb].pBt!=0 || iDb==1 );</span>
<span class='curline'><a href='../S/1054.html#L94736'>pBt</a>              94736 ext/sqlite3/libsqlite/sqlite3.c     if( pDb-&gt;pBt &amp;&amp; (!zDb || 0==sqlite3StrICmp(zDb, pDb-&gt;zName)) ){</span>
<span class='curline'><a href='../S/1054.html#L95565'>pBt</a>              95565 ext/sqlite3/libsqlite/sqlite3.c SQLITE_PRIVATE Schema *sqlite3SchemaGet(sqlite3 *db, Btree *pBt){</span>
<span class='curline'><a href='../S/1054.html#L95567'>pBt</a>              95567 ext/sqlite3/libsqlite/sqlite3.c   if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L95568'>pBt</a>              95568 ext/sqlite3/libsqlite/sqlite3.c     p = (Schema *)sqlite3BtreeSchema(pBt, sizeof(Schema), sqlite3SchemaClear);</span>
<span class='curline'><a href='../S/1054.html#L103720'>pBt</a>              103720 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;aDb[1].pBt!=0 ){</span>
<span class='curline'><a href='../S/1054.html#L103721'>pBt</a>              103721 ext/sqlite3/libsqlite/sqlite3.c     if( !db-&gt;autoCommit || sqlite3BtreeIsInReadTrans(db-&gt;aDb[1].pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L103726'>pBt</a>              103726 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeClose(db-&gt;aDb[1].pBt);</span>
<span class='curline'><a href='../S/1054.html#L103727'>pBt</a>              103727 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;aDb[1].pBt = 0;</span>
<span class='curline'><a href='../S/1054.html#L103785'>pBt</a>              103785 ext/sqlite3/libsqlite/sqlite3.c       if( pDb-&gt;pBt ){</span>
<span class='curline'><a href='../S/1054.html#L103786'>pBt</a>              103786 ext/sqlite3/libsqlite/sqlite3.c         sqlite3BtreeSetPagerFlags(pDb-&gt;pBt,</span>
<span class='curline'><a href='../S/1054.html#L104020'>pBt</a>              104020 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeSetCacheSize(pDb-&gt;pBt, pDb-&gt;pSchema-&gt;cache_size);</span>
<span class='curline'><a href='../S/1054.html#L104037'>pBt</a>              104037 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = pDb-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L104038'>pBt</a>              104038 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L104040'>pBt</a>              104040 ext/sqlite3/libsqlite/sqlite3.c       int size = ALWAYS(pBt) ? sqlite3BtreeGetPageSize(pBt) : 0;</span>
<span class='curline'><a href='../S/1054.html#L104047'>pBt</a>              104047 ext/sqlite3/libsqlite/sqlite3.c       if( SQLITE_NOMEM==sqlite3BtreeSetPageSize(pBt, db-&gt;nextPagesize,-1,0) ){</span>
<span class='curline'><a href='../S/1054.html#L104063'>pBt</a>              104063 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = pDb-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L104065'>pBt</a>              104065 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L104072'>pBt</a>              104072 ext/sqlite3/libsqlite/sqlite3.c         sqlite3BtreeSecureDelete(db-&gt;aDb[ii].pBt, b);</span>
<span class='curline'><a href='../S/1054.html#L104075'>pBt</a>              104075 ext/sqlite3/libsqlite/sqlite3.c     b = sqlite3BtreeSecureDelete(pBt, b);</span>
<span class='curline'><a href='../S/1054.html#L104141'>pBt</a>              104141 ext/sqlite3/libsqlite/sqlite3.c           pPager = sqlite3BtreePager(db-&gt;aDb[ii].pBt);</span>
<span class='curline'><a href='../S/1054.html#L104146'>pBt</a>              104146 ext/sqlite3/libsqlite/sqlite3.c       pPager = sqlite3BtreePager(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L104196'>pBt</a>              104196 ext/sqlite3/libsqlite/sqlite3.c       if( db-&gt;aDb[ii].pBt &amp;&amp; (ii==iDb || pId2-&gt;n==0) ){</span>
<span class='curline'><a href='../S/1054.html#L104212'>pBt</a>              104212 ext/sqlite3/libsqlite/sqlite3.c     Pager *pPager = sqlite3BtreePager(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L104234'>pBt</a>              104234 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = pDb-&gt;pBt;</span>
<span class='curline'><a href='../S/1054.html#L104235'>pBt</a>              104235 ext/sqlite3/libsqlite/sqlite3.c     assert( pBt!=0 );</span>
<span class='curline'><a href='../S/1054.html#L104237'>pBt</a>              104237 ext/sqlite3/libsqlite/sqlite3.c       returnSingleInt(pParse, "auto_vacuum", sqlite3BtreeGetAutoVacuum(pBt));</span>
<span class='curline'><a href='../S/1054.html#L104247'>pBt</a>              104247 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeSetAutoVacuum(pBt, eAuto);</span>
<span class='curline'><a href='../S/1054.html#L104318'>pBt</a>              104318 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeSetCacheSize(pDb-&gt;pBt, pDb-&gt;pSchema-&gt;cache_size);</span>
<span class='curline'><a href='../S/1054.html#L104347'>pBt</a>              104347 ext/sqlite3/libsqlite/sqlite3.c         if( db-&gt;aDb[ii].pBt &amp;&amp; (ii==iDb || pId2-&gt;n==0) ){</span>
<span class='curline'><a href='../S/1054.html#L104348'>pBt</a>              104348 ext/sqlite3/libsqlite/sqlite3.c           sqlite3BtreeSetMmapLimit(db-&gt;aDb[ii].pBt, sz);</span>
<span class='curline'><a href='../S/1054.html#L104489'>pBt</a>              104489 ext/sqlite3/libsqlite/sqlite3.c       Pager *pPager = sqlite3BtreePager(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L104503'>pBt</a>              104503 ext/sqlite3/libsqlite/sqlite3.c       Pager *pPager = sqlite3BtreePager(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L104760'>pBt</a>              104760 ext/sqlite3/libsqlite/sqlite3.c       if( db-&gt;aDb[i].pBt==0 ) continue;</span>
<span class='curline'><a href='../S/1054.html#L104765'>pBt</a>              104765 ext/sqlite3/libsqlite/sqlite3.c            sqlite3BtreeGetFilename(db-&gt;aDb[i].pBt), 0);</span>
<span class='curline'><a href='../S/1054.html#L105501'>pBt</a>              105501 ext/sqlite3/libsqlite/sqlite3.c       Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L105506'>pBt</a>              105506 ext/sqlite3/libsqlite/sqlite3.c       pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L105507'>pBt</a>              105507 ext/sqlite3/libsqlite/sqlite3.c       if( pBt==0 || sqlite3BtreePager(pBt)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L105750'>pBt</a>              105750 ext/sqlite3/libsqlite/sqlite3.c   assert( iDb==1 || sqlite3BtreeHoldsMutex(db-&gt;aDb[iDb].pBt) );</span>
<span class='curline'><a href='../S/1054.html#L105785'>pBt</a>              105785 ext/sqlite3/libsqlite/sqlite3.c   if( pDb-&gt;pBt==0 ){</span>
<span class='curline'><a href='../S/1054.html#L105795'>pBt</a>              105795 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeEnter(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L105796'>pBt</a>              105796 ext/sqlite3/libsqlite/sqlite3.c   if( !sqlite3BtreeIsInReadTrans(pDb-&gt;pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L105797'>pBt</a>              105797 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3BtreeBeginTrans(pDb-&gt;pBt, 0);</span>
<span class='curline'><a href='../S/1054.html#L105823'>pBt</a>              105823 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeGetMeta(pDb-&gt;pBt, i+1, (u32 *)&amp;meta[i]);</span>
<span class='curline'><a href='../S/1054.html#L105865'>pBt</a>              105865 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeSetCacheSize(pDb-&gt;pBt, pDb-&gt;pSchema-&gt;cache_size);</span>
<span class='curline'><a href='../S/1054.html#L105943'>pBt</a>              105943 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeCommit(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L105945'>pBt</a>              105945 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeLeave(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L105969'>pBt</a>              105969 ext/sqlite3/libsqlite/sqlite3.c   assert( sqlite3BtreeHoldsMutex(db-&gt;aDb[0].pBt) );</span>
<span class='curline'><a href='../S/1054.html#L106038'>pBt</a>              106038 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[iDb].pBt;     /* Btree database to read cookie from */</span>
<span class='curline'><a href='../S/1054.html#L106039'>pBt</a>              106039 ext/sqlite3/libsqlite/sqlite3.c     if( pBt==0 ) continue;</span>
<span class='curline'><a href='../S/1054.html#L106044'>pBt</a>              106044 ext/sqlite3/libsqlite/sqlite3.c     if( !sqlite3BtreeIsInReadTrans(pBt) ){</span>
<span class='curline'><a href='../S/1054.html#L106045'>pBt</a>              106045 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeBeginTrans(pBt, 0);</span>
<span class='curline'><a href='../S/1054.html#L106056'>pBt</a>              106056 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeGetMeta(pBt, BTREE_SCHEMA_VERSION, (u32 *)&amp;cookie);</span>
<span class='curline'><a href='../S/1054.html#L106065'>pBt</a>              106065 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeCommit(pBt);</span>
<span class='curline'><a href='../S/1054.html#L106165'>pBt</a>              106165 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L106166'>pBt</a>              106166 ext/sqlite3/libsqlite/sqlite3.c     if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L106167'>pBt</a>              106167 ext/sqlite3/libsqlite/sqlite3.c       assert( sqlite3BtreeHoldsMutex(pBt) );</span>
<span class='curline'><a href='../S/1054.html#L106168'>pBt</a>              106168 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeSchemaLocked(pBt);</span>
<span class='curline'><a href='../S/1054.html#L114323'>pBt</a>              114323 ext/sqlite3/libsqlite/sqlite3.c   pMain = db-&gt;aDb[0].pBt;</span>
<span class='curline'><a href='../S/1054.html#L114352'>pBt</a>              114352 ext/sqlite3/libsqlite/sqlite3.c   pTemp = db-&gt;aDb[db-&gt;nDb-1].pBt;</span>
<span class='curline'><a href='../S/1054.html#L114534'>pBt</a>              114534 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeClose(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L114535'>pBt</a>              114535 ext/sqlite3/libsqlite/sqlite3.c     pDb-&gt;pBt = 0;</span>
<span class='curline'><a href='../S/1054.html#L128715'>pBt</a>              128715 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L128716'>pBt</a>              128716 ext/sqlite3/libsqlite/sqlite3.c     if( pBt ){</span>
<span class='curline'><a href='../S/1054.html#L128717'>pBt</a>              128717 ext/sqlite3/libsqlite/sqlite3.c       Pager *pPager = sqlite3BtreePager(pBt);</span>
<span class='curline'><a href='../S/1054.html#L128951'>pBt</a>              128951 ext/sqlite3/libsqlite/sqlite3.c     Btree *pBt = db-&gt;aDb[j].pBt;</span>
<span class='curline'><a href='../S/1054.html#L128952'>pBt</a>              128952 ext/sqlite3/libsqlite/sqlite3.c     if( pBt &amp;&amp; sqlite3BtreeIsInBackup(pBt) ) return 1;</span>
<span class='curline'><a href='../S/1054.html#L129059'>pBt</a>              129059 ext/sqlite3/libsqlite/sqlite3.c     if( pDb-&gt;pBt ){</span>
<span class='curline'><a href='../S/1054.html#L129060'>pBt</a>              129060 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeClose(pDb-&gt;pBt);</span>
<span class='curline'><a href='../S/1054.html#L129061'>pBt</a>              129061 ext/sqlite3/libsqlite/sqlite3.c       pDb-&gt;pBt = 0;</span>
<span class='curline'><a href='../S/1054.html#L129168'>pBt</a>              129168 ext/sqlite3/libsqlite/sqlite3.c     Btree *p = db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L130035'>pBt</a>              130035 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3BtreeCheckpoint(db-&gt;aDb[i].pBt, eMode, pnLog, pnCkpt);</span>
<span class='curline'><a href='../S/1054.html#L130791'>pBt</a>              130791 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3BtreeOpen(db-&gt;pVfs, zOpen, db, &amp;db-&gt;aDb[0].pBt, 0,</span>
<span class='curline'><a href='../S/1054.html#L130800'>pBt</a>              130800 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeEnter(db-&gt;aDb[0].pBt);</span>
<span class='curline'><a href='../S/1054.html#L130801'>pBt</a>              130801 ext/sqlite3/libsqlite/sqlite3.c   db-&gt;aDb[0].pSchema = sqlite3SchemaGet(db, db-&gt;aDb[0].pBt);</span>
<span class='curline'><a href='../S/1054.html#L130803'>pBt</a>              130803 ext/sqlite3/libsqlite/sqlite3.c   sqlite3BtreeLeave(db-&gt;aDb[0].pBt);</span>
<span class='curline'><a href='../S/1054.html#L130883'>pBt</a>              130883 ext/sqlite3/libsqlite/sqlite3.c   sqlite3PagerLockingMode(sqlite3BtreePager(db-&gt;aDb[0].pBt),</span>
<span class='curline'><a href='../S/1054.html#L131534'>pBt</a>              131534 ext/sqlite3/libsqlite/sqlite3.c       sqlite3BtreeSetPageSize(db-&gt;aDb[0].pBt, 0, x, 0);</span>
<span class='curline'><a href='../S/1054.html#L131732'>pBt</a>              131732 ext/sqlite3/libsqlite/sqlite3.c     if( db-&gt;aDb[i].pBt</span>
<span class='curline'><a href='../S/1054.html#L131735'>pBt</a>              131735 ext/sqlite3/libsqlite/sqlite3.c       return db-&gt;aDb[i].pBt;</span>
<span class='curline'><a href='../S/1054.html#L131746'>pBt</a>              131746 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L131753'>pBt</a>              131753 ext/sqlite3/libsqlite/sqlite3.c   pBt = sqlite3DbNameToBtree(db, zDbName);</span>
<span class='curline'><a href='../S/1054.html#L131754'>pBt</a>              131754 ext/sqlite3/libsqlite/sqlite3.c   return pBt ? sqlite3BtreeGetFilename(pBt) : 0;</span>
<span class='curline'><a href='../S/1054.html#L131762'>pBt</a>              131762 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt;</span>
<span class='curline'><a href='../S/1054.html#L131769'>pBt</a>              131769 ext/sqlite3/libsqlite/sqlite3.c   pBt = sqlite3DbNameToBtree(db, zDbName);</span>
<span class='curline'><a href='../S/1054.html#L131770'>pBt</a>              131770 ext/sqlite3/libsqlite/sqlite3.c   return pBt ? sqlite3BtreeIsReadonly(pBt) : -1;</span>
<span class='curline'><a href='../S/1054.html#L155519'>pBt</a>              155519 ext/sqlite3/libsqlite/sqlite3.c static int statDecodePage(Btree *pBt, StatPage *p){</span>
<span class='curline'><a href='../S/1054.html#L155545'>pBt</a>              155545 ext/sqlite3/libsqlite/sqlite3.c   szPage = sqlite3BtreeGetPageSize(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155551'>pBt</a>              155551 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeEnter(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155552'>pBt</a>              155552 ext/sqlite3/libsqlite/sqlite3.c     nUsable = szPage - sqlite3BtreeGetReserveNoMutex(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155553'>pBt</a>              155553 ext/sqlite3/libsqlite/sqlite3.c     sqlite3BtreeLeave(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155594'>pBt</a>              155594 ext/sqlite3/libsqlite/sqlite3.c             rc = sqlite3PagerGet(sqlite3BtreePager(pBt), iPrev, &amp;pPg);</span>
<span class='curline'><a href='../S/1054.html#L155616'>pBt</a>              155616 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt = pTab-&gt;db-&gt;aDb[pTab-&gt;iDb].pBt;</span>
<span class='curline'><a href='../S/1054.html#L155617'>pBt</a>              155617 ext/sqlite3/libsqlite/sqlite3.c   Pager *pPager = sqlite3BtreePager(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155622'>pBt</a>              155622 ext/sqlite3/libsqlite/sqlite3.c   pCsr-&gt;szPage = sqlite3BtreeGetPageSize(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155645'>pBt</a>              155645 ext/sqlite3/libsqlite/sqlite3.c   Btree *pBt = pTab-&gt;db-&gt;aDb[pTab-&gt;iDb].pBt;</span>
<span class='curline'><a href='../S/1054.html#L155646'>pBt</a>              155646 ext/sqlite3/libsqlite/sqlite3.c   Pager *pPager = sqlite3BtreePager(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155681'>pBt</a>              155681 ext/sqlite3/libsqlite/sqlite3.c         sqlite3BtreeEnter(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155682'>pBt</a>              155682 ext/sqlite3/libsqlite/sqlite3.c         nUsable = sqlite3BtreeGetPageSize(pBt) - </span>
<span class='curline'><a href='../S/1054.html#L155683'>pBt</a>              155683 ext/sqlite3/libsqlite/sqlite3.c                         sqlite3BtreeGetReserveNoMutex(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155684'>pBt</a>              155684 ext/sqlite3/libsqlite/sqlite3.c         sqlite3BtreeLeave(pBt);</span>
<span class='curline'><a href='../S/1054.html#L155739'>pBt</a>              155739 ext/sqlite3/libsqlite/sqlite3.c     rc = statDecodePage(pBt, p);</span>
</pre>
</body>
</html>
