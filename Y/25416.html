<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>lookaside</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1054.html#L11082'>lookaside</a>        11082 ext/sqlite3/libsqlite/sqlite3.c   Lookaside lookaside;          /* Lookaside malloc configuration */</span>
<span class='curline'><a href='../S/1054.html#L15169'>lookaside</a>        15169 ext/sqlite3/libsqlite/sqlite3.c       *pCurrent = db-&gt;lookaside.nOut;</span>
<span class='curline'><a href='../S/1054.html#L15170'>lookaside</a>        15170 ext/sqlite3/libsqlite/sqlite3.c       *pHighwater = db-&gt;lookaside.mxOut;</span>
<span class='curline'><a href='../S/1054.html#L15172'>lookaside</a>        15172 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.mxOut = db-&gt;lookaside.nOut;</span>
<span class='curline'><a href='../S/1054.html#L15186'>lookaside</a>        15186 ext/sqlite3/libsqlite/sqlite3.c       *pHighwater = db-&gt;lookaside.anStat[op - SQLITE_DBSTATUS_LOOKASIDE_HIT];</span>
<span class='curline'><a href='../S/1054.html#L15188'>lookaside</a>        15188 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.anStat[op - SQLITE_DBSTATUS_LOOKASIDE_HIT] = 0;</span>
<span class='curline'><a href='../S/1054.html#L20963'>lookaside</a>        20963 ext/sqlite3/libsqlite/sqlite3.c   return p&gt;=db-&gt;lookaside.pStart &amp;&amp; p&lt;db-&gt;lookaside.pEnd;</span>
<span class='curline'><a href='../S/1054.html#L20985'>lookaside</a>        20985 ext/sqlite3/libsqlite/sqlite3.c       return db-&gt;lookaside.sz;</span>
<span class='curline'><a href='../S/1054.html#L21041'>lookaside</a>        21041 ext/sqlite3/libsqlite/sqlite3.c       memset(p, 0xaa, db-&gt;lookaside.sz);</span>
<span class='curline'><a href='../S/1054.html#L21043'>lookaside</a>        21043 ext/sqlite3/libsqlite/sqlite3.c       pBuf-&gt;pNext = db-&gt;lookaside.pFree;</span>
<span class='curline'><a href='../S/1054.html#L21044'>lookaside</a>        21044 ext/sqlite3/libsqlite/sqlite3.c       db-&gt;lookaside.pFree = pBuf;</span>
<span class='curline'><a href='../S/1054.html#L21045'>lookaside</a>        21045 ext/sqlite3/libsqlite/sqlite3.c       db-&gt;lookaside.nOut--;</span>
<span class='curline'><a href='../S/1054.html#L21177'>lookaside</a>        21177 ext/sqlite3/libsqlite/sqlite3.c     if( db-&gt;lookaside.bEnabled ){</span>
<span class='curline'><a href='../S/1054.html#L21178'>lookaside</a>        21178 ext/sqlite3/libsqlite/sqlite3.c       if( n&gt;db-&gt;lookaside.sz ){</span>
<span class='curline'><a href='../S/1054.html#L21179'>lookaside</a>        21179 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.anStat[1]++;</span>
<span class='curline'><a href='../S/1054.html#L21180'>lookaside</a>        21180 ext/sqlite3/libsqlite/sqlite3.c       }else if( (pBuf = db-&gt;lookaside.pFree)==0 ){</span>
<span class='curline'><a href='../S/1054.html#L21181'>lookaside</a>        21181 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.anStat[2]++;</span>
<span class='curline'><a href='../S/1054.html#L21183'>lookaside</a>        21183 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.pFree = pBuf-&gt;pNext;</span>
<span class='curline'><a href='../S/1054.html#L21184'>lookaside</a>        21184 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.nOut++;</span>
<span class='curline'><a href='../S/1054.html#L21185'>lookaside</a>        21185 ext/sqlite3/libsqlite/sqlite3.c         db-&gt;lookaside.anStat[0]++;</span>
<span class='curline'><a href='../S/1054.html#L21186'>lookaside</a>        21186 ext/sqlite3/libsqlite/sqlite3.c         if( db-&gt;lookaside.nOut&gt;db-&gt;lookaside.mxOut ){</span>
<span class='curline'><a href='../S/1054.html#L21187'>lookaside</a>        21187 ext/sqlite3/libsqlite/sqlite3.c           db-&gt;lookaside.mxOut = db-&gt;lookaside.nOut;</span>
<span class='curline'><a href='../S/1054.html#L21203'>lookaside</a>        21203 ext/sqlite3/libsqlite/sqlite3.c          (db &amp;&amp; db-&gt;lookaside.bEnabled) ? MEMTYPE_LOOKASIDE : MEMTYPE_HEAP);</span>
<span class='curline'><a href='../S/1054.html#L21220'>lookaside</a>        21220 ext/sqlite3/libsqlite/sqlite3.c       if( n&lt;=db-&gt;lookaside.sz ){</span>
<span class='curline'><a href='../S/1054.html#L21225'>lookaside</a>        21225 ext/sqlite3/libsqlite/sqlite3.c         memcpy(pNew, p, db-&gt;lookaside.sz);</span>
<span class='curline'><a href='../S/1054.html#L21237'>lookaside</a>        21237 ext/sqlite3/libsqlite/sqlite3.c             (db-&gt;lookaside.bEnabled ? MEMTYPE_LOOKASIDE : MEMTYPE_HEAP));</span>
<span class='curline'><a href='../S/1054.html#L89738'>lookaside</a>        89738 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;lookaside.bEnabled==0 );</span>
<span class='curline'><a href='../S/1054.html#L89852'>lookaside</a>        89852 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;lookaside.bEnabled==0 );</span>
<span class='curline'><a href='../S/1054.html#L89934'>lookaside</a>        89934 ext/sqlite3/libsqlite/sqlite3.c     int lookasideEnabled = db-&gt;lookaside.bEnabled;</span>
<span class='curline'><a href='../S/1054.html#L89935'>lookaside</a>        89935 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L89937'>lookaside</a>        89937 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = lookasideEnabled;</span>
<span class='curline'><a href='../S/1054.html#L91411'>lookaside</a>        91411 ext/sqlite3/libsqlite/sqlite3.c                          db-&gt;lookaside.nOut : 0 );</span>
<span class='curline'><a href='../S/1054.html#L91446'>lookaside</a>        91446 ext/sqlite3/libsqlite/sqlite3.c   assert( nLookaside==0 || nLookaside==db-&gt;lookaside.nOut );</span>
<span class='curline'><a href='../S/1054.html#L92959'>lookaside</a>        92959 ext/sqlite3/libsqlite/sqlite3.c     u8 enableLookaside = db-&gt;lookaside.bEnabled;</span>
<span class='curline'><a href='../S/1054.html#L92963'>lookaside</a>        92963 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L92972'>lookaside</a>        92972 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = enableLookaside;</span>
<span class='curline'><a href='../S/1054.html#L99499'>lookaside</a>        99499 ext/sqlite3/libsqlite/sqlite3.c     enableLookaside = db-&gt;lookaside.bEnabled;</span>
<span class='curline'><a href='../S/1054.html#L99500'>lookaside</a>        99500 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L99522'>lookaside</a>        99522 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = enableLookaside;</span>
<span class='curline'><a href='../S/1054.html#L108206'>lookaside</a>        108206 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;lookaside.bEnabled==0 );</span>
<span class='curline'><a href='../S/1054.html#L125382'>lookaside</a>        125382 ext/sqlite3/libsqlite/sqlite3.c   pParse-&gt;db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L126474'>lookaside</a>        126474 ext/sqlite3/libsqlite/sqlite3.c   pParse-&gt;db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L127498'>lookaside</a>        127498 ext/sqlite3/libsqlite/sqlite3.c   enableLookaside = db-&gt;lookaside.bEnabled;</span>
<span class='curline'><a href='../S/1054.html#L127499'>lookaside</a>        127499 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;lookaside.pStart ) db-&gt;lookaside.bEnabled = 1;</span>
<span class='curline'><a href='../S/1054.html#L127556'>lookaside</a>        127556 ext/sqlite3/libsqlite/sqlite3.c   db-&gt;lookaside.bEnabled = enableLookaside;</span>
<span class='curline'><a href='../S/1054.html#L128637'>lookaside</a>        128637 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;lookaside.nOut ){</span>
<span class='curline'><a href='../S/1054.html#L128644'>lookaside</a>        128644 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;lookaside.bMalloced ){</span>
<span class='curline'><a href='../S/1054.html#L128645'>lookaside</a>        128645 ext/sqlite3/libsqlite/sqlite3.c     sqlite3_free(db-&gt;lookaside.pStart);</span>
<span class='curline'><a href='../S/1054.html#L128664'>lookaside</a>        128664 ext/sqlite3/libsqlite/sqlite3.c   db-&gt;lookaside.pStart = pStart;</span>
<span class='curline'><a href='../S/1054.html#L128665'>lookaside</a>        128665 ext/sqlite3/libsqlite/sqlite3.c   db-&gt;lookaside.pFree = 0;</span>
<span class='curline'><a href='../S/1054.html#L128666'>lookaside</a>        128666 ext/sqlite3/libsqlite/sqlite3.c   db-&gt;lookaside.sz = (u16)sz;</span>
<span class='curline'><a href='../S/1054.html#L128673'>lookaside</a>        128673 ext/sqlite3/libsqlite/sqlite3.c       p-&gt;pNext = db-&gt;lookaside.pFree;</span>
<span class='curline'><a href='../S/1054.html#L128674'>lookaside</a>        128674 ext/sqlite3/libsqlite/sqlite3.c       db-&gt;lookaside.pFree = p;</span>
<span class='curline'><a href='../S/1054.html#L128677'>lookaside</a>        128677 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.pEnd = p;</span>
<span class='curline'><a href='../S/1054.html#L128678'>lookaside</a>        128678 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = 1;</span>
<span class='curline'><a href='../S/1054.html#L128679'>lookaside</a>        128679 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bMalloced = pBuf==0 ?1:0;</span>
<span class='curline'><a href='../S/1054.html#L128681'>lookaside</a>        128681 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.pStart = db;</span>
<span class='curline'><a href='../S/1054.html#L128682'>lookaside</a>        128682 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.pEnd = db;</span>
<span class='curline'><a href='../S/1054.html#L128683'>lookaside</a>        128683 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bEnabled = 0;</span>
<span class='curline'><a href='../S/1054.html#L128684'>lookaside</a>        128684 ext/sqlite3/libsqlite/sqlite3.c     db-&gt;lookaside.bMalloced = 0;</span>
<span class='curline'><a href='../S/1054.html#L129137'>lookaside</a>        129137 ext/sqlite3/libsqlite/sqlite3.c   assert( db-&gt;lookaside.nOut==0 );  /* Fails on a lookaside memory leak */</span>
<span class='curline'><a href='../S/1054.html#L129138'>lookaside</a>        129138 ext/sqlite3/libsqlite/sqlite3.c   if( db-&gt;lookaside.bMalloced ){</span>
<span class='curline'><a href='../S/1054.html#L129139'>lookaside</a>        129139 ext/sqlite3/libsqlite/sqlite3.c     sqlite3_free(db-&gt;lookaside.pStart);</span>
</pre>
</body>
</html>
