<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>pDbFd</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1054.html#L29708'>pDbFd</a>            29708 ext/sqlite3/libsqlite/sqlite3.c static int unixOpenSharedMemory(unixFile *pDbFd){</span>
<span class='curline'><a href='../S/1054.html#L29720'>pDbFd</a>            29720 ext/sqlite3/libsqlite/sqlite3.c   assert( pDbFd-&gt;pShm==0 );</span>
<span class='curline'><a href='../S/1054.html#L29726'>pDbFd</a>            29726 ext/sqlite3/libsqlite/sqlite3.c   pInode = pDbFd-&gt;pInode;</span>
<span class='curline'><a href='../S/1054.html#L29731'>pDbFd</a>            29731 ext/sqlite3/libsqlite/sqlite3.c     const char *zBasePath = pDbFd-&gt;zPath;</span>
<span class='curline'><a href='../S/1054.html#L29738'>pDbFd</a>            29738 ext/sqlite3/libsqlite/sqlite3.c     if( osFstat(pDbFd-&gt;h, &amp;sStat) &amp;&amp; pInode-&gt;bProcessLock==0 ){</span>
<span class='curline'><a href='../S/1054.html#L29761'>pDbFd</a>            29761 ext/sqlite3/libsqlite/sqlite3.c     sqlite3FileSuffix3(pDbFd-&gt;zPath, zShmFilename);</span>
<span class='curline'><a href='../S/1054.html#L29764'>pDbFd</a>            29764 ext/sqlite3/libsqlite/sqlite3.c     pDbFd-&gt;pInode-&gt;pShmNode = pShmNode;</span>
<span class='curline'><a href='../S/1054.html#L29765'>pDbFd</a>            29765 ext/sqlite3/libsqlite/sqlite3.c     pShmNode-&gt;pInode = pDbFd-&gt;pInode;</span>
<span class='curline'><a href='../S/1054.html#L29774'>pDbFd</a>            29774 ext/sqlite3/libsqlite/sqlite3.c       if( sqlite3_uri_boolean(pDbFd-&gt;zPath, "readonly_shm", 0) ){</span>
<span class='curline'><a href='../S/1054.html#L29794'>pDbFd</a>            29794 ext/sqlite3/libsqlite/sqlite3.c       if( unixShmSystemLock(pDbFd, F_WRLCK, UNIX_SHM_DMS, 1)==SQLITE_OK ){</span>
<span class='curline'><a href='../S/1054.html#L29800'>pDbFd</a>            29800 ext/sqlite3/libsqlite/sqlite3.c         rc = unixShmSystemLock(pDbFd, F_RDLCK, UNIX_SHM_DMS, 1);</span>
<span class='curline'><a href='../S/1054.html#L29812'>pDbFd</a>            29812 ext/sqlite3/libsqlite/sqlite3.c   pDbFd-&gt;pShm = p;</span>
<span class='curline'><a href='../S/1054.html#L29830'>pDbFd</a>            29830 ext/sqlite3/libsqlite/sqlite3.c   unixShmPurge(pDbFd);       /* This call frees pShmNode if required */</span>
<span class='curline'><a href='../S/1054.html#L29862'>pDbFd</a>            29862 ext/sqlite3/libsqlite/sqlite3.c   unixFile *pDbFd = (unixFile*)fd;</span>
<span class='curline'><a href='../S/1054.html#L29870'>pDbFd</a>            29870 ext/sqlite3/libsqlite/sqlite3.c   if( pDbFd-&gt;pShm==0 ){</span>
<span class='curline'><a href='../S/1054.html#L29871'>pDbFd</a>            29871 ext/sqlite3/libsqlite/sqlite3.c     rc = unixOpenSharedMemory(pDbFd);</span>
<span class='curline'><a href='../S/1054.html#L29875'>pDbFd</a>            29875 ext/sqlite3/libsqlite/sqlite3.c   p = pDbFd-&gt;pShm;</span>
<span class='curline'><a href='../S/1054.html#L29879'>pDbFd</a>            29879 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;pInode==pDbFd-&gt;pInode );</span>
<span class='curline'><a href='../S/1054.html#L29880'>pDbFd</a>            29880 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;h&gt;=0 || pDbFd-&gt;pInode-&gt;bProcessLock==1 );</span>
<span class='curline'><a href='../S/1054.html#L29881'>pDbFd</a>            29881 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;h&lt;0 || pDbFd-&gt;pInode-&gt;bProcessLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L29998'>pDbFd</a>            29998 ext/sqlite3/libsqlite/sqlite3.c   unixFile *pDbFd = (unixFile*)fd;      /* Connection holding shared memory */</span>
<span class='curline'><a href='../S/1054.html#L29999'>pDbFd</a>            29999 ext/sqlite3/libsqlite/sqlite3.c   unixShm *p = pDbFd-&gt;pShm;             /* The shared memory being locked */</span>
<span class='curline'><a href='../S/1054.html#L30005'>pDbFd</a>            30005 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode==pDbFd-&gt;pInode-&gt;pShmNode );</span>
<span class='curline'><a href='../S/1054.html#L30006'>pDbFd</a>            30006 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;pInode==pDbFd-&gt;pInode );</span>
<span class='curline'><a href='../S/1054.html#L30014'>pDbFd</a>            30014 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;h&gt;=0 || pDbFd-&gt;pInode-&gt;bProcessLock==1 );</span>
<span class='curline'><a href='../S/1054.html#L30015'>pDbFd</a>            30015 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;h&lt;0 || pDbFd-&gt;pInode-&gt;bProcessLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L30032'>pDbFd</a>            30032 ext/sqlite3/libsqlite/sqlite3.c       rc = unixShmSystemLock(pDbFd, F_UNLCK, ofst+UNIX_SHM_BASE, n);</span>
<span class='curline'><a href='../S/1054.html#L30060'>pDbFd</a>            30060 ext/sqlite3/libsqlite/sqlite3.c         rc = unixShmSystemLock(pDbFd, F_RDLCK, ofst+UNIX_SHM_BASE, n);</span>
<span class='curline'><a href='../S/1054.html#L30085'>pDbFd</a>            30085 ext/sqlite3/libsqlite/sqlite3.c       rc = unixShmSystemLock(pDbFd, F_WRLCK, ofst+UNIX_SHM_BASE, n);</span>
<span class='curline'><a href='../S/1054.html#L30126'>pDbFd</a>            30126 ext/sqlite3/libsqlite/sqlite3.c   unixFile *pDbFd;                /* The underlying database file */</span>
<span class='curline'><a href='../S/1054.html#L30128'>pDbFd</a>            30128 ext/sqlite3/libsqlite/sqlite3.c   pDbFd = (unixFile*)fd;</span>
<span class='curline'><a href='../S/1054.html#L30129'>pDbFd</a>            30129 ext/sqlite3/libsqlite/sqlite3.c   p = pDbFd-&gt;pShm;</span>
<span class='curline'><a href='../S/1054.html#L30133'>pDbFd</a>            30133 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode==pDbFd-&gt;pInode-&gt;pShmNode );</span>
<span class='curline'><a href='../S/1054.html#L30134'>pDbFd</a>            30134 ext/sqlite3/libsqlite/sqlite3.c   assert( pShmNode-&gt;pInode==pDbFd-&gt;pInode );</span>
<span class='curline'><a href='../S/1054.html#L30144'>pDbFd</a>            30144 ext/sqlite3/libsqlite/sqlite3.c   pDbFd-&gt;pShm = 0;</span>
<span class='curline'><a href='../S/1054.html#L30156'>pDbFd</a>            30156 ext/sqlite3/libsqlite/sqlite3.c     unixShmPurge(pDbFd);</span>
<span class='curline'><a href='../S/1054.html#L36790'>pDbFd</a>            36790 ext/sqlite3/libsqlite/sqlite3.c static int winOpenSharedMemory(winFile *pDbFd){</span>
<span class='curline'><a href='../S/1054.html#L36797'>pDbFd</a>            36797 ext/sqlite3/libsqlite/sqlite3.c   assert( pDbFd-&gt;pShm==0 );    /* Not previously opened */</span>
<span class='curline'><a href='../S/1054.html#L36804'>pDbFd</a>            36804 ext/sqlite3/libsqlite/sqlite3.c   nName = sqlite3Strlen30(pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L36811'>pDbFd</a>            36811 ext/sqlite3/libsqlite/sqlite3.c   sqlite3_snprintf(nName+15, pNew-&gt;zFilename, "%s-shm", pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L36812'>pDbFd</a>            36812 ext/sqlite3/libsqlite/sqlite3.c   sqlite3FileSuffix3(pDbFd-&gt;zPath, pNew-&gt;zFilename);</span>
<span class='curline'><a href='../S/1054.html#L36839'>pDbFd</a>            36839 ext/sqlite3/libsqlite/sqlite3.c     rc = winOpen(pDbFd-&gt;pVfs,</span>
<span class='curline'><a href='../S/1054.html#L36855'>pDbFd</a>            36855 ext/sqlite3/libsqlite/sqlite3.c                          "winOpenShm", pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L36871'>pDbFd</a>            36871 ext/sqlite3/libsqlite/sqlite3.c   pDbFd-&gt;pShm = p;</span>
<span class='curline'><a href='../S/1054.html#L36890'>pDbFd</a>            36890 ext/sqlite3/libsqlite/sqlite3.c   winShmPurge(pDbFd-&gt;pVfs, 0);      /* This call frees pShmNode if required */</span>
<span class='curline'><a href='../S/1054.html#L36905'>pDbFd</a>            36905 ext/sqlite3/libsqlite/sqlite3.c   winFile *pDbFd;       /* Database holding shared-memory */</span>
<span class='curline'><a href='../S/1054.html#L36910'>pDbFd</a>            36910 ext/sqlite3/libsqlite/sqlite3.c   pDbFd = (winFile*)fd;</span>
<span class='curline'><a href='../S/1054.html#L36911'>pDbFd</a>            36911 ext/sqlite3/libsqlite/sqlite3.c   p = pDbFd-&gt;pShm;</span>
<span class='curline'><a href='../S/1054.html#L36923'>pDbFd</a>            36923 ext/sqlite3/libsqlite/sqlite3.c   pDbFd-&gt;pShm = 0;</span>
<span class='curline'><a href='../S/1054.html#L36932'>pDbFd</a>            36932 ext/sqlite3/libsqlite/sqlite3.c     winShmPurge(pDbFd-&gt;pVfs, deleteFlag);</span>
<span class='curline'><a href='../S/1054.html#L36948'>pDbFd</a>            36948 ext/sqlite3/libsqlite/sqlite3.c   winFile *pDbFd = (winFile*)fd;        /* Connection holding shared memory */</span>
<span class='curline'><a href='../S/1054.html#L36949'>pDbFd</a>            36949 ext/sqlite3/libsqlite/sqlite3.c   winShm *p = pDbFd-&gt;pShm;              /* The shared memory being locked */</span>
<span class='curline'><a href='../S/1054.html#L37086'>pDbFd</a>            37086 ext/sqlite3/libsqlite/sqlite3.c   winFile *pDbFd = (winFile*)fd;</span>
<span class='curline'><a href='../S/1054.html#L37087'>pDbFd</a>            37087 ext/sqlite3/libsqlite/sqlite3.c   winShm *pShm = pDbFd-&gt;pShm;</span>
<span class='curline'><a href='../S/1054.html#L37092'>pDbFd</a>            37092 ext/sqlite3/libsqlite/sqlite3.c     rc = winOpenSharedMemory(pDbFd);</span>
<span class='curline'><a href='../S/1054.html#L37094'>pDbFd</a>            37094 ext/sqlite3/libsqlite/sqlite3.c     pShm = pDbFd-&gt;pShm;</span>
<span class='curline'><a href='../S/1054.html#L37115'>pDbFd</a>            37115 ext/sqlite3/libsqlite/sqlite3.c                        "winShmMap1", pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L37130'>pDbFd</a>            37130 ext/sqlite3/libsqlite/sqlite3.c                          "winShmMap2", pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L37184'>pDbFd</a>            37184 ext/sqlite3/libsqlite/sqlite3.c                          "winShmMap3", pDbFd-&gt;zPath);</span>
<span class='curline'><a href='../S/1054.html#L49315'>pDbFd</a>            49315 ext/sqlite3/libsqlite/sqlite3.c   sqlite3_file *pDbFd;       /* File handle for the database file */</span>
<span class='curline'><a href='../S/1054.html#L49444'>pDbFd</a>            49444 ext/sqlite3/libsqlite/sqlite3.c       rc = sqlite3OsShmMap(pWal-&gt;pDbFd, iPage, WALINDEX_PGSZ, </span>
<span class='curline'><a href='../S/1054.html#L49536'>pDbFd</a>            49536 ext/sqlite3/libsqlite/sqlite3.c     sqlite3OsShmBarrier(pWal-&gt;pDbFd);</span>
<span class='curline'><a href='../S/1054.html#L49680'>pDbFd</a>            49680 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3OsShmLock(pWal-&gt;pDbFd, lockIdx, 1,</span>
<span class='curline'><a href='../S/1054.html#L49689'>pDbFd</a>            49689 ext/sqlite3/libsqlite/sqlite3.c   (void)sqlite3OsShmLock(pWal-&gt;pDbFd, lockIdx, 1,</span>
<span class='curline'><a href='../S/1054.html#L49696'>pDbFd</a>            49696 ext/sqlite3/libsqlite/sqlite3.c   if( fBlock ) sqlite3OsFileControl(pWal-&gt;pDbFd, SQLITE_FCNTL_WAL_BLOCK, 0);</span>
<span class='curline'><a href='../S/1054.html#L49697'>pDbFd</a>            49697 ext/sqlite3/libsqlite/sqlite3.c   rc = sqlite3OsShmLock(pWal-&gt;pDbFd, lockIdx, n,</span>
<span class='curline'><a href='../S/1054.html#L49706'>pDbFd</a>            49706 ext/sqlite3/libsqlite/sqlite3.c   (void)sqlite3OsShmLock(pWal-&gt;pDbFd, lockIdx, n,</span>
<span class='curline'><a href='../S/1054.html#L50137'>pDbFd</a>            50137 ext/sqlite3/libsqlite/sqlite3.c     sqlite3OsShmUnmap(pWal-&gt;pDbFd, isDelete);</span>
<span class='curline'><a href='../S/1054.html#L50158'>pDbFd</a>            50158 ext/sqlite3/libsqlite/sqlite3.c   sqlite3_file *pDbFd,            /* The open database file */</span>
<span class='curline'><a href='../S/1054.html#L50169'>pDbFd</a>            50169 ext/sqlite3/libsqlite/sqlite3.c   assert( pDbFd );</span>
<span class='curline'><a href='../S/1054.html#L50192'>pDbFd</a>            50192 ext/sqlite3/libsqlite/sqlite3.c   pRet-&gt;pDbFd = pDbFd;</span>
<span class='curline'><a href='../S/1054.html#L50212'>pDbFd</a>            50212 ext/sqlite3/libsqlite/sqlite3.c     int iDC = sqlite3OsDeviceCharacteristics(pDbFd);</span>
<span class='curline'><a href='../S/1054.html#L50675'>pDbFd</a>            50675 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3OsFileSize(pWal-&gt;pDbFd, &amp;nSize);</span>
<span class='curline'><a href='../S/1054.html#L50677'>pDbFd</a>            50677 ext/sqlite3/libsqlite/sqlite3.c           sqlite3OsFileControlHint(pWal-&gt;pDbFd, SQLITE_FCNTL_SIZE_HINT, &amp;nReq);</span>
<span class='curline'><a href='../S/1054.html#L50695'>pDbFd</a>            50695 ext/sqlite3/libsqlite/sqlite3.c         rc = sqlite3OsWrite(pWal-&gt;pDbFd, zBuf, szPage, iOffset);</span>
<span class='curline'><a href='../S/1054.html#L50704'>pDbFd</a>            50704 ext/sqlite3/libsqlite/sqlite3.c           rc = sqlite3OsTruncate(pWal-&gt;pDbFd, szDb);</span>
<span class='curline'><a href='../S/1054.html#L50706'>pDbFd</a>            50706 ext/sqlite3/libsqlite/sqlite3.c             rc = sqlite3OsSync(pWal-&gt;pDbFd, sync_flags);</span>
<span class='curline'><a href='../S/1054.html#L50806'>pDbFd</a>            50806 ext/sqlite3/libsqlite/sqlite3.c     rc = sqlite3OsLock(pWal-&gt;pDbFd, SQLITE_LOCK_EXCLUSIVE);</span>
<span class='curline'><a href='../S/1054.html#L50817'>pDbFd</a>            50817 ext/sqlite3/libsqlite/sqlite3.c             pWal-&gt;pDbFd, SQLITE_FCNTL_PERSIST_WAL, &amp;bPersist</span>
<span class='curline'><a href='../S/1054.html#L51926'>pDbFd</a>            51926 ext/sqlite3/libsqlite/sqlite3.c     if( isChanged &amp;&amp; pWal-&gt;pDbFd-&gt;pMethods-&gt;iVersion&gt;=3 ){</span>
<span class='curline'><a href='../S/1054.html#L51927'>pDbFd</a>            51927 ext/sqlite3/libsqlite/sqlite3.c       sqlite3OsUnfetch(pWal-&gt;pDbFd, 0, 0);</span>
</pre>
</body>
</html>
