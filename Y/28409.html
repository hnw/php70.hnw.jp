<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>newpath</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/960.html#L2079'>newpath</a>          2079 ext/phar/phar.c 	char *newpath;</span>
<span class='curline'><a href='../S/960.html#L2087'>newpath</a>          2087 ext/phar/phar.c 		newpath = emalloc(strlen(path) + newpath_len + 1);</span>
<span class='curline'><a href='../S/960.html#L2088'>newpath</a>          2088 ext/phar/phar.c 		memcpy(newpath, PHAR_G(cwd), newpath_len);</span>
<span class='curline'><a href='../S/960.html#L2090'>newpath</a>          2090 ext/phar/phar.c 		newpath = emalloc(strlen(path) + 2);</span>
<span class='curline'><a href='../S/960.html#L2091'>newpath</a>          2091 ext/phar/phar.c 		newpath[0] = '/';</span>
<span class='curline'><a href='../S/960.html#L2113'>newpath</a>          2113 ext/phar/phar.c 					efree(newpath);</span>
<span class='curline'><a href='../S/960.html#L2121'>newpath</a>          2121 ext/phar/phar.c 					efree(newpath);</span>
<span class='curline'><a href='../S/960.html#L2125'>newpath</a>          2125 ext/phar/phar.c 		efree(newpath);</span>
<span class='curline'><a href='../S/960.html#L2133'>newpath</a>          2133 ext/phar/phar.c #define PREVIOUS newpath[newpath_len - 1]</span>
<span class='curline'><a href='../S/960.html#L2139'>newpath</a>          2139 ext/phar/phar.c 			if (newpath[0] != '/') {</span>
<span class='curline'><a href='../S/960.html#L2140'>newpath</a>          2140 ext/phar/phar.c 				newpath[newpath_len] = '\0';</span>
<span class='curline'><a href='../S/960.html#L2146'>newpath</a>          2146 ext/phar/phar.c 				newpath[newpath_len++] = '/';</span>
<span class='curline'><a href='../S/960.html#L2147'>newpath</a>          2147 ext/phar/phar.c 				memcpy(newpath + newpath_len, tok, ptr_length+1);</span>
<span class='curline'><a href='../S/960.html#L2149'>newpath</a>          2149 ext/phar/phar.c 				memcpy(newpath + newpath_len, tok, ptr_length+1);</span>
<span class='curline'><a href='../S/960.html#L2174'>newpath</a>          2174 ext/phar/phar.c 	newpath[newpath_len] = '\0';</span>
<span class='curline'><a href='../S/960.html#L2175'>newpath</a>          2175 ext/phar/phar.c 	return erealloc(newpath, newpath_len + 1);</span>
<span class='curline'><a href='../S/962.html#L2005'>newpath</a>          2005 ext/phar/phar_object.c 	char *newname = NULL, *newpath = NULL;</span>
<span class='curline'><a href='../S/962.html#L2090'>newpath</a>          2090 ext/phar/phar_object.c 	phar-&gt;fname_len = spprintf(&amp;newpath, 0, "%s%s", basepath, newname);</span>
<span class='curline'><a href='../S/962.html#L2091'>newpath</a>          2091 ext/phar/phar_object.c 	phar-&gt;fname = newpath;</span>
<span class='curline'><a href='../S/962.html#L2092'>newpath</a>          2092 ext/phar/phar_object.c 	phar-&gt;ext = newpath + phar-&gt;fname_len - strlen(ext) - 1;</span>
<span class='curline'><a href='../S/962.html#L2096'>newpath</a>          2096 ext/phar/phar_object.c 	if (PHAR_G(manifest_cached) &amp;&amp; NULL != (pphar = zend_hash_str_find_ptr(&amp;cached_phars, newpath, phar-&gt;fname_len))) {</span>
<span class='curline'><a href='../S/962.html#L2102'>newpath</a>          2102 ext/phar/phar_object.c 	if (NULL != (pphar = zend_hash_str_find_ptr(&amp;(PHAR_G(phar_fname_map)), newpath, phar-&gt;fname_len))) {</span>
<span class='curline'><a href='../S/962.html#L2115'>newpath</a>          2115 ext/phar/phar_object.c 				newpath = oldpath;</span>
<span class='curline'><a href='../S/962.html#L2125'>newpath</a>          2125 ext/phar/phar_object.c 	if (SUCCESS == php_stream_stat_path(newpath, &amp;ssb)) {</span>
<span class='curline'><a href='../S/962.html#L2126'>newpath</a>          2126 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "phar \"%s\" exists and must be unlinked prior to conversion", newpath);</span>
<span class='curline'><a href='../S/962.html#L2131'>newpath</a>          2131 ext/phar/phar_object.c 		if (SUCCESS != phar_detect_phar_fname_ext(newpath, phar-&gt;fname_len, (const char **) &amp;(phar-&gt;ext), &amp;(phar-&gt;ext_len), 1, 1, 1)) {</span>
<span class='curline'><a href='../S/962.html#L2142'>newpath</a>          2142 ext/phar/phar_object.c 				phar-&gt;alias = estrndup(newpath, strlen(newpath));</span>
<span class='curline'><a href='../S/962.html#L2143'>newpath</a>          2143 ext/phar/phar_object.c 				phar-&gt;alias_len = strlen(newpath);</span>
<span class='curline'><a href='../S/962.html#L2145'>newpath</a>          2145 ext/phar/phar_object.c 				zend_hash_str_update_ptr(&amp;(PHAR_G(phar_alias_map)), newpath, phar-&gt;fname_len, phar);</span>
<span class='curline'><a href='../S/962.html#L2151'>newpath</a>          2151 ext/phar/phar_object.c 		if (SUCCESS != phar_detect_phar_fname_ext(newpath, phar-&gt;fname_len, (const char **) &amp;(phar-&gt;ext), &amp;(phar-&gt;ext_len), 0, 1, 1)) {</span>
<span class='curline'><a href='../S/962.html#L2161'>newpath</a>          2161 ext/phar/phar_object.c 	if ((!pphar || phar == pphar) &amp;&amp; NULL == zend_hash_str_update_ptr(&amp;(PHAR_G(phar_fname_map)), newpath, phar-&gt;fname_len, phar)) {</span>
</pre>
</body>
</html>
