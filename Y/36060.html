<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>shmop</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/994.html#L30'>shmop</a>              30 ext/shmop/php_shmop.h PHP_MINIT_FUNCTION(shmop);</span>
<span class='curline'><a href='../S/994.html#L31'>shmop</a>              31 ext/shmop/php_shmop.h PHP_MINFO_FUNCTION(shmop);</span>
<span class='curline'><a href='../S/995.html#L100'>shmop</a>             100 ext/shmop/shmop.c 	PHP_MINIT(shmop),</span>
<span class='curline'><a href='../S/995.html#L104'>shmop</a>             104 ext/shmop/shmop.c 	PHP_MINFO(shmop),</span>
<span class='curline'><a href='../S/995.html#L111'>shmop</a>             111 ext/shmop/shmop.c ZEND_GET_MODULE(shmop)</span>
<span class='curline'><a href='../S/995.html#L118'>shmop</a>             118 ext/shmop/shmop.c 	struct php_shmop *shmop = (struct php_shmop *)rsrc-&gt;ptr;</span>
<span class='curline'><a href='../S/995.html#L120'>shmop</a>             120 ext/shmop/shmop.c 	shmdt(shmop-&gt;addr);</span>
<span class='curline'><a href='../S/995.html#L121'>shmop</a>             121 ext/shmop/shmop.c 	efree(shmop);</span>
<span class='curline'><a href='../S/995.html#L127'>shmop</a>             127 ext/shmop/shmop.c PHP_MINIT_FUNCTION(shmop)</span>
<span class='curline'><a href='../S/995.html#L137'>shmop</a>             137 ext/shmop/shmop.c PHP_MINFO_FUNCTION(shmop)</span>
<span class='curline'><a href='../S/995.html#L150'>shmop</a>             150 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L164'>shmop</a>             164 ext/shmop/shmop.c 	shmop = emalloc(sizeof(struct php_shmop));</span>
<span class='curline'><a href='../S/995.html#L165'>shmop</a>             165 ext/shmop/shmop.c 	memset(shmop, 0, sizeof(struct php_shmop));</span>
<span class='curline'><a href='../S/995.html#L167'>shmop</a>             167 ext/shmop/shmop.c 	shmop-&gt;key = key;</span>
<span class='curline'><a href='../S/995.html#L168'>shmop</a>             168 ext/shmop/shmop.c 	shmop-&gt;shmflg |= mode;</span>
<span class='curline'><a href='../S/995.html#L173'>shmop</a>             173 ext/shmop/shmop.c 			shmop-&gt;shmatflg |= SHM_RDONLY;</span>
<span class='curline'><a href='../S/995.html#L176'>shmop</a>             176 ext/shmop/shmop.c 			shmop-&gt;shmflg |= IPC_CREAT;</span>
<span class='curline'><a href='../S/995.html#L177'>shmop</a>             177 ext/shmop/shmop.c 			shmop-&gt;size = size;</span>
<span class='curline'><a href='../S/995.html#L180'>shmop</a>             180 ext/shmop/shmop.c 			shmop-&gt;shmflg |= (IPC_CREAT | IPC_EXCL);</span>
<span class='curline'><a href='../S/995.html#L181'>shmop</a>             181 ext/shmop/shmop.c 			shmop-&gt;size = size;</span>
<span class='curline'><a href='../S/995.html#L194'>shmop</a>             194 ext/shmop/shmop.c 	if (shmop-&gt;shmflg &amp; IPC_CREAT &amp;&amp; shmop-&gt;size &lt; 1) {</span>
<span class='curline'><a href='../S/995.html#L199'>shmop</a>             199 ext/shmop/shmop.c 	shmop-&gt;shmid = shmget(shmop-&gt;key, shmop-&gt;size, shmop-&gt;shmflg);</span>
<span class='curline'><a href='../S/995.html#L200'>shmop</a>             200 ext/shmop/shmop.c 	if (shmop-&gt;shmid == -1) {</span>
<span class='curline'><a href='../S/995.html#L205'>shmop</a>             205 ext/shmop/shmop.c 	if (shmctl(shmop-&gt;shmid, IPC_STAT, &amp;shm)) {</span>
<span class='curline'><a href='../S/995.html#L210'>shmop</a>             210 ext/shmop/shmop.c 	shmop-&gt;addr = shmat(shmop-&gt;shmid, 0, shmop-&gt;shmatflg);</span>
<span class='curline'><a href='../S/995.html#L211'>shmop</a>             211 ext/shmop/shmop.c 	if (shmop-&gt;addr == (char*) -1) {</span>
<span class='curline'><a href='../S/995.html#L216'>shmop</a>             216 ext/shmop/shmop.c 	shmop-&gt;size = shm.shm_segsz;</span>
<span class='curline'><a href='../S/995.html#L218'>shmop</a>             218 ext/shmop/shmop.c 	RETURN_RES(zend_register_resource(shmop, shm_type));</span>
<span class='curline'><a href='../S/995.html#L220'>shmop</a>             220 ext/shmop/shmop.c 	efree(shmop);</span>
<span class='curline'><a href='../S/995.html#L231'>shmop</a>             231 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L240'>shmop</a>             240 ext/shmop/shmop.c 	if ((shmop = (struct php_shmop *)zend_fetch_resource(Z_RES_P(shmid), "shmop", shm_type)) == NULL) {</span>
<span class='curline'><a href='../S/995.html#L244'>shmop</a>             244 ext/shmop/shmop.c 	if (start &lt; 0 || start &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/995.html#L249'>shmop</a>             249 ext/shmop/shmop.c 	if (count &lt; 0 || start &gt; (INT_MAX - count) || start + count &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/995.html#L254'>shmop</a>             254 ext/shmop/shmop.c 	startaddr = shmop-&gt;addr + start;</span>
<span class='curline'><a href='../S/995.html#L255'>shmop</a>             255 ext/shmop/shmop.c 	bytes = count ? count : shmop-&gt;size - start;</span>
<span class='curline'><a href='../S/995.html#L268'>shmop</a>             268 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L275'>shmop</a>             275 ext/shmop/shmop.c 	if ((shmop = (struct php_shmop *)zend_fetch_resource(Z_RES_P(shmid), "shmop", shm_type)) == NULL) {</span>
<span class='curline'><a href='../S/995.html#L288'>shmop</a>             288 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L294'>shmop</a>             294 ext/shmop/shmop.c 	if ((shmop = (struct php_shmop *)zend_fetch_resource(Z_RES_P(shmid), "shmop", shm_type)) == NULL) {</span>
<span class='curline'><a href='../S/995.html#L298'>shmop</a>             298 ext/shmop/shmop.c 	RETURN_LONG(shmop-&gt;size);</span>
<span class='curline'><a href='../S/995.html#L306'>shmop</a>             306 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L316'>shmop</a>             316 ext/shmop/shmop.c 	if ((shmop = (struct php_shmop *)zend_fetch_resource(Z_RES_P(shmid), "shmop", shm_type)) == NULL) {</span>
<span class='curline'><a href='../S/995.html#L320'>shmop</a>             320 ext/shmop/shmop.c 	if ((shmop-&gt;shmatflg &amp; SHM_RDONLY) == SHM_RDONLY) {</span>
<span class='curline'><a href='../S/995.html#L325'>shmop</a>             325 ext/shmop/shmop.c 	if (offset &lt; 0 || offset &gt; shmop-&gt;size) {</span>
<span class='curline'><a href='../S/995.html#L330'>shmop</a>             330 ext/shmop/shmop.c 	writesize = (ZSTR_LEN(data) &lt; shmop-&gt;size - offset) ? ZSTR_LEN(data) : shmop-&gt;size - offset;</span>
<span class='curline'><a href='../S/995.html#L331'>shmop</a>             331 ext/shmop/shmop.c 	memcpy(shmop-&gt;addr + offset, ZSTR_VAL(data), writesize);</span>
<span class='curline'><a href='../S/995.html#L342'>shmop</a>             342 ext/shmop/shmop.c 	struct php_shmop *shmop;</span>
<span class='curline'><a href='../S/995.html#L348'>shmop</a>             348 ext/shmop/shmop.c 	if ((shmop = (struct php_shmop *)zend_fetch_resource(Z_RES_P(shmid), "shmop", shm_type)) == NULL) {</span>
<span class='curline'><a href='../S/995.html#L352'>shmop</a>             352 ext/shmop/shmop.c 	if (shmctl(shmop-&gt;shmid, IPC_RMID, NULL)) {</span>
</pre>
</body>
</html>
