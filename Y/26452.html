<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>mem_usage_check</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/849.html#L600'>mem_usage_check</a>   600 ext/opcache/ZendAccelerator.c static inline void kill_all_lockers(struct flock *mem_usage_check)</span>
<span class='curline'><a href='../S/849.html#L606'>mem_usage_check</a>   606 ext/opcache/ZendAccelerator.c 	while (mem_usage_check-&gt;l_pid &gt; 0) {</span>
<span class='curline'><a href='../S/849.html#L608'>mem_usage_check</a>   608 ext/opcache/ZendAccelerator.c 			zend_accel_error(ACCEL_LOG_ERROR, "Killed locker %d", mem_usage_check-&gt;l_pid);</span>
<span class='curline'><a href='../S/849.html#L609'>mem_usage_check</a>   609 ext/opcache/ZendAccelerator.c 			if (kill(mem_usage_check-&gt;l_pid, SIGKILL)) {</span>
<span class='curline'><a href='../S/849.html#L614'>mem_usage_check</a>   614 ext/opcache/ZendAccelerator.c 			if (kill(mem_usage_check-&gt;l_pid, 0)) {</span>
<span class='curline'><a href='../S/849.html#L621'>mem_usage_check</a>   621 ext/opcache/ZendAccelerator.c 			zend_accel_error(ACCEL_LOG_ERROR, "Can't kill %d after 20 tries!", mem_usage_check-&gt;l_pid);</span>
<span class='curline'><a href='../S/849.html#L625'>mem_usage_check</a>   625 ext/opcache/ZendAccelerator.c 		mem_usage_check-&gt;l_type = F_WRLCK;</span>
<span class='curline'><a href='../S/849.html#L626'>mem_usage_check</a>   626 ext/opcache/ZendAccelerator.c 		mem_usage_check-&gt;l_whence = SEEK_SET;</span>
<span class='curline'><a href='../S/849.html#L627'>mem_usage_check</a>   627 ext/opcache/ZendAccelerator.c 		mem_usage_check-&gt;l_start = 1;</span>
<span class='curline'><a href='../S/849.html#L628'>mem_usage_check</a>   628 ext/opcache/ZendAccelerator.c 		mem_usage_check-&gt;l_len = 1;</span>
<span class='curline'><a href='../S/849.html#L629'>mem_usage_check</a>   629 ext/opcache/ZendAccelerator.c 		mem_usage_check-&gt;l_pid = -1;</span>
<span class='curline'><a href='../S/849.html#L630'>mem_usage_check</a>   630 ext/opcache/ZendAccelerator.c 		if (fcntl(lock_file, F_GETLK, mem_usage_check) == -1) {</span>
<span class='curline'><a href='../S/849.html#L635'>mem_usage_check</a>   635 ext/opcache/ZendAccelerator.c 		if (mem_usage_check-&gt;l_type == F_UNLCK || mem_usage_check-&gt;l_pid &lt;= 0) {</span>
<span class='curline'><a href='../S/849.html#L649'>mem_usage_check</a>   649 ext/opcache/ZendAccelerator.c 	FLOCK_STRUCTURE(mem_usage_check, F_WRLCK, SEEK_SET, 1, 1);</span>
<span class='curline'><a href='../S/849.html#L651'>mem_usage_check</a>   651 ext/opcache/ZendAccelerator.c 	mem_usage_check.l_pid = -1;</span>
<span class='curline'><a href='../S/849.html#L652'>mem_usage_check</a>   652 ext/opcache/ZendAccelerator.c 	if (fcntl(lock_file, F_GETLK, &amp;mem_usage_check) == -1) {</span>
<span class='curline'><a href='../S/849.html#L656'>mem_usage_check</a>   656 ext/opcache/ZendAccelerator.c 	if (mem_usage_check.l_type == F_UNLCK) {</span>
<span class='curline'><a href='../S/849.html#L663'>mem_usage_check</a>   663 ext/opcache/ZendAccelerator.c 		zend_accel_error(ACCEL_LOG_WARNING, "Forced restart at %d (after %d seconds), locked by %d", time(NULL), ZCG(accel_directives).force_restart_timeout, mem_usage_check.l_pid);</span>
<span class='curline'><a href='../S/849.html#L664'>mem_usage_check</a>   664 ext/opcache/ZendAccelerator.c 		kill_all_lockers(&amp;mem_usage_check);</span>
</pre>
</body>
</html>
