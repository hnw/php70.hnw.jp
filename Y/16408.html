<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>eFileLock</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1054.html#L25436'>eFileLock</a>        25436 ext/sqlite3/libsqlite/sqlite3.c   unsigned char eFileLock;            /* The type of lock held on this fd */</span>
<span class='curline'><a href='../S/1054.html#L26094'>eFileLock</a>        26094 ext/sqlite3/libsqlite/sqlite3.c static const char *azFileLock(int eFileLock){</span>
<span class='curline'><a href='../S/1054.html#L26095'>eFileLock</a>        26095 ext/sqlite3/libsqlite/sqlite3.c   switch( eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L26519'>eFileLock</a>        26519 ext/sqlite3/libsqlite/sqlite3.c   unsigned char eFileLock;        /* One of SHARED_LOCK, RESERVED_LOCK etc. */</span>
<span class='curline'><a href='../S/1054.html#L26845'>eFileLock</a>        26845 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;pInode-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L26945'>eFileLock</a>        26945 ext/sqlite3/libsqlite/sqlite3.c static int unixLock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/1054.html#L26992'>eFileLock</a>        26992 ext/sqlite3/libsqlite/sqlite3.c       azFileLock(eFileLock), azFileLock(pFile-&gt;eFileLock),</span>
<span class='curline'><a href='../S/1054.html#L26993'>eFileLock</a>        26993 ext/sqlite3/libsqlite/sqlite3.c       azFileLock(pFile-&gt;pInode-&gt;eFileLock), pFile-&gt;pInode-&gt;nShared,</span>
<span class='curline'><a href='../S/1054.html#L27000'>eFileLock</a>        27000 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;=eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L27002'>eFileLock</a>        27002 ext/sqlite3/libsqlite/sqlite3.c             azFileLock(eFileLock)));</span>
<span class='curline'><a href='../S/1054.html#L27011'>eFileLock</a>        27011 ext/sqlite3/libsqlite/sqlite3.c   assert( pFile-&gt;eFileLock!=NO_LOCK || eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27012'>eFileLock</a>        27012 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock!=PENDING_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27013'>eFileLock</a>        27013 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock!=RESERVED_LOCK || pFile-&gt;eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27023'>eFileLock</a>        27023 ext/sqlite3/libsqlite/sqlite3.c   if( (pFile-&gt;eFileLock!=pInode-&gt;eFileLock &amp;&amp; </span>
<span class='curline'><a href='../S/1054.html#L27024'>eFileLock</a>        27024 ext/sqlite3/libsqlite/sqlite3.c           (pInode-&gt;eFileLock&gt;=PENDING_LOCK || eFileLock&gt;SHARED_LOCK))</span>
<span class='curline'><a href='../S/1054.html#L27034'>eFileLock</a>        27034 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK &amp;&amp; </span>
<span class='curline'><a href='../S/1054.html#L27035'>eFileLock</a>        27035 ext/sqlite3/libsqlite/sqlite3.c       (pInode-&gt;eFileLock==SHARED_LOCK || pInode-&gt;eFileLock==RESERVED_LOCK) ){</span>
<span class='curline'><a href='../S/1054.html#L27036'>eFileLock</a>        27036 ext/sqlite3/libsqlite/sqlite3.c     assert( eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27037'>eFileLock</a>        27037 ext/sqlite3/libsqlite/sqlite3.c     assert( pFile-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L27039'>eFileLock</a>        27039 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27052'>eFileLock</a>        27052 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK </span>
<span class='curline'><a href='../S/1054.html#L27053'>eFileLock</a>        27053 ext/sqlite3/libsqlite/sqlite3.c       || (eFileLock==EXCLUSIVE_LOCK &amp;&amp; pFile-&gt;eFileLock&lt;PENDING_LOCK)</span>
<span class='curline'><a href='../S/1054.html#L27055'>eFileLock</a>        27055 ext/sqlite3/libsqlite/sqlite3.c     lock.l_type = (eFileLock==SHARED_LOCK?F_RDLCK:F_WRLCK);</span>
<span class='curline'><a href='../S/1054.html#L27071'>eFileLock</a>        27071 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27073'>eFileLock</a>        27073 ext/sqlite3/libsqlite/sqlite3.c     assert( pInode-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L27100'>eFileLock</a>        27100 ext/sqlite3/libsqlite/sqlite3.c       pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27104'>eFileLock</a>        27104 ext/sqlite3/libsqlite/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK &amp;&amp; pInode-&gt;nShared&gt;1 ){</span>
<span class='curline'><a href='../S/1054.html#L27113'>eFileLock</a>        27113 ext/sqlite3/libsqlite/sqlite3.c     assert( 0!=pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/1054.html#L27116'>eFileLock</a>        27116 ext/sqlite3/libsqlite/sqlite3.c     assert( eFileLock==RESERVED_LOCK || eFileLock==EXCLUSIVE_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27117'>eFileLock</a>        27117 ext/sqlite3/libsqlite/sqlite3.c     if( eFileLock==RESERVED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27142'>eFileLock</a>        27142 ext/sqlite3/libsqlite/sqlite3.c    &amp;&amp; pFile-&gt;eFileLock&lt;=SHARED_LOCK</span>
<span class='curline'><a href='../S/1054.html#L27143'>eFileLock</a>        27143 ext/sqlite3/libsqlite/sqlite3.c    &amp;&amp; eFileLock==RESERVED_LOCK</span>
<span class='curline'><a href='../S/1054.html#L27153'>eFileLock</a>        27153 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27154'>eFileLock</a>        27154 ext/sqlite3/libsqlite/sqlite3.c     pInode-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27155'>eFileLock</a>        27155 ext/sqlite3/libsqlite/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27156'>eFileLock</a>        27156 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27157'>eFileLock</a>        27157 ext/sqlite3/libsqlite/sqlite3.c     pInode-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27162'>eFileLock</a>        27162 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("LOCK    %d %s %s (unix)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/1054.html#L27193'>eFileLock</a>        27193 ext/sqlite3/libsqlite/sqlite3.c static int posixUnlock(sqlite3_file *id, int eFileLock, int handleNFSUnlock){</span>
<span class='curline'><a href='../S/1054.html#L27200'>eFileLock</a>        27200 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d(%d,%d) pid=%d (unix)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/1054.html#L27201'>eFileLock</a>        27201 ext/sqlite3/libsqlite/sqlite3.c       pFile-&gt;eFileLock, pFile-&gt;pInode-&gt;eFileLock, pFile-&gt;pInode-&gt;nShared,</span>
<span class='curline'><a href='../S/1054.html#L27204'>eFileLock</a>        27204 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27205'>eFileLock</a>        27205 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&lt;=eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L27211'>eFileLock</a>        27211 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27212'>eFileLock</a>        27212 ext/sqlite3/libsqlite/sqlite3.c     assert( pInode-&gt;eFileLock==pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/1054.html#L27235'>eFileLock</a>        27235 ext/sqlite3/libsqlite/sqlite3.c     if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27306'>eFileLock</a>        27306 ext/sqlite3/libsqlite/sqlite3.c       pInode-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27313'>eFileLock</a>        27313 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==NO_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27324'>eFileLock</a>        27324 ext/sqlite3/libsqlite/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27328'>eFileLock</a>        27328 ext/sqlite3/libsqlite/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27329'>eFileLock</a>        27329 ext/sqlite3/libsqlite/sqlite3.c         pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27346'>eFileLock</a>        27346 ext/sqlite3/libsqlite/sqlite3.c   if( rc==SQLITE_OK ) pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27357'>eFileLock</a>        27357 ext/sqlite3/libsqlite/sqlite3.c static int unixUnlock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/1054.html#L27359'>eFileLock</a>        27359 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock==SHARED_LOCK || ((unixFile *)id)-&gt;nFetchOut==0 );</span>
<span class='curline'><a href='../S/1054.html#L27361'>eFileLock</a>        27361 ext/sqlite3/libsqlite/sqlite3.c   return posixUnlock(id, eFileLock, 0);</span>
<span class='curline'><a href='../S/1054.html#L27531'>eFileLock</a>        27531 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27572'>eFileLock</a>        27572 ext/sqlite3/libsqlite/sqlite3.c static int dotlockLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L27581'>eFileLock</a>        27581 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock &gt; NO_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27582'>eFileLock</a>        27582 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27609'>eFileLock</a>        27609 ext/sqlite3/libsqlite/sqlite3.c   pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27622'>eFileLock</a>        27622 ext/sqlite3/libsqlite/sqlite3.c static int dotlockUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L27628'>eFileLock</a>        27628 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (dotlock)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/1054.html#L27629'>eFileLock</a>        27629 ext/sqlite3/libsqlite/sqlite3.c            pFile-&gt;eFileLock, osGetpid(0)));</span>
<span class='curline'><a href='../S/1054.html#L27630'>eFileLock</a>        27630 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27633'>eFileLock</a>        27633 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L27640'>eFileLock</a>        27640 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27641'>eFileLock</a>        27641 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27646'>eFileLock</a>        27646 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock==NO_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27660'>eFileLock</a>        27660 ext/sqlite3/libsqlite/sqlite3.c   pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27726'>eFileLock</a>        27726 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27798'>eFileLock</a>        27798 ext/sqlite3/libsqlite/sqlite3.c static int flockLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L27806'>eFileLock</a>        27806 ext/sqlite3/libsqlite/sqlite3.c   if (pFile-&gt;eFileLock &gt; NO_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L27807'>eFileLock</a>        27807 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27822'>eFileLock</a>        27822 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27824'>eFileLock</a>        27824 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("LOCK    %d %s %s (flock)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/1054.html#L27842'>eFileLock</a>        27842 ext/sqlite3/libsqlite/sqlite3.c static int flockUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L27846'>eFileLock</a>        27846 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (flock)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/1054.html#L27847'>eFileLock</a>        27847 ext/sqlite3/libsqlite/sqlite3.c            pFile-&gt;eFileLock, osGetpid(0)));</span>
<span class='curline'><a href='../S/1054.html#L27848'>eFileLock</a>        27848 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L27851'>eFileLock</a>        27851 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L27856'>eFileLock</a>        27856 ext/sqlite3/libsqlite/sqlite3.c   if (eFileLock==SHARED_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L27857'>eFileLock</a>        27857 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27868'>eFileLock</a>        27868 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L27918'>eFileLock</a>        27918 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L27933'>eFileLock</a>        27933 ext/sqlite3/libsqlite/sqlite3.c         reserved = (pFile-&gt;eFileLock &lt; SHARED_LOCK);</span>
<span class='curline'><a href='../S/1054.html#L27975'>eFileLock</a>        27975 ext/sqlite3/libsqlite/sqlite3.c static int semXLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L27982'>eFileLock</a>        27982 ext/sqlite3/libsqlite/sqlite3.c   if (pFile-&gt;eFileLock &gt; NO_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L27983'>eFileLock</a>        27983 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L27995'>eFileLock</a>        27995 ext/sqlite3/libsqlite/sqlite3.c   pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L28008'>eFileLock</a>        28008 ext/sqlite3/libsqlite/sqlite3.c static int semXUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L28014'>eFileLock</a>        28014 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (sem)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/1054.html#L28015'>eFileLock</a>        28015 ext/sqlite3/libsqlite/sqlite3.c            pFile-&gt;eFileLock, osGetpid(0)));</span>
<span class='curline'><a href='../S/1054.html#L28016'>eFileLock</a>        28016 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28019'>eFileLock</a>        28019 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L28024'>eFileLock</a>        28024 ext/sqlite3/libsqlite/sqlite3.c   if (eFileLock==SHARED_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L28025'>eFileLock</a>        28025 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L28038'>eFileLock</a>        28038 ext/sqlite3/libsqlite/sqlite3.c   pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28167'>eFileLock</a>        28167 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;pInode-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28220'>eFileLock</a>        28220 ext/sqlite3/libsqlite/sqlite3.c static int afpLock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/1054.html#L28228'>eFileLock</a>        28228 ext/sqlite3/libsqlite/sqlite3.c            azFileLock(eFileLock), azFileLock(pFile-&gt;eFileLock),</span>
<span class='curline'><a href='../S/1054.html#L28229'>eFileLock</a>        28229 ext/sqlite3/libsqlite/sqlite3.c            azFileLock(pInode-&gt;eFileLock), pInode-&gt;nShared , osGetpid(0)));</span>
<span class='curline'><a href='../S/1054.html#L28235'>eFileLock</a>        28235 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;=eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L28237'>eFileLock</a>        28237 ext/sqlite3/libsqlite/sqlite3.c            azFileLock(eFileLock)));</span>
<span class='curline'><a href='../S/1054.html#L28246'>eFileLock</a>        28246 ext/sqlite3/libsqlite/sqlite3.c   assert( pFile-&gt;eFileLock!=NO_LOCK || eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28247'>eFileLock</a>        28247 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock!=PENDING_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28248'>eFileLock</a>        28248 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock!=RESERVED_LOCK || pFile-&gt;eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28258'>eFileLock</a>        28258 ext/sqlite3/libsqlite/sqlite3.c   if( (pFile-&gt;eFileLock!=pInode-&gt;eFileLock &amp;&amp; </span>
<span class='curline'><a href='../S/1054.html#L28259'>eFileLock</a>        28259 ext/sqlite3/libsqlite/sqlite3.c        (pInode-&gt;eFileLock&gt;=PENDING_LOCK || eFileLock&gt;SHARED_LOCK))</span>
<span class='curline'><a href='../S/1054.html#L28269'>eFileLock</a>        28269 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK &amp;&amp; </span>
<span class='curline'><a href='../S/1054.html#L28270'>eFileLock</a>        28270 ext/sqlite3/libsqlite/sqlite3.c      (pInode-&gt;eFileLock==SHARED_LOCK || pInode-&gt;eFileLock==RESERVED_LOCK) ){</span>
<span class='curline'><a href='../S/1054.html#L28271'>eFileLock</a>        28271 ext/sqlite3/libsqlite/sqlite3.c     assert( eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28272'>eFileLock</a>        28272 ext/sqlite3/libsqlite/sqlite3.c     assert( pFile-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L28274'>eFileLock</a>        28274 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28284'>eFileLock</a>        28284 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK </span>
<span class='curline'><a href='../S/1054.html#L28285'>eFileLock</a>        28285 ext/sqlite3/libsqlite/sqlite3.c       || (eFileLock==EXCLUSIVE_LOCK &amp;&amp; pFile-&gt;eFileLock&lt;PENDING_LOCK)</span>
<span class='curline'><a href='../S/1054.html#L28298'>eFileLock</a>        28298 ext/sqlite3/libsqlite/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28303'>eFileLock</a>        28303 ext/sqlite3/libsqlite/sqlite3.c     assert( pInode-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/1054.html#L28328'>eFileLock</a>        28328 ext/sqlite3/libsqlite/sqlite3.c       pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28332'>eFileLock</a>        28332 ext/sqlite3/libsqlite/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK &amp;&amp; pInode-&gt;nShared&gt;1 ){</span>
<span class='curline'><a href='../S/1054.html#L28342'>eFileLock</a>        28342 ext/sqlite3/libsqlite/sqlite3.c     assert( 0!=pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/1054.html#L28343'>eFileLock</a>        28343 ext/sqlite3/libsqlite/sqlite3.c     if (eFileLock &gt;= RESERVED_LOCK &amp;&amp; pFile-&gt;eFileLock &lt; RESERVED_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L28350'>eFileLock</a>        28350 ext/sqlite3/libsqlite/sqlite3.c     if (!failed &amp;&amp; eFileLock == EXCLUSIVE_LOCK) {</span>
<span class='curline'><a href='../S/1054.html#L28381'>eFileLock</a>        28381 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L28382'>eFileLock</a>        28382 ext/sqlite3/libsqlite/sqlite3.c     pInode-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L28383'>eFileLock</a>        28383 ext/sqlite3/libsqlite/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28384'>eFileLock</a>        28384 ext/sqlite3/libsqlite/sqlite3.c     pFile-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28385'>eFileLock</a>        28385 ext/sqlite3/libsqlite/sqlite3.c     pInode-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28390'>eFileLock</a>        28390 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("LOCK    %d %s %s (afp)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/1054.html#L28402'>eFileLock</a>        28402 ext/sqlite3/libsqlite/sqlite3.c static int afpUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L28413'>eFileLock</a>        28413 ext/sqlite3/libsqlite/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d(%d,%d) pid=%d (afp)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/1054.html#L28414'>eFileLock</a>        28414 ext/sqlite3/libsqlite/sqlite3.c            pFile-&gt;eFileLock, pFile-&gt;pInode-&gt;eFileLock, pFile-&gt;pInode-&gt;nShared,</span>
<span class='curline'><a href='../S/1054.html#L28417'>eFileLock</a>        28417 ext/sqlite3/libsqlite/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/1054.html#L28418'>eFileLock</a>        28418 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&lt;=eFileLock ){</span>
<span class='curline'><a href='../S/1054.html#L28424'>eFileLock</a>        28424 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28425'>eFileLock</a>        28425 ext/sqlite3/libsqlite/sqlite3.c     assert( pInode-&gt;eFileLock==pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/1054.html#L28445'>eFileLock</a>        28445 ext/sqlite3/libsqlite/sqlite3.c     if( pFile-&gt;eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28447'>eFileLock</a>        28447 ext/sqlite3/libsqlite/sqlite3.c       if( rc==SQLITE_OK &amp;&amp; (eFileLock==SHARED_LOCK || pInode-&gt;nShared&gt;1) ){</span>
<span class='curline'><a href='../S/1054.html#L28455'>eFileLock</a>        28455 ext/sqlite3/libsqlite/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; pFile-&gt;eFileLock&gt;=PENDING_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28458'>eFileLock</a>        28458 ext/sqlite3/libsqlite/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; pFile-&gt;eFileLock&gt;=RESERVED_LOCK &amp;&amp; context-&gt;reserved ){</span>
<span class='curline'><a href='../S/1054.html#L28464'>eFileLock</a>        28464 ext/sqlite3/libsqlite/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; (eFileLock==SHARED_LOCK || pInode-&gt;nShared&gt;1)){</span>
<span class='curline'><a href='../S/1054.html#L28465'>eFileLock</a>        28465 ext/sqlite3/libsqlite/sqlite3.c       pInode-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28468'>eFileLock</a>        28468 ext/sqlite3/libsqlite/sqlite3.c   if( rc==SQLITE_OK &amp;&amp; eFileLock==NO_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L28484'>eFileLock</a>        28484 ext/sqlite3/libsqlite/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28485'>eFileLock</a>        28485 ext/sqlite3/libsqlite/sqlite3.c         pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/1054.html#L28498'>eFileLock</a>        28498 ext/sqlite3/libsqlite/sqlite3.c   if( rc==SQLITE_OK ) pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L28548'>eFileLock</a>        28548 ext/sqlite3/libsqlite/sqlite3.c static int nfsUnlock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/1054.html#L28549'>eFileLock</a>        28549 ext/sqlite3/libsqlite/sqlite3.c   return posixUnlock(id, eFileLock, 1);</span>
<span class='curline'><a href='../S/1054.html#L29245'>eFileLock</a>        29245 ext/sqlite3/libsqlite/sqlite3.c       *(int*)pArg = pFile-&gt;eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L32540'>eFileLock</a>        32540 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock!=NO_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L32608'>eFileLock</a>        32608 ext/sqlite3/libsqlite/sqlite3.c   if( pFile-&gt;eFileLock!=NO_LOCK ){</span>
<span class='curline'><a href='../S/1054.html#L32801'>eFileLock</a>        32801 ext/sqlite3/libsqlite/sqlite3.c static int proxyLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L32808'>eFileLock</a>        32808 ext/sqlite3/libsqlite/sqlite3.c       rc = proxy-&gt;pMethod-&gt;xLock((sqlite3_file*)proxy, eFileLock);</span>
<span class='curline'><a href='../S/1054.html#L32809'>eFileLock</a>        32809 ext/sqlite3/libsqlite/sqlite3.c       pFile-&gt;eFileLock = proxy-&gt;eFileLock;</span>
<span class='curline'><a href='../S/1054.html#L32825'>eFileLock</a>        32825 ext/sqlite3/libsqlite/sqlite3.c static int proxyUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/1054.html#L32832'>eFileLock</a>        32832 ext/sqlite3/libsqlite/sqlite3.c       rc = proxy-&gt;pMethod-&gt;xUnlock((sqlite3_file*)proxy, eFileLock);</span>
<span class='curline'><a href='../S/1054.html#L32833'>eFileLock</a>        32833 ext/sqlite3/libsqlite/sqlite3.c       pFile-&gt;eFileLock = proxy-&gt;eFileLock;</span>
</pre>
</body>
</html>
