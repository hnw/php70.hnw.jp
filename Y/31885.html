<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>phar_obj</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/962.html#L1128'>phar_obj</a>         1128 ext/phar/phar_object.c 	phar_archive_object *phar_obj;</span>
<span class='curline'><a href='../S/962.html#L1132'>phar_obj</a>         1132 ext/phar/phar_object.c 	phar_obj = (phar_archive_object*)((char*)Z_OBJ_P(zobj) - Z_OBJ_P(zobj)-&gt;handlers-&gt;offset);</span>
<span class='curline'><a href='../S/962.html#L1146'>phar_obj</a>         1146 ext/phar/phar_object.c 	if (phar_obj-&gt;archive) {</span>
<span class='curline'><a href='../S/962.html#L1220'>phar_obj</a>         1220 ext/phar/phar_object.c 	phar_obj-&gt;archive = phar_data;</span>
<span class='curline'><a href='../S/962.html#L1221'>phar_obj</a>         1221 ext/phar/phar_object.c 	phar_obj-&gt;spl.oth_handler = &amp;phar_spl_foreign_handler;</span>
<span class='curline'><a href='../S/962.html#L1239'>phar_obj</a>         1239 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/962.html#L1242'>phar_obj</a>         1242 ext/phar/phar_object.c 		zend_hash_str_add_ptr(&amp;PHAR_G(phar_persist_map), (const char *) phar_obj-&gt;archive, sizeof(phar_obj-&gt;archive), phar_obj);</span>
<span class='curline'><a href='../S/962.html#L1245'>phar_obj</a>         1245 ext/phar/phar_object.c 	phar_obj-&gt;spl.info_class = phar_ce_entry;</span>
<span class='curline'><a href='../S/962.html#L1370'>phar_obj</a>         1370 ext/phar/phar_object.c 	phar_archive_object *phar_obj = (phar_archive_object*)((char*)Z_OBJ_P(zobj) - Z_OBJ_P(zobj)-&gt;handlers-&gt;offset); \</span>
<span class='curline'><a href='../S/962.html#L1371'>phar_obj</a>         1371 ext/phar/phar_object.c 	if (!phar_obj-&gt;archive) { \</span>
<span class='curline'><a href='../S/962.html#L1383'>phar_obj</a>         1383 ext/phar/phar_object.c 	phar_archive_object *phar_obj = (phar_archive_object*)((char*)Z_OBJ_P(zobj) - Z_OBJ_P(zobj)-&gt;handlers-&gt;offset);</span>
<span class='curline'><a href='../S/962.html#L1385'>phar_obj</a>         1385 ext/phar/phar_object.c 	if (phar_obj-&gt;archive &amp;&amp; phar_obj-&gt;archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/962.html#L1386'>phar_obj</a>         1386 ext/phar/phar_object.c 		zend_hash_str_del(&amp;PHAR_G(phar_persist_map), (const char *) phar_obj-&gt;archive, sizeof(phar_obj-&gt;archive));</span>
<span class='curline'><a href='../S/962.html#L1414'>phar_obj</a>         1414 ext/phar/phar_object.c 	phar_archive_object *phar_obj = p_obj-&gt;p;</span>
<span class='curline'><a href='../S/962.html#L1659'>phar_obj</a>         1659 ext/phar/phar_object.c 	if (!(data = phar_get_or_create_entry_data(phar_obj-&gt;archive-&gt;fname, phar_obj-&gt;archive-&gt;fname_len, str_key, str_key_len, "w+b", 0, &amp;error, 1))) {</span>
<span class='curline'><a href='../S/962.html#L1736'>phar_obj</a>         1736 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L1748'>phar_obj</a>         1748 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Unable to instantiate directory iterator for %s", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1767'>phar_obj</a>         1767 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Unable to instantiate directory iterator for %s", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1788'>phar_obj</a>         1788 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Unable to instantiate regex iterator for %s", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1802'>phar_obj</a>         1802 ext/phar/phar_object.c 	pass.p = phar_obj;</span>
<span class='curline'><a href='../S/962.html#L1809'>phar_obj</a>         1809 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" unable to create temporary file", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1813'>phar_obj</a>         1813 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L1819'>phar_obj</a>         1819 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1830'>phar_obj</a>         1830 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/962.html#L1831'>phar_obj</a>         1831 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L1868'>phar_obj</a>         1868 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L1878'>phar_obj</a>         1878 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L1879'>phar_obj</a>         1879 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1886'>phar_obj</a>         1886 ext/phar/phar_object.c 	pass.p = phar_obj;</span>
<span class='curline'><a href='../S/962.html#L1893'>phar_obj</a>         1893 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\": unable to create temporary file", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L1898'>phar_obj</a>         1898 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;ufp = pass.fp;</span>
<span class='curline'><a href='../S/962.html#L1899'>phar_obj</a>         1899 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L1923'>phar_obj</a>         1923 ext/phar/phar_object.c 	RETURN_LONG(zend_hash_num_elements(&amp;phar_obj-&gt;archive-&gt;manifest));</span>
<span class='curline'><a href='../S/962.html#L1942'>phar_obj</a>         1942 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;archive-&gt;is_tar);</span>
<span class='curline'><a href='../S/962.html#L1944'>phar_obj</a>         1944 ext/phar/phar_object.c 			RETURN_BOOL(phar_obj-&gt;archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/962.html#L1946'>phar_obj</a>         1946 ext/phar/phar_object.c 			RETURN_BOOL(!phar_obj-&gt;archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;archive-&gt;is_zip);</span>
<span class='curline'><a href='../S/962.html#L2343'>phar_obj</a>         2343 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L2345'>phar_obj</a>         2345 ext/phar/phar_object.c 			} else if (phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L2363'>phar_obj</a>         2363 ext/phar/phar_object.c 			flags = phar_obj-&gt;archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/962.html#L2404'>phar_obj</a>         2404 ext/phar/phar_object.c 	is_data = phar_obj-&gt;archive-&gt;is_data;</span>
<span class='curline'><a href='../S/962.html#L2405'>phar_obj</a>         2405 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_data = 0;</span>
<span class='curline'><a href='../S/962.html#L2406'>phar_obj</a>         2406 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;archive, format, ext, flags);</span>
<span class='curline'><a href='../S/962.html#L2407'>phar_obj</a>         2407 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/962.html#L2441'>phar_obj</a>         2441 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L2443'>phar_obj</a>         2443 ext/phar/phar_object.c 			} else if (phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L2466'>phar_obj</a>         2466 ext/phar/phar_object.c 			flags = phar_obj-&gt;archive-&gt;flags &amp; PHAR_FILE_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/962.html#L2507'>phar_obj</a>         2507 ext/phar/phar_object.c 	is_data = phar_obj-&gt;archive-&gt;is_data;</span>
<span class='curline'><a href='../S/962.html#L2508'>phar_obj</a>         2508 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_data = 1;</span>
<span class='curline'><a href='../S/962.html#L2509'>phar_obj</a>         2509 ext/phar/phar_object.c 	ret = phar_convert_to_other(phar_obj-&gt;archive, format, ext, flags);</span>
<span class='curline'><a href='../S/962.html#L2510'>phar_obj</a>         2510 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_data = is_data;</span>
<span class='curline'><a href='../S/962.html#L2532'>phar_obj</a>         2532 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_GZ) {</span>
<span class='curline'><a href='../S/962.html#L2536'>phar_obj</a>         2536 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;flags &amp; PHAR_FILE_COMPRESSED_BZ2) {</span>
<span class='curline'><a href='../S/962.html#L2556'>phar_obj</a>         2556 ext/phar/phar_object.c 	if (!phar_obj-&gt;archive-&gt;is_writeable) {</span>
<span class='curline'><a href='../S/962.html#L2560'>phar_obj</a>         2560 ext/phar/phar_object.c 	if (SUCCESS != php_stream_stat_path(phar_obj-&gt;archive-&gt;fname, &amp;ssb)) {</span>
<span class='curline'><a href='../S/962.html#L2561'>phar_obj</a>         2561 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/962.html#L2583'>phar_obj</a>         2583 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2593'>phar_obj</a>         2593 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L2594'>phar_obj</a>         2594 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2597'>phar_obj</a>         2597 ext/phar/phar_object.c 	if (zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/962.html#L2598'>phar_obj</a>         2598 ext/phar/phar_object.c 		if (NULL != (entry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len))) {</span>
<span class='curline'><a href='../S/962.html#L2605'>phar_obj</a>         2605 ext/phar/phar_object.c 				phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L2613'>phar_obj</a>         2613 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, NULL, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2634'>phar_obj</a>         2634 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;alias &amp;&amp; phar_obj-&gt;archive-&gt;alias != phar_obj-&gt;archive-&gt;fname) {</span>
<span class='curline'><a href='../S/962.html#L2635'>phar_obj</a>         2635 ext/phar/phar_object.c 		RETURN_STRINGL(phar_obj-&gt;archive-&gt;alias, phar_obj-&gt;archive-&gt;alias_len);</span>
<span class='curline'><a href='../S/962.html#L2651'>phar_obj</a>         2651 ext/phar/phar_object.c 	RETURN_STRINGL(phar_obj-&gt;archive-&gt;fname, phar_obj-&gt;archive-&gt;fname_len);</span>
<span class='curline'><a href='../S/962.html#L2668'>phar_obj</a>         2668 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2678'>phar_obj</a>         2678 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2679'>phar_obj</a>         2679 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L2690'>phar_obj</a>         2690 ext/phar/phar_object.c 		if (alias_len == phar_obj-&gt;archive-&gt;alias_len &amp;&amp; memcmp(phar_obj-&gt;archive-&gt;alias, alias, alias_len) == 0) {</span>
<span class='curline'><a href='../S/962.html#L2705'>phar_obj</a>         2705 ext/phar/phar_object.c 				"Invalid alias \"%s\" specified for phar \"%s\"", alias, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2709'>phar_obj</a>         2709 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L2710'>phar_obj</a>         2710 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2713'>phar_obj</a>         2713 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;alias_len &amp;&amp; NULL != (fd_ptr = zend_hash_str_find_ptr(&amp;(PHAR_G(phar_alias_map)), phar_obj-&gt;archive-&gt;alias, phar_obj-&gt;archive-&gt;alias_len))) {</span>
<span class='curline'><a href='../S/962.html#L2714'>phar_obj</a>         2714 ext/phar/phar_object.c 			zend_hash_str_del(&amp;(PHAR_G(phar_alias_map)), phar_obj-&gt;archive-&gt;alias, phar_obj-&gt;archive-&gt;alias_len);</span>
<span class='curline'><a href='../S/962.html#L2718'>phar_obj</a>         2718 ext/phar/phar_object.c 		oldalias = phar_obj-&gt;archive-&gt;alias;</span>
<span class='curline'><a href='../S/962.html#L2719'>phar_obj</a>         2719 ext/phar/phar_object.c 		oldalias_len = phar_obj-&gt;archive-&gt;alias_len;</span>
<span class='curline'><a href='../S/962.html#L2720'>phar_obj</a>         2720 ext/phar/phar_object.c 		old_temp = phar_obj-&gt;archive-&gt;is_temporary_alias;</span>
<span class='curline'><a href='../S/962.html#L2723'>phar_obj</a>         2723 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;alias = estrndup(alias, alias_len);</span>
<span class='curline'><a href='../S/962.html#L2725'>phar_obj</a>         2725 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;alias = NULL;</span>
<span class='curline'><a href='../S/962.html#L2728'>phar_obj</a>         2728 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;alias_len = alias_len;</span>
<span class='curline'><a href='../S/962.html#L2729'>phar_obj</a>         2729 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;is_temporary_alias = 0;</span>
<span class='curline'><a href='../S/962.html#L2730'>phar_obj</a>         2730 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;archive, NULL, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2733'>phar_obj</a>         2733 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;alias = oldalias;</span>
<span class='curline'><a href='../S/962.html#L2734'>phar_obj</a>         2734 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;alias_len = oldalias_len;</span>
<span class='curline'><a href='../S/962.html#L2735'>phar_obj</a>         2735 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;is_temporary_alias = old_temp;</span>
<span class='curline'><a href='../S/962.html#L2738'>phar_obj</a>         2738 ext/phar/phar_object.c 				zend_hash_str_add_ptr(&amp;(PHAR_G(phar_alias_map)), oldalias, oldalias_len, phar_obj-&gt;archive);</span>
<span class='curline'><a href='../S/962.html#L2744'>phar_obj</a>         2744 ext/phar/phar_object.c 		zend_hash_str_add_ptr(&amp;(PHAR_G(phar_alias_map)), alias, alias_len, phar_obj-&gt;archive);</span>
<span class='curline'><a href='../S/962.html#L2768'>phar_obj</a>         2768 ext/phar/phar_object.c 	RETURN_STRING(phar_obj-&gt;archive-&gt;version);</span>
<span class='curline'><a href='../S/962.html#L2783'>phar_obj</a>         2783 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;donotflush = 1;</span>
<span class='curline'><a href='../S/962.html#L2798'>phar_obj</a>         2798 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;archive-&gt;donotflush);</span>
<span class='curline'><a href='../S/962.html#L2815'>phar_obj</a>         2815 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2821'>phar_obj</a>         2821 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;donotflush = 0;</span>
<span class='curline'><a href='../S/962.html#L2822'>phar_obj</a>         2822 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2844'>phar_obj</a>         2844 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2850'>phar_obj</a>         2850 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2851'>phar_obj</a>         2851 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L2868'>phar_obj</a>         2868 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L2869'>phar_obj</a>         2869 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2872'>phar_obj</a>         2872 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;archive, (char *) zstub, len, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2883'>phar_obj</a>         2883 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L2884'>phar_obj</a>         2884 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2887'>phar_obj</a>         2887 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;archive, stub, stub_len, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2922'>phar_obj</a>         2922 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L2923'>phar_obj</a>         2923 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L2937'>phar_obj</a>         2937 ext/phar/phar_object.c 	if (ZEND_NUM_ARGS() &gt; 0 &amp;&amp; (phar_obj-&gt;archive-&gt;is_tar || phar_obj-&gt;archive-&gt;is_zip)) {</span>
<span class='curline'><a href='../S/962.html#L2948'>phar_obj</a>         2948 ext/phar/phar_object.c 	if (!phar_obj-&gt;archive-&gt;is_tar &amp;&amp; !phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L2963'>phar_obj</a>         2963 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L2964'>phar_obj</a>         2964 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L2967'>phar_obj</a>         2967 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, stub ? ZSTR_VAL(stub) : 0, stub ? ZSTR_LEN(stub) : 0, 1, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L2997'>phar_obj</a>         2997 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3018'>phar_obj</a>         3018 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L3019'>phar_obj</a>         3019 ext/phar/phar_object.c 				zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3022'>phar_obj</a>         3022 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;sig_flags = algo;</span>
<span class='curline'><a href='../S/962.html#L3023'>phar_obj</a>         3023 ext/phar/phar_object.c 			phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L3027'>phar_obj</a>         3027 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L3051'>phar_obj</a>         3051 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;signature) {</span>
<span class='curline'><a href='../S/962.html#L3055'>phar_obj</a>         3055 ext/phar/phar_object.c 		add_assoc_stringl(return_value, "hash", phar_obj-&gt;archive-&gt;signature, phar_obj-&gt;archive-&gt;sig_len);</span>
<span class='curline'><a href='../S/962.html#L3056'>phar_obj</a>         3056 ext/phar/phar_object.c 		switch(phar_obj-&gt;archive-&gt;sig_flags) {</span>
<span class='curline'><a href='../S/962.html#L3073'>phar_obj</a>         3073 ext/phar/phar_object.c 				unknown = strpprintf(0, "Unknown (%u)", phar_obj-&gt;archive-&gt;sig_flags);</span>
<span class='curline'><a href='../S/962.html#L3094'>phar_obj</a>         3094 ext/phar/phar_object.c 	RETURN_BOOL(phar_obj-&gt;archive-&gt;is_modified);</span>
<span class='curline'><a href='../S/962.html#L3173'>phar_obj</a>         3173 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3179'>phar_obj</a>         3179 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L3212'>phar_obj</a>         3212 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L3213'>phar_obj</a>         3213 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;archive, PHAR_FORMAT_TAR, ext, flags);</span>
<span class='curline'><a href='../S/962.html#L3215'>phar_obj</a>         3215 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;archive, PHAR_FORMAT_PHAR, ext, flags);</span>
<span class='curline'><a href='../S/962.html#L3240'>phar_obj</a>         3240 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3246'>phar_obj</a>         3246 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L3252'>phar_obj</a>         3252 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L3253'>phar_obj</a>         3253 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;archive, PHAR_FORMAT_TAR, ext, PHAR_FILE_COMPRESSED_NONE);</span>
<span class='curline'><a href='../S/962.html#L3255'>phar_obj</a>         3255 ext/phar/phar_object.c 		ret = phar_convert_to_other(phar_obj-&gt;archive, PHAR_FORMAT_PHAR, ext, PHAR_FILE_COMPRESSED_NONE);</span>
<span class='curline'><a href='../S/962.html#L3282'>phar_obj</a>         3282 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3312'>phar_obj</a>         3312 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L3318'>phar_obj</a>         3318 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;archive-&gt;manifest)) {</span>
<span class='curline'><a href='../S/962.html#L3329'>phar_obj</a>         3329 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L3330'>phar_obj</a>         3330 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3333'>phar_obj</a>         3333 ext/phar/phar_object.c 	pharobj_set_compression(&amp;phar_obj-&gt;archive-&gt;manifest, flags);</span>
<span class='curline'><a href='../S/962.html#L3334'>phar_obj</a>         3334 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L3335'>phar_obj</a>         3335 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L3356'>phar_obj</a>         3356 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3362'>phar_obj</a>         3362 ext/phar/phar_object.c 	if (!pharobj_cancompress(&amp;phar_obj-&gt;archive-&gt;manifest)) {</span>
<span class='curline'><a href='../S/962.html#L3368'>phar_obj</a>         3368 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_tar) {</span>
<span class='curline'><a href='../S/962.html#L3371'>phar_obj</a>         3371 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L3372'>phar_obj</a>         3372 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3375'>phar_obj</a>         3375 ext/phar/phar_object.c 		pharobj_set_compression(&amp;phar_obj-&gt;archive-&gt;manifest, PHAR_ENT_COMPRESSED_NONE);</span>
<span class='curline'><a href='../S/962.html#L3378'>phar_obj</a>         3378 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L3379'>phar_obj</a>         3379 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L3407'>phar_obj</a>         3407 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3416'>phar_obj</a>         3416 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3423'>phar_obj</a>         3423 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", cannot copy to Phar meta-file in %s", oldfile, newfile, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3427'>phar_obj</a>         3427 ext/phar/phar_object.c 	if (!zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;manifest, oldfile, (uint) oldfile_len) || NULL == (oldentry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, oldfile, (uint) oldfile_len)) || oldentry-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/962.html#L3429'>phar_obj</a>         3429 ext/phar/phar_object.c 			"file \"%s\" cannot be copied to file \"%s\", file does not exist in %s", oldfile, newfile, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3433'>phar_obj</a>         3433 ext/phar/phar_object.c 	if (zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;manifest, newfile, (uint) newfile_len)) {</span>
<span class='curline'><a href='../S/962.html#L3434'>phar_obj</a>         3434 ext/phar/phar_object.c 		if (NULL != (temp = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, newfile, (uint) newfile_len)) || !temp-&gt;is_deleted) {</span>
<span class='curline'><a href='../S/962.html#L3436'>phar_obj</a>         3436 ext/phar/phar_object.c 				"file \"%s\" cannot be copied to file \"%s\", file must not already exist in phar %s", oldfile, newfile, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3444'>phar_obj</a>         3444 ext/phar/phar_object.c 				"file \"%s\" contains invalid characters %s, cannot be copied from \"%s\" in phar %s", newfile, pcr_error, oldfile, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3449'>phar_obj</a>         3449 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/962.html#L3450'>phar_obj</a>         3450 ext/phar/phar_object.c 		if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L3451'>phar_obj</a>         3451 ext/phar/phar_object.c 			zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3455'>phar_obj</a>         3455 ext/phar/phar_object.c 		oldentry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, oldfile, (uint) oldfile_len);</span>
<span class='curline'><a href='../S/962.html#L3480'>phar_obj</a>         3480 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L3481'>phar_obj</a>         3481 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L3507'>phar_obj</a>         3507 ext/phar/phar_object.c 	if (zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/962.html#L3508'>phar_obj</a>         3508 ext/phar/phar_object.c 		if (NULL != (entry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len))) {</span>
<span class='curline'><a href='../S/962.html#L3521'>phar_obj</a>         3521 ext/phar/phar_object.c 		if (zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;virtual_dirs, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/962.html#L3546'>phar_obj</a>         3546 ext/phar/phar_object.c 	if (!(entry = phar_get_entry_info_dir(phar_obj-&gt;archive, fname, fname_len, 1, &amp;error, 0))) {</span>
<span class='curline'><a href='../S/962.html#L3550'>phar_obj</a>         3550 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot get stub \".phar/stub.php\" directly in phar \"%s\", use getStub", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3555'>phar_obj</a>         3555 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot get alias \".phar/alias.txt\" directly in phar \"%s\", use getAlias", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3560'>phar_obj</a>         3560 ext/phar/phar_object.c 			zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot directly get any files or directories in magic \".phar\" directory", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3569'>phar_obj</a>         3569 ext/phar/phar_object.c 		sfname = strpprintf(0, "phar://%s/%s", phar_obj-&gt;archive-&gt;fname, fname);</span>
<span class='curline'><a href='../S/962.html#L3571'>phar_obj</a>         3571 ext/phar/phar_object.c 		spl_instantiate_arg_ex1(phar_obj-&gt;spl.info_class, return_value, &amp;zfname);</span>
<span class='curline'><a href='../S/962.html#L3683'>phar_obj</a>         3683 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3694'>phar_obj</a>         3694 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot set stub \".phar/stub.php\" directly in phar \"%s\", use setStub", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3699'>phar_obj</a>         3699 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot set alias \".phar/alias.txt\" directly in phar \"%s\", use setAlias", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3704'>phar_obj</a>         3704 ext/phar/phar_object.c 		zend_throw_exception_ex(spl_ce_BadMethodCallException, 0, "Cannot set any files or directories in magic \".phar\" directory", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3708'>phar_obj</a>         3708 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;archive), fname, fname_len, cont_str, cont_len, zresource);</span>
<span class='curline'><a href='../S/962.html#L3722'>phar_obj</a>         3722 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L3731'>phar_obj</a>         3731 ext/phar/phar_object.c 	if (zend_hash_str_exists(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len)) {</span>
<span class='curline'><a href='../S/962.html#L3732'>phar_obj</a>         3732 ext/phar/phar_object.c 		if (NULL != (entry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len))) {</span>
<span class='curline'><a href='../S/962.html#L3738'>phar_obj</a>         3738 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/962.html#L3739'>phar_obj</a>         3739 ext/phar/phar_object.c 				if (FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L3740'>phar_obj</a>         3740 ext/phar/phar_object.c 					zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3744'>phar_obj</a>         3744 ext/phar/phar_object.c 				entry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, fname, (uint) fname_len);</span>
<span class='curline'><a href='../S/962.html#L3749'>phar_obj</a>         3749 ext/phar/phar_object.c 			phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L3783'>phar_obj</a>         3783 ext/phar/phar_object.c 	phar_mkdir(&amp;phar_obj-&gt;archive, dirname, dirname_len);</span>
<span class='curline'><a href='../S/962.html#L3826'>phar_obj</a>         3826 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;archive), fname, fname_len, NULL, 0, &amp;zresource);</span>
<span class='curline'><a href='../S/962.html#L3845'>phar_obj</a>         3845 ext/phar/phar_object.c 	phar_add_file(&amp;(phar_obj-&gt;archive), localname, localname_len, cont_str, cont_len, NULL);</span>
<span class='curline'><a href='../S/962.html#L3866'>phar_obj</a>         3866 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_tar || phar_obj-&gt;archive-&gt;is_zip) {</span>
<span class='curline'><a href='../S/962.html#L3868'>phar_obj</a>         3868 ext/phar/phar_object.c 		if (NULL != (stub = zend_hash_str_find_ptr(&amp;(phar_obj-&gt;archive-&gt;manifest), ".phar/stub.php", sizeof(".phar/stub.php")-1))) {</span>
<span class='curline'><a href='../S/962.html#L3869'>phar_obj</a>         3869 ext/phar/phar_object.c 			if (phar_obj-&gt;archive-&gt;fp &amp;&amp; !phar_obj-&gt;archive-&gt;is_brandnew &amp;&amp; !(stub-&gt;flags &amp; PHAR_ENT_COMPRESSION_MASK)) {</span>
<span class='curline'><a href='../S/962.html#L3870'>phar_obj</a>         3870 ext/phar/phar_object.c 				fp = phar_obj-&gt;archive-&gt;fp;</span>
<span class='curline'><a href='../S/962.html#L3872'>phar_obj</a>         3872 ext/phar/phar_object.c 				if (!(fp = php_stream_open_wrapper(phar_obj-&gt;archive-&gt;fname, "rb", 0, NULL))) {</span>
<span class='curline'><a href='../S/962.html#L3873'>phar_obj</a>         3873 ext/phar/phar_object.c 					zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0, "phar error: unable to open phar \"%s\"", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L3885'>phar_obj</a>         3885 ext/phar/phar_object.c 						zend_throw_exception_ex(spl_ce_UnexpectedValueException, 0, "phar error: unable to read stub of phar \"%s\" (cannot create %s filter)", phar_obj-&gt;archive-&gt;fname, phar_decompress_filter(stub, 1));</span>
<span class='curline'><a href='../S/962.html#L3905'>phar_obj</a>         3905 ext/phar/phar_object.c 	len = phar_obj-&gt;archive-&gt;halt_offset;</span>
<span class='curline'><a href='../S/962.html#L3907'>phar_obj</a>         3907 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;fp &amp;&amp; !phar_obj-&gt;archive-&gt;is_brandnew) {</span>
<span class='curline'><a href='../S/962.html#L3908'>phar_obj</a>         3908 ext/phar/phar_object.c 		fp = phar_obj-&gt;archive-&gt;fp;</span>
<span class='curline'><a href='../S/962.html#L3910'>phar_obj</a>         3910 ext/phar/phar_object.c 		fp = php_stream_open_wrapper(phar_obj-&gt;archive-&gt;fname, "rb", 0, NULL);</span>
<span class='curline'><a href='../S/962.html#L3924'>phar_obj</a>         3924 ext/phar/phar_object.c 		if (fp != phar_obj-&gt;archive-&gt;fp) {</span>
<span class='curline'><a href='../S/962.html#L3938'>phar_obj</a>         3938 ext/phar/phar_object.c 	if (fp != phar_obj-&gt;archive-&gt;fp) {</span>
<span class='curline'><a href='../S/962.html#L3955'>phar_obj</a>         3955 ext/phar/phar_object.c 	RETURN_BOOL(Z_TYPE(phar_obj-&gt;archive-&gt;metadata) != IS_UNDEF);</span>
<span class='curline'><a href='../S/962.html#L3970'>phar_obj</a>         3970 ext/phar/phar_object.c 	if (Z_TYPE(phar_obj-&gt;archive-&gt;metadata) != IS_UNDEF) {</span>
<span class='curline'><a href='../S/962.html#L3971'>phar_obj</a>         3971 ext/phar/phar_object.c 		if (phar_obj-&gt;archive-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/962.html#L3972'>phar_obj</a>         3972 ext/phar/phar_object.c 			char *buf = estrndup((char *) Z_PTR(phar_obj-&gt;archive-&gt;metadata), phar_obj-&gt;archive-&gt;metadata_len);</span>
<span class='curline'><a href='../S/962.html#L3974'>phar_obj</a>         3974 ext/phar/phar_object.c 			phar_parse_metadata(&amp;buf, return_value, phar_obj-&gt;archive-&gt;metadata_len);</span>
<span class='curline'><a href='../S/962.html#L3977'>phar_obj</a>         3977 ext/phar/phar_object.c 			ZVAL_COPY(return_value, &amp;phar_obj-&gt;archive-&gt;metadata);</span>
<span class='curline'><a href='../S/962.html#L3993'>phar_obj</a>         3993 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L4002'>phar_obj</a>         4002 ext/phar/phar_object.c 	if (phar_obj-&gt;archive-&gt;is_persistent &amp;&amp; FAILURE == phar_copy_on_write(&amp;(phar_obj-&gt;archive))) {</span>
<span class='curline'><a href='../S/962.html#L4003'>phar_obj</a>         4003 ext/phar/phar_object.c 		zend_throw_exception_ex(phar_ce_PharException, 0, "phar \"%s\" is persistent, unable to copy on write", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L4006'>phar_obj</a>         4006 ext/phar/phar_object.c 	if (Z_TYPE(phar_obj-&gt;archive-&gt;metadata) != IS_UNDEF) {</span>
<span class='curline'><a href='../S/962.html#L4007'>phar_obj</a>         4007 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;archive-&gt;metadata);</span>
<span class='curline'><a href='../S/962.html#L4008'>phar_obj</a>         4008 ext/phar/phar_object.c 		ZVAL_UNDEF(&amp;phar_obj-&gt;archive-&gt;metadata);</span>
<span class='curline'><a href='../S/962.html#L4011'>phar_obj</a>         4011 ext/phar/phar_object.c 	ZVAL_COPY(&amp;phar_obj-&gt;archive-&gt;metadata, metadata);</span>
<span class='curline'><a href='../S/962.html#L4012'>phar_obj</a>         4012 ext/phar/phar_object.c 	phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L4013'>phar_obj</a>         4013 ext/phar/phar_object.c 	phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L4031'>phar_obj</a>         4031 ext/phar/phar_object.c 	if (PHAR_G(readonly) &amp;&amp; !phar_obj-&gt;archive-&gt;is_data) {</span>
<span class='curline'><a href='../S/962.html#L4036'>phar_obj</a>         4036 ext/phar/phar_object.c 	if (Z_TYPE(phar_obj-&gt;archive-&gt;metadata) != IS_UNDEF) {</span>
<span class='curline'><a href='../S/962.html#L4037'>phar_obj</a>         4037 ext/phar/phar_object.c 		zval_ptr_dtor(&amp;phar_obj-&gt;archive-&gt;metadata);</span>
<span class='curline'><a href='../S/962.html#L4038'>phar_obj</a>         4038 ext/phar/phar_object.c 		ZVAL_UNDEF(&amp;phar_obj-&gt;archive-&gt;metadata);</span>
<span class='curline'><a href='../S/962.html#L4039'>phar_obj</a>         4039 ext/phar/phar_object.c 		phar_obj-&gt;archive-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/962.html#L4040'>phar_obj</a>         4040 ext/phar/phar_object.c 		phar_flush(phar_obj-&gt;archive, 0, 0, 0, &amp;error);</span>
<span class='curline'><a href='../S/962.html#L4271'>phar_obj</a>         4271 ext/phar/phar_object.c 	fp = php_stream_open_wrapper(phar_obj-&gt;archive-&gt;fname, "rb", IGNORE_URL|STREAM_MUST_SEEK, NULL);</span>
<span class='curline'><a href='../S/962.html#L4275'>phar_obj</a>         4275 ext/phar/phar_object.c 			"Invalid argument, %s cannot be found", phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L4332'>phar_obj</a>         4332 ext/phar/phar_object.c 						if (NULL == (entry = zend_hash_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, Z_STR_P(zval_file)))) {</span>
<span class='curline'><a href='../S/962.html#L4334'>phar_obj</a>         4334 ext/phar/phar_object.c 								"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", Z_STRVAL_P(zval_file), phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L4338'>phar_obj</a>         4338 ext/phar/phar_object.c 								"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/962.html#L4351'>phar_obj</a>         4351 ext/phar/phar_object.c 		if (NULL == (entry = zend_hash_str_find_ptr(&amp;phar_obj-&gt;archive-&gt;manifest, filename, filename_len))) {</span>
<span class='curline'><a href='../S/962.html#L4353'>phar_obj</a>         4353 ext/phar/phar_object.c 				"Phar Error: attempted to extract non-existent file \"%s\" from phar \"%s\"", filename, phar_obj-&gt;archive-&gt;fname);</span>
<span class='curline'><a href='../S/962.html#L4359'>phar_obj</a>         4359 ext/phar/phar_object.c 				"Extraction from phar \"%s\" failed: %s", phar_obj-&gt;archive-&gt;fname, error);</span>
<span class='curline'><a href='../S/962.html#L4366'>phar_obj</a>         4366 ext/phar/phar_object.c 		phar = phar_obj-&gt;archive;</span>
</pre>
</body>
</html>
