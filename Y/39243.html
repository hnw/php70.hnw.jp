<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>ubuf</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/162.html#L74'>ubuf</a>               74 ext/fileinfo/libmagic/ascmagic.c 	unichar *ubuf = NULL;</span>
<span class='curline'><a href='../S/162.html#L88'>ubuf</a>               88 ext/fileinfo/libmagic/ascmagic.c 	if (file_encoding(ms, buf, nbytes, &amp;ubuf, &amp;ulen, &amp;code, &amp;code_mime,</span>
<span class='curline'><a href='../S/162.html#L92'>ubuf</a>               92 ext/fileinfo/libmagic/ascmagic.c 		rv = file_ascmagic_with_encoding(ms, buf, nbytes, ubuf, ulen, code,</span>
<span class='curline'><a href='../S/162.html#L95'>ubuf</a>               95 ext/fileinfo/libmagic/ascmagic.c 	free(ubuf);</span>
<span class='curline'><a href='../S/162.html#L102'>ubuf</a>              102 ext/fileinfo/libmagic/ascmagic.c     size_t nbytes, unichar *ubuf, size_t ulen, const char *code,</span>
<span class='curline'><a href='../S/162.html#L146'>ubuf</a>              146 ext/fileinfo/libmagic/ascmagic.c 		if ((utf8_end = encode_utf8(utf8_buf, mlen, ubuf, ulen))</span>
<span class='curline'><a href='../S/162.html#L157'>ubuf</a>              157 ext/fileinfo/libmagic/ascmagic.c 		if (ubuf[i] == '\n') {</span>
<span class='curline'><a href='../S/162.html#L166'>ubuf</a>              166 ext/fileinfo/libmagic/ascmagic.c 		seen_cr = (ubuf[i] == '\r');</span>
<span class='curline'><a href='../S/162.html#L170'>ubuf</a>              170 ext/fileinfo/libmagic/ascmagic.c 		if (ubuf[i] == 0x85) { /* X3.64/ECMA-43 "next line" character */</span>
<span class='curline'><a href='../S/162.html#L179'>ubuf</a>              179 ext/fileinfo/libmagic/ascmagic.c 		if (ubuf[i] == '\033')</span>
<span class='curline'><a href='../S/162.html#L181'>ubuf</a>              181 ext/fileinfo/libmagic/ascmagic.c 		if (ubuf[i] == '\b')</span>
<span class='curline'><a href='../S/162.html#L312'>ubuf</a>              312 ext/fileinfo/libmagic/ascmagic.c encode_utf8(unsigned char *buf, size_t len, unichar *ubuf, size_t ulen)</span>
<span class='curline'><a href='../S/162.html#L318'>ubuf</a>              318 ext/fileinfo/libmagic/ascmagic.c 		if (ubuf[i] &lt;= 0x7f) {</span>
<span class='curline'><a href='../S/162.html#L321'>ubuf</a>              321 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)ubuf[i];</span>
<span class='curline'><a href='../S/162.html#L322'>ubuf</a>              322 ext/fileinfo/libmagic/ascmagic.c 		} else if (ubuf[i] &lt;= 0x7ff) {</span>
<span class='curline'><a href='../S/162.html#L325'>ubuf</a>              325 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &gt;&gt; 6) + 0xc0);</span>
<span class='curline'><a href='../S/162.html#L326'>ubuf</a>              326 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L327'>ubuf</a>              327 ext/fileinfo/libmagic/ascmagic.c 		} else if (ubuf[i] &lt;= 0xffff) {</span>
<span class='curline'><a href='../S/162.html#L330'>ubuf</a>              330 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &gt;&gt; 12) + 0xe0);</span>
<span class='curline'><a href='../S/162.html#L331'>ubuf</a>              331 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 6) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L332'>ubuf</a>              332 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L333'>ubuf</a>              333 ext/fileinfo/libmagic/ascmagic.c 		} else if (ubuf[i] &lt;= 0x1fffff) {</span>
<span class='curline'><a href='../S/162.html#L336'>ubuf</a>              336 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &gt;&gt; 18) + 0xf0);</span>
<span class='curline'><a href='../S/162.html#L337'>ubuf</a>              337 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 12) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L338'>ubuf</a>              338 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt;  6) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L339'>ubuf</a>              339 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L340'>ubuf</a>              340 ext/fileinfo/libmagic/ascmagic.c 		} else if (ubuf[i] &lt;= 0x3ffffff) {</span>
<span class='curline'><a href='../S/162.html#L343'>ubuf</a>              343 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &gt;&gt; 24) + 0xf8);</span>
<span class='curline'><a href='../S/162.html#L344'>ubuf</a>              344 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 18) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L345'>ubuf</a>              345 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 12) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L346'>ubuf</a>              346 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt;  6) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L347'>ubuf</a>              347 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L348'>ubuf</a>              348 ext/fileinfo/libmagic/ascmagic.c 		} else if (ubuf[i] &lt;= 0x7fffffff) {</span>
<span class='curline'><a href='../S/162.html#L351'>ubuf</a>              351 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &gt;&gt; 30) + 0xfc);</span>
<span class='curline'><a href='../S/162.html#L352'>ubuf</a>              352 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 24) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L353'>ubuf</a>              353 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 18) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L354'>ubuf</a>              354 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt; 12) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L355'>ubuf</a>              355 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)(((ubuf[i] &gt;&gt;  6) &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/162.html#L356'>ubuf</a>              356 ext/fileinfo/libmagic/ascmagic.c 			*buf++ = (unsigned char)((ubuf[i] &amp; 0x3f) + 0x80);</span>
<span class='curline'><a href='../S/169.html#L68'>ubuf</a>               68 ext/fileinfo/libmagic/encoding.c file_encoding(struct magic_set *ms, const unsigned char *buf, size_t nbytes, unichar **ubuf, size_t *ulen, const char **code, const char **code_mime, const char **type)</span>
<span class='curline'><a href='../S/169.html#L79'>ubuf</a>               79 ext/fileinfo/libmagic/encoding.c 	mlen = (nbytes + 1) * sizeof((*ubuf)[0]);</span>
<span class='curline'><a href='../S/169.html#L80'>ubuf</a>               80 ext/fileinfo/libmagic/encoding.c 	if ((*ubuf = CAST(unichar *, calloc((size_t)1, mlen))) == NULL) {</span>
<span class='curline'><a href='../S/169.html#L90'>ubuf</a>               90 ext/fileinfo/libmagic/encoding.c 	if (looks_ascii(buf, nbytes, *ubuf, ulen)) {</span>
<span class='curline'><a href='../S/169.html#L94'>ubuf</a>               94 ext/fileinfo/libmagic/encoding.c 	} else if (looks_utf8_with_BOM(buf, nbytes, *ubuf, ulen) &gt; 0) {</span>
<span class='curline'><a href='../S/169.html#L98'>ubuf</a>               98 ext/fileinfo/libmagic/encoding.c 	} else if (file_looks_utf8(buf, nbytes, *ubuf, ulen) &gt; 1) {</span>
<span class='curline'><a href='../S/169.html#L102'>ubuf</a>              102 ext/fileinfo/libmagic/encoding.c 	} else if ((ucs_type = looks_ucs16(buf, nbytes, *ubuf, ulen)) != 0) {</span>
<span class='curline'><a href='../S/169.html#L111'>ubuf</a>              111 ext/fileinfo/libmagic/encoding.c 	} else if (looks_latin1(buf, nbytes, *ubuf, ulen)) {</span>
<span class='curline'><a href='../S/169.html#L115'>ubuf</a>              115 ext/fileinfo/libmagic/encoding.c 	} else if (looks_extended(buf, nbytes, *ubuf, ulen)) {</span>
<span class='curline'><a href='../S/169.html#L122'>ubuf</a>              122 ext/fileinfo/libmagic/encoding.c 		if (looks_ascii(nbuf, nbytes, *ubuf, ulen)) {</span>
<span class='curline'><a href='../S/169.html#L126'>ubuf</a>              126 ext/fileinfo/libmagic/encoding.c 		} else if (looks_latin1(nbuf, nbytes, *ubuf, ulen)) {</span>
<span class='curline'><a href='../S/169.html#L224'>ubuf</a>              224 ext/fileinfo/libmagic/encoding.c looks_ascii(const unsigned char *buf, size_t nbytes, unichar *ubuf,</span>
<span class='curline'><a href='../S/169.html#L237'>ubuf</a>              237 ext/fileinfo/libmagic/encoding.c 		ubuf[(*ulen)++] = buf[i];</span>
<span class='curline'><a href='../S/169.html#L244'>ubuf</a>              244 ext/fileinfo/libmagic/encoding.c looks_latin1(const unsigned char *buf, size_t nbytes, unichar *ubuf, size_t *ulen)</span>
<span class='curline'><a href='../S/169.html#L256'>ubuf</a>              256 ext/fileinfo/libmagic/encoding.c 		ubuf[(*ulen)++] = buf[i];</span>
<span class='curline'><a href='../S/169.html#L263'>ubuf</a>              263 ext/fileinfo/libmagic/encoding.c looks_extended(const unsigned char *buf, size_t nbytes, unichar *ubuf,</span>
<span class='curline'><a href='../S/169.html#L276'>ubuf</a>              276 ext/fileinfo/libmagic/encoding.c 		ubuf[(*ulen)++] = buf[i];</span>
<span class='curline'><a href='../S/169.html#L294'>ubuf</a>              294 ext/fileinfo/libmagic/encoding.c file_looks_utf8(const unsigned char *buf, size_t nbytes, unichar *ubuf, size_t *ulen)</span>
<span class='curline'><a href='../S/169.html#L301'>ubuf</a>              301 ext/fileinfo/libmagic/encoding.c 	if (ubuf)</span>
<span class='curline'><a href='../S/169.html#L314'>ubuf</a>              314 ext/fileinfo/libmagic/encoding.c 			if (ubuf)</span>
<span class='curline'><a href='../S/169.html#L315'>ubuf</a>              315 ext/fileinfo/libmagic/encoding.c 				ubuf[(*ulen)++] = buf[i];</span>
<span class='curline'><a href='../S/169.html#L350'>ubuf</a>              350 ext/fileinfo/libmagic/encoding.c 			if (ubuf)</span>
<span class='curline'><a href='../S/169.html#L351'>ubuf</a>              351 ext/fileinfo/libmagic/encoding.c 				ubuf[(*ulen)++] = c;</span>
<span class='curline'><a href='../S/169.html#L365'>ubuf</a>              365 ext/fileinfo/libmagic/encoding.c looks_utf8_with_BOM(const unsigned char *buf, size_t nbytes, unichar *ubuf,</span>
<span class='curline'><a href='../S/169.html#L369'>ubuf</a>              369 ext/fileinfo/libmagic/encoding.c 		return file_looks_utf8(buf + 3, nbytes - 3, ubuf, ulen);</span>
<span class='curline'><a href='../S/169.html#L375'>ubuf</a>              375 ext/fileinfo/libmagic/encoding.c looks_ucs16(const unsigned char *buf, size_t nbytes, unichar *ubuf,</span>
<span class='curline'><a href='../S/169.html#L397'>ubuf</a>              397 ext/fileinfo/libmagic/encoding.c 			ubuf[(*ulen)++] = buf[i + 1] + 256 * buf[i];</span>
<span class='curline'><a href='../S/169.html#L399'>ubuf</a>              399 ext/fileinfo/libmagic/encoding.c 			ubuf[(*ulen)++] = buf[i] + 256 * buf[i + 1];</span>
<span class='curline'><a href='../S/169.html#L401'>ubuf</a>              401 ext/fileinfo/libmagic/encoding.c 		if (ubuf[*ulen - 1] == 0xfffe)</span>
<span class='curline'><a href='../S/169.html#L403'>ubuf</a>              403 ext/fileinfo/libmagic/encoding.c 		if (ubuf[*ulen - 1] &lt; 128 &amp;&amp;</span>
<span class='curline'><a href='../S/169.html#L404'>ubuf</a>              404 ext/fileinfo/libmagic/encoding.c 		    text_chars[(size_t)ubuf[*ulen - 1]] != T)</span>
<span class='curline'><a href='../S/172.html#L169'>ubuf</a>              169 ext/fileinfo/libmagic/funcs.c 	const unsigned char *ubuf = CAST(const unsigned char *, buf);</span>
<span class='curline'><a href='../S/172.html#L188'>ubuf</a>              188 ext/fileinfo/libmagic/funcs.c 		looks_text = file_encoding(ms, ubuf, nb, &amp;u8buf, &amp;ulen,</span>
<span class='curline'><a href='../S/172.html#L207'>ubuf</a>              207 ext/fileinfo/libmagic/funcs.c 		if ((m = file_zmagic(ms, stream, inname, ubuf, nb)) != 0) {</span>
<span class='curline'><a href='../S/172.html#L215'>ubuf</a>              215 ext/fileinfo/libmagic/funcs.c 		if ((m = file_is_tar(ms, ubuf, nb)) != 0) {</span>
<span class='curline'><a href='../S/172.html#L225'>ubuf</a>              225 ext/fileinfo/libmagic/funcs.c 			if ((m = file_trycdf(ms, fd, ubuf, nb)) != 0) {</span>
<span class='curline'><a href='../S/172.html#L235'>ubuf</a>              235 ext/fileinfo/libmagic/funcs.c 		if ((m = file_softmagic(ms, ubuf, nb, 0, NULL, BINTEST,</span>
<span class='curline'><a href='../S/172.html#L251'>ubuf</a>              251 ext/fileinfo/libmagic/funcs.c 				if ((m = file_tryelf(ms, fd, ubuf, nb)) != 0)</span>
<span class='curline'><a href='../S/172.html#L263'>ubuf</a>              263 ext/fileinfo/libmagic/funcs.c 		if ((m = file_ascmagic(ms, ubuf, nb, looks_text)) != 0) {</span>
<span class='curline'><a href='../S/993.html#L1186'>ubuf</a>             1186 ext/session/session.c static inline void strcpy_gmt(char *ubuf, time_t *when) /* {{{ */</span>
<span class='curline'><a href='../S/993.html#L1195'>ubuf</a>             1195 ext/session/session.c 		ubuf[0] = '\0';</span>
<span class='curline'><a href='../S/993.html#L1204'>ubuf</a>             1204 ext/session/session.c 	memcpy(ubuf, buf, n);</span>
<span class='curline'><a href='../S/993.html#L1205'>ubuf</a>             1205 ext/session/session.c 	ubuf[n] = '\0';</span>
</pre>
</body>
</html>
