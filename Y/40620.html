<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>watch</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1558.html#L94'>watch</a>              94 sapi/phpdbg/phpdbg_prompt.c 	PHPDBG_COMMAND_D(watch,   "set watchpoint",                           'w', phpdbg_watch_commands, "|ss", 0),</span>
<span class='curline'><a href='../S/1558.html#L1326'>watch</a>            1326 sapi/phpdbg/phpdbg_prompt.c PHPDBG_COMMAND(watch) /* {{{ */</span>
<span class='curline'><a href='../S/1559.html#L58'>watch</a>              58 sapi/phpdbg/phpdbg_prompt.h PHPDBG_COMMAND(watch);</span>
<span class='curline'><a href='../S/1572.html#L97'>watch</a>              97 sapi/phpdbg/phpdbg_watch.c #define HT_WATCH_HT(watch) HT_PTR_HT((watch)-&gt;addr.ptr)</span>
<span class='curline'><a href='../S/1572.html#L111'>watch</a>             111 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1572.html#L118'>watch</a>             118 sapi/phpdbg/phpdbg_watch.c 	watch = result-&gt;ptr;</span>
<span class='curline'><a href='../S/1572.html#L121'>watch</a>             121 sapi/phpdbg/phpdbg_watch.c 	if ((char *) phpdbg_get_page_boundary(watch-&gt;addr.ptr) &gt; (char *) addr || (char *) phpdbg_get_page_boundary(watch-&gt;addr.ptr) + phpdbg_get_total_page_size(watch-&gt;addr.ptr, watch-&gt;size) &lt; (char *) addr) {</span>
<span class='curline'><a href='../S/1572.html#L126'>watch</a>             126 sapi/phpdbg/phpdbg_watch.c 	return watch;</span>
<span class='curline'><a href='../S/1572.html#L129'>watch</a>             129 sapi/phpdbg/phpdbg_watch.c static void phpdbg_change_watchpoint_access(phpdbg_watchpoint_t *watch, int access) {</span>
<span class='curline'><a href='../S/1572.html#L131'>watch</a>             131 sapi/phpdbg/phpdbg_watch.c 	mprotect(phpdbg_get_page_boundary(watch-&gt;addr.ptr), phpdbg_get_total_page_size(watch-&gt;addr.ptr, watch-&gt;size), access);</span>
<span class='curline'><a href='../S/1572.html#L134'>watch</a>             134 sapi/phpdbg/phpdbg_watch.c static inline void phpdbg_activate_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L135'>watch</a>             135 sapi/phpdbg/phpdbg_watch.c 	phpdbg_change_watchpoint_access(watch, PROT_READ);</span>
<span class='curline'><a href='../S/1572.html#L138'>watch</a>             138 sapi/phpdbg/phpdbg_watch.c static inline void phpdbg_deactivate_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L139'>watch</a>             139 sapi/phpdbg/phpdbg_watch.c 	phpdbg_change_watchpoint_access(watch, PROT_READ | PROT_WRITE);</span>
<span class='curline'><a href='../S/1572.html#L142'>watch</a>             142 sapi/phpdbg/phpdbg_watch.c static inline void phpdbg_store_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L143'>watch</a>             143 sapi/phpdbg/phpdbg_watch.c 	phpdbg_btree_insert(&amp;PHPDBG_G(watchpoint_tree), (zend_ulong) watch-&gt;addr.ptr, watch);</span>
<span class='curline'><a href='../S/1572.html#L146'>watch</a>             146 sapi/phpdbg/phpdbg_watch.c static inline void phpdbg_remove_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L147'>watch</a>             147 sapi/phpdbg/phpdbg_watch.c 	phpdbg_btree_delete(&amp;PHPDBG_G(watchpoint_tree), (zend_ulong) watch-&gt;addr.ptr);</span>
<span class='curline'><a href='../S/1572.html#L150'>watch</a>             150 sapi/phpdbg/phpdbg_watch.c void phpdbg_create_addr_watchpoint(void *addr, size_t size, phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L151'>watch</a>             151 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;addr.ptr = addr;</span>
<span class='curline'><a href='../S/1572.html#L152'>watch</a>             152 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;size = size;</span>
<span class='curline'><a href='../S/1572.html#L155'>watch</a>             155 sapi/phpdbg/phpdbg_watch.c void phpdbg_create_zval_watchpoint(zval *zv, phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L156'>watch</a>             156 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_addr_watchpoint(zv, sizeof(zval), watch);</span>
<span class='curline'><a href='../S/1572.html#L157'>watch</a>             157 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;type = WATCH_ON_ZVAL;</span>
<span class='curline'><a href='../S/1572.html#L160'>watch</a>             160 sapi/phpdbg/phpdbg_watch.c void phpdbg_create_ht_watchpoint(HashTable *ht, phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L161'>watch</a>             161 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_addr_watchpoint(((char *) ht) + HT_WATCH_OFFSET, sizeof(HashTable) - HT_WATCH_OFFSET, watch);</span>
<span class='curline'><a href='../S/1572.html#L162'>watch</a>             162 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;type = WATCH_ON_HASHTABLE;</span>
<span class='curline'><a href='../S/1572.html#L163'>watch</a>             163 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;implicit_ht_count = 0;</span>
<span class='curline'><a href='../S/1572.html#L166'>watch</a>             166 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_recursive_ht_watch(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L167'>watch</a>             167 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_recursive_zval_watch(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L171'>watch</a>             171 sapi/phpdbg/phpdbg_watch.c static void phpdbg_free_watch(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L172'>watch</a>             172 sapi/phpdbg/phpdbg_watch.c 	zend_string_release(watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L173'>watch</a>             173 sapi/phpdbg/phpdbg_watch.c 	zend_string_release(watch-&gt;name_in_parent);</span>
<span class='curline'><a href='../S/1572.html#L177'>watch</a>             177 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_ht_watchpoints_recursive(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L178'>watch</a>             178 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_zval_watchpoints_recursive(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L179'>watch</a>             179 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_watchpoints_recursive(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L183'>watch</a>             183 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch = emalloc(sizeof(phpdbg_watchpoint_t));</span>
<span class='curline'><a href='../S/1572.html#L184'>watch</a>             184 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;flags = parent-&gt;flags;</span>
<span class='curline'><a href='../S/1572.html#L185'>watch</a>             185 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;parent = parent;</span>
<span class='curline'><a href='../S/1572.html#L186'>watch</a>             186 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;str = parent-&gt;str;</span>
<span class='curline'><a href='../S/1572.html#L188'>watch</a>             188 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_addr_watchpoint(&amp;GC_REFCOUNT(ref), sizeof(uint32_t), watch);</span>
<span class='curline'><a href='../S/1572.html#L189'>watch</a>             189 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;type = WATCH_ON_REFCOUNTED;</span>
<span class='curline'><a href='../S/1572.html#L191'>watch</a>             191 sapi/phpdbg/phpdbg_watch.c 	return watch;</span>
<span class='curline'><a href='../S/1572.html#L195'>watch</a>             195 sapi/phpdbg/phpdbg_watch.c static void phpdbg_add_watch_collision(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L199'>watch</a>             199 sapi/phpdbg/phpdbg_watch.c 	ZEND_ASSERT(((watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) == 0) ^ ((watch-&gt;flags &amp; (PHPDBG_WATCH_IMPLICIT | PHPDBG_WATCH_SIMPLE)) == 0));</span>
<span class='curline'><a href='../S/1572.html#L201'>watch</a>             201 sapi/phpdbg/phpdbg_watch.c 	if ((cur = zend_hash_index_find_ptr(&amp;PHPDBG_G(watch_collisions), (zend_ulong) watch-&gt;addr.ref))) {</span>
<span class='curline'><a href='../S/1572.html#L204'>watch</a>             204 sapi/phpdbg/phpdbg_watch.c 		if ((old = zend_hash_find_ptr(&amp;cur-&gt;watches, watch-&gt;str)) || (old = zend_hash_find_ptr(&amp;cur-&gt;implicit_watches, watch-&gt;str))) {</span>
<span class='curline'><a href='../S/1572.html#L205'>watch</a>             205 sapi/phpdbg/phpdbg_watch.c 			if (((old-&gt;flags ^ watch-&gt;flags) &amp; (PHPDBG_WATCH_NORMAL|PHPDBG_WATCH_IMPLICIT)) == 0) {</span>
<span class='curline'><a href='../S/1572.html#L212'>watch</a>             212 sapi/phpdbg/phpdbg_watch.c 				if (!(watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) &amp;&amp; !--cur-&gt;refs) {</span>
<span class='curline'><a href='../S/1572.html#L213'>watch</a>             213 sapi/phpdbg/phpdbg_watch.c 					phpdbg_delete_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L217'>watch</a>             217 sapi/phpdbg/phpdbg_watch.c 				zend_hash_del(&amp;cur-&gt;watches, watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L219'>watch</a>             219 sapi/phpdbg/phpdbg_watch.c 					cur-&gt;watch = Z_PTR_P(zend_hash_get_current_data_ex(&amp;cur-&gt;watches, NULL));</span>
<span class='curline'><a href='../S/1572.html#L221'>watch</a>             221 sapi/phpdbg/phpdbg_watch.c 					cur-&gt;watch = Z_PTR_P(zend_hash_get_current_data_ex(&amp;cur-&gt;implicit_watches, NULL));</span>
<span class='curline'><a href='../S/1572.html#L225'>watch</a>             225 sapi/phpdbg/phpdbg_watch.c 				zend_hash_del(&amp;cur-&gt;implicit_watches, watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L228'>watch</a>             228 sapi/phpdbg/phpdbg_watch.c 			old-&gt;flags = watch-&gt;flags;</span>
<span class='curline'><a href='../S/1572.html#L229'>watch</a>             229 sapi/phpdbg/phpdbg_watch.c 			phpdbg_free_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L230'>watch</a>             230 sapi/phpdbg/phpdbg_watch.c 			efree(watch);</span>
<span class='curline'><a href='../S/1572.html#L231'>watch</a>             231 sapi/phpdbg/phpdbg_watch.c 			watch = old;</span>
<span class='curline'><a href='../S/1572.html#L233'>watch</a>             233 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L235'>watch</a>             235 sapi/phpdbg/phpdbg_watch.c 				phpdbg_create_recursive_zval_watch(watch-&gt;parent);</span>
<span class='curline'><a href='../S/1572.html#L240'>watch</a>             240 sapi/phpdbg/phpdbg_watch.c 		coll.refs = (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) != 0;</span>
<span class='curline'><a href='../S/1572.html#L241'>watch</a>             241 sapi/phpdbg/phpdbg_watch.c 		coll.watch = watch;</span>
<span class='curline'><a href='../S/1572.html#L244'>watch</a>             244 sapi/phpdbg/phpdbg_watch.c 		cur = zend_hash_index_add_mem(&amp;PHPDBG_G(watch_collisions), (zend_ulong) watch-&gt;addr.ref, &amp;coll, sizeof(phpdbg_watch_collision));</span>
<span class='curline'><a href='../S/1572.html#L245'>watch</a>             245 sapi/phpdbg/phpdbg_watch.c 		phpdbg_store_watchpoint(cur-&gt;watch);</span>
<span class='curline'><a href='../S/1572.html#L246'>watch</a>             246 sapi/phpdbg/phpdbg_watch.c 		phpdbg_activate_watchpoint(cur-&gt;watch);</span>
<span class='curline'><a href='../S/1572.html#L248'>watch</a>             248 sapi/phpdbg/phpdbg_watch.c 			phpdbg_create_recursive_zval_watch(watch-&gt;parent);</span>
<span class='curline'><a href='../S/1572.html#L252'>watch</a>             252 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) {</span>
<span class='curline'><a href='../S/1572.html#L253'>watch</a>             253 sapi/phpdbg/phpdbg_watch.c 		cur-&gt;watch = watch;</span>
<span class='curline'><a href='../S/1572.html#L254'>watch</a>             254 sapi/phpdbg/phpdbg_watch.c 		zend_hash_add_ptr(&amp;cur-&gt;watches, watch-&gt;str, watch-&gt;parent);</span>
<span class='curline'><a href='../S/1572.html#L256'>watch</a>             256 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;flags &amp; PHPDBG_WATCH_IMPLICIT) {</span>
<span class='curline'><a href='../S/1572.html#L257'>watch</a>             257 sapi/phpdbg/phpdbg_watch.c 		zend_hash_add_ptr(&amp;cur-&gt;implicit_watches, watch-&gt;str, watch-&gt;parent);</span>
<span class='curline'><a href='../S/1572.html#L261'>watch</a>             261 sapi/phpdbg/phpdbg_watch.c static void phpdbg_remove_watch_collision(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L263'>watch</a>             263 sapi/phpdbg/phpdbg_watch.c 	if ((cur = zend_hash_index_find_ptr(&amp;PHPDBG_G(watch_collisions), (zend_ulong) Z_COUNTED_P(watch-&gt;addr.zv)))) {</span>
<span class='curline'><a href='../S/1572.html#L265'>watch</a>             265 sapi/phpdbg/phpdbg_watch.c 			phpdbg_delete_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L268'>watch</a>             268 sapi/phpdbg/phpdbg_watch.c 		zend_hash_del(&amp;cur-&gt;watches, watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L269'>watch</a>             269 sapi/phpdbg/phpdbg_watch.c 		zend_hash_del(&amp;cur-&gt;implicit_watches, watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L272'>watch</a>             272 sapi/phpdbg/phpdbg_watch.c 			cur-&gt;watch = Z_PTR_P(zend_hash_get_current_data_ex(&amp;cur-&gt;watches, NULL));</span>
<span class='curline'><a href='../S/1572.html#L274'>watch</a>             274 sapi/phpdbg/phpdbg_watch.c 			cur-&gt;watch = Z_PTR_P(zend_hash_get_current_data_ex(&amp;cur-&gt;implicit_watches, NULL));</span>
<span class='curline'><a href='../S/1572.html#L276'>watch</a>             276 sapi/phpdbg/phpdbg_watch.c 			phpdbg_deactivate_watchpoint(cur-&gt;watch);</span>
<span class='curline'><a href='../S/1572.html#L277'>watch</a>             277 sapi/phpdbg/phpdbg_watch.c 			phpdbg_remove_watchpoint(cur-&gt;watch);</span>
<span class='curline'><a href='../S/1572.html#L279'>watch</a>             279 sapi/phpdbg/phpdbg_watch.c 			zend_hash_index_del(&amp;PHPDBG_G(watch_collisions), (zend_ulong) Z_COUNTED_P(watch-&gt;addr.zv));</span>
<span class='curline'><a href='../S/1572.html#L284'>watch</a>             284 sapi/phpdbg/phpdbg_watch.c static phpdbg_watchpoint_t *phpdbg_create_watchpoint(phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1572.html#L286'>watch</a>             286 sapi/phpdbg/phpdbg_watch.c static phpdbg_watchpoint_t *phpdbg_create_reference_watch(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L288'>watch</a>             288 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;reference = ref;</span>
<span class='curline'><a href='../S/1572.html#L289'>watch</a>             289 sapi/phpdbg/phpdbg_watch.c 	ref-&gt;flags = watch-&gt;flags;</span>
<span class='curline'><a href='../S/1572.html#L290'>watch</a>             290 sapi/phpdbg/phpdbg_watch.c 	ref-&gt;str = watch-&gt;str;</span>
<span class='curline'><a href='../S/1572.html#L292'>watch</a>             292 sapi/phpdbg/phpdbg_watch.c 	ref-&gt;parent = watch;</span>
<span class='curline'><a href='../S/1572.html#L294'>watch</a>             294 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_zval_watchpoint(Z_REFVAL_P(watch-&gt;addr.zv), ref);</span>
<span class='curline'><a href='../S/1572.html#L322'>watch</a>             322 sapi/phpdbg/phpdbg_watch.c static phpdbg_watchpoint_t *phpdbg_create_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L323'>watch</a>             323 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *ret = watch;</span>
<span class='curline'><a href='../S/1572.html#L325'>watch</a>             325 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L326'>watch</a>             326 sapi/phpdbg/phpdbg_watch.c 		switch (Z_TYPE_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L331'>watch</a>             331 sapi/phpdbg/phpdbg_watch.c 				memset(watch-&gt;addr.zv, 0, sizeof(zend_value));</span>
<span class='curline'><a href='../S/1572.html#L336'>watch</a>             336 sapi/phpdbg/phpdbg_watch.c 	if (!watch-&gt;parent || watch-&gt;parent-&gt;type != WATCH_ON_ZVAL || watch-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L337'>watch</a>             337 sapi/phpdbg/phpdbg_watch.c 		phpdbg_watchpoint_t *old_watch = zend_hash_find_ptr(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L345'>watch</a>             345 sapi/phpdbg/phpdbg_watch.c 	if (watch != old_watch) { \</span>
<span class='curline'><a href='../S/1572.html#L346'>watch</a>             346 sapi/phpdbg/phpdbg_watch.c 		phpdbg_free_watch(watch); \</span>
<span class='curline'><a href='../S/1572.html#L347'>watch</a>             347 sapi/phpdbg/phpdbg_watch.c 		efree(watch); \</span>
<span class='curline'><a href='../S/1572.html#L351'>watch</a>             351 sapi/phpdbg/phpdbg_watch.c 			if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L361'>watch</a>             361 sapi/phpdbg/phpdbg_watch.c 					old_watch-&gt;flags |= watch-&gt;flags &amp; (PHPDBG_WATCH_IMPLICIT | PHPDBG_WATCH_SIMPLE);</span>
<span class='curline'><a href='../S/1572.html#L366'>watch</a>             366 sapi/phpdbg/phpdbg_watch.c 			if (watch-&gt;parent &amp;&amp; watch-&gt;parent-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L367'>watch</a>             367 sapi/phpdbg/phpdbg_watch.c 				watch-&gt;parent-&gt;implicit_ht_count++;</span>
<span class='curline'><a href='../S/1572.html#L369'>watch</a>             369 sapi/phpdbg/phpdbg_watch.c 			zend_hash_add_ptr(&amp;PHPDBG_G(watchpoints), watch-&gt;str, watch);</span>
<span class='curline'><a href='../S/1572.html#L373'>watch</a>             373 sapi/phpdbg/phpdbg_watch.c 	phpdbg_store_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L375'>watch</a>             375 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;parent &amp;&amp; watch-&gt;parent-&gt;type == WATCH_ON_ZVAL &amp;&amp; Z_REFCOUNTED_P(watch-&gt;parent-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L376'>watch</a>             376 sapi/phpdbg/phpdbg_watch.c 		phpdbg_add_watch_collision(phpdbg_create_refcounted_watchpoint(watch, Z_COUNTED_P(watch-&gt;parent-&gt;addr.zv)));</span>
<span class='curline'><a href='../S/1572.html#L379'>watch</a>             379 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L380'>watch</a>             380 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;parent_container) {</span>
<span class='curline'><a href='../S/1572.html#L383'>watch</a>             383 sapi/phpdbg/phpdbg_watch.c 			if (!(find = phpdbg_btree_find(&amp;PHPDBG_G(watch_HashTables), (zend_ulong) watch-&gt;parent_container))) {</span>
<span class='curline'><a href='../S/1572.html#L385'>watch</a>             385 sapi/phpdbg/phpdbg_watch.c 				hti-&gt;dtor = watch-&gt;parent_container-&gt;pDestructor;</span>
<span class='curline'><a href='../S/1572.html#L388'>watch</a>             388 sapi/phpdbg/phpdbg_watch.c 				phpdbg_btree_insert(&amp;PHPDBG_G(watch_HashTables), (zend_ulong) watch-&gt;parent_container, hti);</span>
<span class='curline'><a href='../S/1572.html#L389'>watch</a>             389 sapi/phpdbg/phpdbg_watch.c 				watch-&gt;parent_container-&gt;pDestructor = (dtor_func_t) phpdbg_watch_HashTable_dtor;</span>
<span class='curline'><a href='../S/1572.html#L393'>watch</a>             393 sapi/phpdbg/phpdbg_watch.c 			zend_hash_add_ptr(ht_watches, watch-&gt;name_in_parent, watch);</span>
<span class='curline'><a href='../S/1572.html#L396'>watch</a>             396 sapi/phpdbg/phpdbg_watch.c 		if (Z_ISREF_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L397'>watch</a>             397 sapi/phpdbg/phpdbg_watch.c 			ret = phpdbg_create_reference_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L401'>watch</a>             401 sapi/phpdbg/phpdbg_watch.c 	phpdbg_activate_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L406'>watch</a>             406 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_simple_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L407'>watch</a>             407 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;flags |= PHPDBG_WATCH_SIMPLE;</span>
<span class='curline'><a href='../S/1572.html#L409'>watch</a>             409 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L416'>watch</a>             416 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch = emalloc(sizeof(phpdbg_watchpoint_t));</span>
<span class='curline'><a href='../S/1572.html#L419'>watch</a>             419 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;parent = zv_watch;</span>
<span class='curline'><a href='../S/1572.html#L425'>watch</a>             425 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_ht_watchpoint(ht, watch);</span>
<span class='curline'><a href='../S/1572.html#L427'>watch</a>             427 sapi/phpdbg/phpdbg_watch.c 	if (phpdbg_create_watchpoint(watch) == NULL) {</span>
<span class='curline'><a href='../S/1572.html#L432'>watch</a>             432 sapi/phpdbg/phpdbg_watch.c 		watch-&gt;flags |= PHPDBG_WATCH_ARRAY;</span>
<span class='curline'><a href='../S/1572.html#L434'>watch</a>             434 sapi/phpdbg/phpdbg_watch.c 		watch-&gt;flags |= PHPDBG_WATCH_OBJECT;</span>
<span class='curline'><a href='../S/1572.html#L437'>watch</a>             437 sapi/phpdbg/phpdbg_watch.c 	phpdbg_add_watch_collision(phpdbg_create_refcounted_watchpoint(watch, Z_COUNTED_P(zv)));</span>
<span class='curline'><a href='../S/1572.html#L442'>watch</a>             442 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_recursive_watchpoint(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L443'>watch</a>             443 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;type != WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L447'>watch</a>             447 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;flags |= PHPDBG_WATCH_RECURSIVE;</span>
<span class='curline'><a href='../S/1572.html#L448'>watch</a>             448 sapi/phpdbg/phpdbg_watch.c 	watch = phpdbg_create_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L453'>watch</a>             453 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_recursive_ht_watch(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L458'>watch</a>             458 sapi/phpdbg/phpdbg_watch.c 	ZEND_ASSERT(watch-&gt;type == WATCH_ON_HASHTABLE);</span>
<span class='curline'><a href='../S/1572.html#L460'>watch</a>             460 sapi/phpdbg/phpdbg_watch.c 	ZEND_HASH_FOREACH_KEY_VAL(HT_WATCH_HT(watch), h, key, zv) {</span>
<span class='curline'><a href='../S/1572.html#L464'>watch</a>             464 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;parent = watch;</span>
<span class='curline'><a href='../S/1572.html#L465'>watch</a>             465 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;parent_container = HT_WATCH_HT(watch);</span>
<span class='curline'><a href='../S/1572.html#L474'>watch</a>             474 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;str = strpprintf(0, "%.*s%s%s%s", (int) ZSTR_LEN(watch-&gt;str) - 2, ZSTR_VAL(watch-&gt;str), (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "[" : "-&gt;", phpdbg_get_property_key(ZSTR_VAL(new_watch-&gt;name_in_parent)), (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "]" : "");</span>
<span class='curline'><a href='../S/1572.html#L488'>watch</a>             488 sapi/phpdbg/phpdbg_watch.c static int phpdbg_create_recursive_zval_watch(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L492'>watch</a>             492 sapi/phpdbg/phpdbg_watch.c 	ZEND_ASSERT(watch-&gt;type == WATCH_ON_ZVAL);</span>
<span class='curline'><a href='../S/1572.html#L494'>watch</a>             494 sapi/phpdbg/phpdbg_watch.c 	zvp = watch-&gt;addr.zv;</span>
<span class='curline'><a href='../S/1572.html#L501'>watch</a>             501 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;parent = watch;</span>
<span class='curline'><a href='../S/1572.html#L502'>watch</a>             502 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;parent_container = watch-&gt;parent_container;</span>
<span class='curline'><a href='../S/1572.html#L503'>watch</a>             503 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;name_in_parent = watch-&gt;name_in_parent;</span>
<span class='curline'><a href='../S/1572.html#L505'>watch</a>             505 sapi/phpdbg/phpdbg_watch.c 		new_watch-&gt;str = strpprintf(0, "%.*s[]", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str));</span>
<span class='curline'><a href='../S/1572.html#L523'>watch</a>             523 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_implicit_parents(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L524'>watch</a>             524 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *parent = watch-&gt;parent;</span>
<span class='curline'><a href='../S/1572.html#L538'>watch</a>             538 sapi/phpdbg/phpdbg_watch.c 		if (parent-&gt;type == WATCH_ON_ZVAL &amp;&amp; Z_REFCOUNTED_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L546'>watch</a>             546 sapi/phpdbg/phpdbg_watch.c static int phpdbg_delete_watchpoint_recursive(phpdbg_watchpoint_t *watch, zend_bool user_request) {</span>
<span class='curline'><a href='../S/1572.html#L547'>watch</a>             547 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L549'>watch</a>             549 sapi/phpdbg/phpdbg_watch.c 			phpdbg_delete_ht_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L554'>watch</a>             554 sapi/phpdbg/phpdbg_watch.c 			ht = HT_FROM_ZVP(watch-&gt;addr.zv);</span>
<span class='curline'><a href='../S/1572.html#L560'>watch</a>             560 sapi/phpdbg/phpdbg_watch.c 	} else if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L561'>watch</a>             561 sapi/phpdbg/phpdbg_watch.c 		phpdbg_delete_zval_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L564'>watch</a>             564 sapi/phpdbg/phpdbg_watch.c 	return zend_hash_del(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L567'>watch</a>             567 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_ht_watchpoints_recursive(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L572'>watch</a>             572 sapi/phpdbg/phpdbg_watch.c 	ZEND_HASH_FOREACH_KEY(HT_WATCH_HT(watch), numkey, strkey) {</span>
<span class='curline'><a href='../S/1572.html#L574'>watch</a>             574 sapi/phpdbg/phpdbg_watch.c 			str = strpprintf(0, "%.*s%s%s%s", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str), (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "[" : "-&gt;", phpdbg_get_property_key(ZSTR_VAL(strkey)), (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "]" : "");</span>
<span class='curline'><a href='../S/1572.html#L576'>watch</a>             576 sapi/phpdbg/phpdbg_watch.c 			str = strpprintf(0, "%.*s%s" ZEND_LONG_FMT "%s", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str), (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "[" : "-&gt;", numkey, (watch-&gt;flags &amp; PHPDBG_WATCH_ARRAY) ? "]" : "");</span>
<span class='curline'><a href='../S/1572.html#L587'>watch</a>             587 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_zval_watchpoints_recursive(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L588'>watch</a>             588 sapi/phpdbg/phpdbg_watch.c 	if (Z_REFCOUNTED_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L589'>watch</a>             589 sapi/phpdbg/phpdbg_watch.c 		phpdbg_remove_watch_collision(watch);</span>
<span class='curline'><a href='../S/1572.html#L594'>watch</a>             594 sapi/phpdbg/phpdbg_watch.c static void phpdbg_delete_watchpoints_recursive(phpdbg_watchpoint_t *watch) {</span>
<span class='curline'><a href='../S/1572.html#L595'>watch</a>             595 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L596'>watch</a>             596 sapi/phpdbg/phpdbg_watch.c 		phpdbg_delete_zval_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L597'>watch</a>             597 sapi/phpdbg/phpdbg_watch.c 	} else if (watch-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L598'>watch</a>             598 sapi/phpdbg/phpdbg_watch.c 		phpdbg_delete_ht_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L604'>watch</a>             604 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1572.html#L611'>watch</a>             611 sapi/phpdbg/phpdbg_watch.c 	watch = result-&gt;ptr;</span>
<span class='curline'><a href='../S/1572.html#L613'>watch</a>             613 sapi/phpdbg/phpdbg_watch.c 	if (!(watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) || (watch-&gt;parent &amp;&amp; (watch-&gt;parent-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE))) {</span>
<span class='curline'><a href='../S/1572.html#L617'>watch</a>             617 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L618'>watch</a>             618 sapi/phpdbg/phpdbg_watch.c 		ret = phpdbg_delete_watchpoint_recursive(watch, 1);</span>
<span class='curline'><a href='../S/1572.html#L620'>watch</a>             620 sapi/phpdbg/phpdbg_watch.c 		ret = zend_hash_del(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L631'>watch</a>             631 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch = ecalloc(1, sizeof(phpdbg_watchpoint_t));</span>
<span class='curline'><a href='../S/1572.html#L632'>watch</a>             632 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;str = zend_string_init(name, namelen, 0);</span>
<span class='curline'><a href='../S/1572.html#L633'>watch</a>             633 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;name_in_parent = zend_string_init(key, keylen, 0);</span>
<span class='curline'><a href='../S/1572.html#L634'>watch</a>             634 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;parent_container = parent;</span>
<span class='curline'><a href='../S/1572.html#L635'>watch</a>             635 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_zval_watchpoint(zv, watch);</span>
<span class='curline'><a href='../S/1572.html#L637'>watch</a>             637 sapi/phpdbg/phpdbg_watch.c 	ret = callback(watch);</span>
<span class='curline'><a href='../S/1572.html#L643'>watch</a>             643 sapi/phpdbg/phpdbg_watch.c 		phpdbg_free_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L644'>watch</a>             644 sapi/phpdbg/phpdbg_watch.c 		efree(watch);</span>
<span class='curline'><a href='../S/1572.html#L657'>watch</a>             657 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1572.html#L659'>watch</a>             659 sapi/phpdbg/phpdbg_watch.c 	if ((watch = zend_hash_str_find_ptr(&amp;PHPDBG_G(watchpoints), name, namelen))) {</span>
<span class='curline'><a href='../S/1572.html#L660'>watch</a>             660 sapi/phpdbg/phpdbg_watch.c 		watch-&gt;flags |= PHPDBG_WATCH_IMPLICIT;</span>
<span class='curline'><a href='../S/1572.html#L661'>watch</a>             661 sapi/phpdbg/phpdbg_watch.c 		PHPDBG_G(watch_tmp) = watch;</span>
<span class='curline'><a href='../S/1572.html#L665'>watch</a>             665 sapi/phpdbg/phpdbg_watch.c 	watch = ecalloc(1, sizeof(phpdbg_watchpoint_t));</span>
<span class='curline'><a href='../S/1572.html#L666'>watch</a>             666 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;flags = PHPDBG_WATCH_IMPLICIT;</span>
<span class='curline'><a href='../S/1572.html#L667'>watch</a>             667 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;str = zend_string_init(name, namelen, 0);</span>
<span class='curline'><a href='../S/1572.html#L668'>watch</a>             668 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;name_in_parent = zend_string_init(key, keylen, 0);</span>
<span class='curline'><a href='../S/1572.html#L669'>watch</a>             669 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;parent_container = parent;</span>
<span class='curline'><a href='../S/1572.html#L670'>watch</a>             670 sapi/phpdbg/phpdbg_watch.c 	watch-&gt;parent = PHPDBG_G(watch_tmp);</span>
<span class='curline'><a href='../S/1572.html#L671'>watch</a>             671 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_zval_watchpoint(zv, watch);</span>
<span class='curline'><a href='../S/1572.html#L673'>watch</a>             673 sapi/phpdbg/phpdbg_watch.c 	phpdbg_create_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L678'>watch</a>             678 sapi/phpdbg/phpdbg_watch.c 	PHPDBG_G(watch_tmp) = watch;</span>
<span class='curline'><a href='../S/1572.html#L758'>watch</a>             758 sapi/phpdbg/phpdbg_watch.c 		phpdbg_watchpoint_t *watch = result-&gt;ptr;</span>
<span class='curline'><a href='../S/1572.html#L760'>watch</a>             760 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) {</span>
<span class='curline'><a href='../S/1572.html#L763'>watch</a>             763 sapi/phpdbg/phpdbg_watch.c 			phpdbg_notice("watchdelete", "variable=\"%.*s\" recursive=\"%s\"", "%.*s was removed, removing watchpoint%s", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str), (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) ? " recursively" : "");</span>
<span class='curline'><a href='../S/1572.html#L766'>watch</a>             766 sapi/phpdbg/phpdbg_watch.c 		if ((result = phpdbg_btree_find(&amp;PHPDBG_G(watch_HashTables), (zend_ulong) watch-&gt;parent_container))) {</span>
<span class='curline'><a href='../S/1572.html#L769'>watch</a>             769 sapi/phpdbg/phpdbg_watch.c 			zend_hash_del(&amp;hti-&gt;watches, watch-&gt;name_in_parent);</span>
<span class='curline'><a href='../S/1572.html#L771'>watch</a>             771 sapi/phpdbg/phpdbg_watch.c 				watch-&gt;parent_container-&gt;pDestructor = hti-&gt;dtor;</span>
<span class='curline'><a href='../S/1572.html#L773'>watch</a>             773 sapi/phpdbg/phpdbg_watch.c 				phpdbg_btree_delete(&amp;PHPDBG_G(watch_HashTables), (zend_ulong) watch-&gt;parent_container);</span>
<span class='curline'><a href='../S/1572.html#L780'>watch</a>             780 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L781'>watch</a>             781 sapi/phpdbg/phpdbg_watch.c 			phpdbg_delete_watchpoint_recursive(watch, 0);</span>
<span class='curline'><a href='../S/1572.html#L783'>watch</a>             783 sapi/phpdbg/phpdbg_watch.c 			zend_hash_del(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L811'>watch</a>             811 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1572.html#L814'>watch</a>             814 sapi/phpdbg/phpdbg_watch.c 	watch = phpdbg_check_for_watchpoint(</span>
<span class='curline'><a href='../S/1572.html#L822'>watch</a>             822 sapi/phpdbg/phpdbg_watch.c 	if (watch == NULL) {</span>
<span class='curline'><a href='../S/1572.html#L826'>watch</a>             826 sapi/phpdbg/phpdbg_watch.c 	page = phpdbg_get_page_boundary(watch-&gt;addr.ptr);</span>
<span class='curline'><a href='../S/1572.html#L827'>watch</a>             827 sapi/phpdbg/phpdbg_watch.c 	size = phpdbg_get_total_page_size(watch-&gt;addr.ptr, watch-&gt;size);</span>
<span class='curline'><a href='../S/1572.html#L850'>watch</a>             850 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch = (phpdbg_watchpoint_t *) Z_PTR_P(pDest);</span>
<span class='curline'><a href='../S/1572.html#L852'>watch</a>             852 sapi/phpdbg/phpdbg_watch.c 	if (watch-&gt;flags &amp; PHPDBG_WATCH_IMPLICIT) {</span>
<span class='curline'><a href='../S/1572.html#L853'>watch</a>             853 sapi/phpdbg/phpdbg_watch.c 		watch-&gt;flags = PHPDBG_WATCH_SIMPLE; // tiny hack for delete_implicit_parents</span>
<span class='curline'><a href='../S/1572.html#L855'>watch</a>             855 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L856'>watch</a>             856 sapi/phpdbg/phpdbg_watch.c 			phpdbg_delete_zval_watchpoints_recursive(watch);</span>
<span class='curline'><a href='../S/1572.html#L857'>watch</a>             857 sapi/phpdbg/phpdbg_watch.c 		} else if (watch-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L860'>watch</a>             860 sapi/phpdbg/phpdbg_watch.c 			watch-&gt;implicit_ht_count++;</span>
<span class='curline'><a href='../S/1572.html#L862'>watch</a>             862 sapi/phpdbg/phpdbg_watch.c 			ZEND_HASH_FOREACH_PTR(&amp;((phpdbg_watch_ht_info *) phpdbg_btree_find(&amp;PHPDBG_G(watch_HashTables), (zend_ulong) HT_WATCH_HT(watch))-&gt;ptr)-&gt;watches, watchpoint) {</span>
<span class='curline'><a href='../S/1572.html#L868'>watch</a>             868 sapi/phpdbg/phpdbg_watch.c 	phpdbg_delete_implicit_parents(watch);</span>
<span class='curline'><a href='../S/1572.html#L870'>watch</a>             870 sapi/phpdbg/phpdbg_watch.c 	phpdbg_deactivate_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L871'>watch</a>             871 sapi/phpdbg/phpdbg_watch.c 	phpdbg_remove_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L873'>watch</a>             873 sapi/phpdbg/phpdbg_watch.c 	phpdbg_free_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L874'>watch</a>             874 sapi/phpdbg/phpdbg_watch.c 	efree(watch);</span>
<span class='curline'><a href='../S/1572.html#L920'>watch</a>             920 sapi/phpdbg/phpdbg_watch.c 		phpdbg_watchpoint_t *watch = result-&gt;ptr;</span>
<span class='curline'><a href='../S/1572.html#L921'>watch</a>             921 sapi/phpdbg/phpdbg_watch.c 		void *oldPtr = (char *) &amp;dump-&gt;data + ((size_t) watch-&gt;addr.ptr - (size_t) dump-&gt;page);</span>
<span class='curline'><a href='../S/1572.html#L925'>watch</a>             925 sapi/phpdbg/phpdbg_watch.c 		if ((size_t) watch-&gt;addr.ptr &lt; (size_t) dump-&gt;page || (size_t) watch-&gt;addr.ptr + watch-&gt;size &gt; (size_t) dump-&gt;page + dump-&gt;size) {</span>
<span class='curline'><a href='../S/1572.html#L930'>watch</a>             930 sapi/phpdbg/phpdbg_watch.c 		if ((watch-&gt;type == WATCH_ON_HASHTABLE || watch-&gt;type == WATCH_ON_ZVAL) &amp;&amp; watch-&gt;parent_container) {</span>
<span class='curline'><a href='../S/1572.html#L931'>watch</a>             931 sapi/phpdbg/phpdbg_watch.c 			if ((curTest = zend_symtable_find(watch-&gt;parent_container, watch-&gt;name_in_parent))) {</span>
<span class='curline'><a href='../S/1572.html#L936'>watch</a>             936 sapi/phpdbg/phpdbg_watch.c 				if (watch-&gt;type == WATCH_ON_HASHTABLE) {</span>
<span class='curline'><a href='../S/1572.html#L947'>watch</a>             947 sapi/phpdbg/phpdbg_watch.c 				if (curTest != watch-&gt;addr.ptr) {</span>
<span class='curline'><a href='../S/1572.html#L948'>watch</a>             948 sapi/phpdbg/phpdbg_watch.c 					phpdbg_deactivate_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L949'>watch</a>             949 sapi/phpdbg/phpdbg_watch.c 					phpdbg_remove_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L950'>watch</a>             950 sapi/phpdbg/phpdbg_watch.c 					watch-&gt;addr.ptr = curTest;</span>
<span class='curline'><a href='../S/1572.html#L951'>watch</a>             951 sapi/phpdbg/phpdbg_watch.c 					phpdbg_store_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L952'>watch</a>             952 sapi/phpdbg/phpdbg_watch.c 					phpdbg_activate_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L965'>watch</a>             965 sapi/phpdbg/phpdbg_watch.c 			switch (watch-&gt;type) {</span>
<span class='curline'><a href='../S/1572.html#L967'>watch</a>             967 sapi/phpdbg/phpdbg_watch.c 					do_break = memcmp(oldPtr, watch-&gt;addr.zv, sizeof(zend_value) + sizeof(uint32_t) /* value + typeinfo */) != 0;</span>
<span class='curline'><a href='../S/1572.html#L973'>watch</a>             973 sapi/phpdbg/phpdbg_watch.c 					do_break = zend_hash_num_elements(HT_PTR_HT(oldPtr)) != zend_hash_num_elements(HT_WATCH_HT(watch));</span>
<span class='curline'><a href='../S/1572.html#L979'>watch</a>             979 sapi/phpdbg/phpdbg_watch.c 					do_break = memcmp(oldPtr, watch-&gt;addr.ref, sizeof(uint32_t) /* no zend_refcounted metadata info */) != 0;</span>
<span class='curline'><a href='../S/1572.html#L989'>watch</a>             989 sapi/phpdbg/phpdbg_watch.c 			if (!(watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL)) {</span>
<span class='curline'><a href='../S/1572.html#L996'>watch</a>             996 sapi/phpdbg/phpdbg_watch.c 				phpdbg_notice("watchhit", "variable=\"%s\"", "Breaking on watchpoint %.*s", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str));</span>
<span class='curline'><a href='../S/1572.html#L1000'>watch</a>            1000 sapi/phpdbg/phpdbg_watch.c 			switch (watch-&gt;type) {</span>
<span class='curline'><a href='../S/1572.html#L1002'>watch</a>            1002 sapi/phpdbg/phpdbg_watch.c 					zend_bool show_value = memcmp(oldPtr, watch-&gt;addr.zv, sizeof(zend_value) + sizeof(uint32_t) /* no metadata info */) != 0;</span>
<span class='curline'><a href='../S/1572.html#L1004'>watch</a>            1004 sapi/phpdbg/phpdbg_watch.c 					if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; (removed || show_value)) {</span>
<span class='curline'><a href='../S/1572.html#L1019'>watch</a>            1019 sapi/phpdbg/phpdbg_watch.c 						if (watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) {</span>
<span class='curline'><a href='../S/1572.html#L1020'>watch</a>            1020 sapi/phpdbg/phpdbg_watch.c 							phpdbg_notice("watchdelete", "variable=\"%.*s\"", "Watchpoint %.*s was unset, removing watchpoint", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str));</span>
<span class='curline'><a href='../S/1572.html#L1022'>watch</a>            1022 sapi/phpdbg/phpdbg_watch.c 						zend_hash_del(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1572.html#L1027'>watch</a>            1027 sapi/phpdbg/phpdbg_watch.c 							phpdbg_remove_watch_collision(watch);</span>
<span class='curline'><a href='../S/1572.html#L1032'>watch</a>            1032 sapi/phpdbg/phpdbg_watch.c 					if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; show_value) {</span>
<span class='curline'><a href='../S/1572.html#L1033'>watch</a>            1033 sapi/phpdbg/phpdbg_watch.c 						phpdbg_out("New value%s: ", Z_ISREF_P(watch-&gt;addr.zv) ? " (reference)" : "");</span>
<span class='curline'><a href='../S/1572.html#L1034'>watch</a>            1034 sapi/phpdbg/phpdbg_watch.c 						phpdbg_xml("&lt;watchvalue %r%s type=\"new\"&gt;", Z_ISREF_P(watch-&gt;addr.zv) ? " reference=\"reference\"" : "");</span>
<span class='curline'><a href='../S/1572.html#L1035'>watch</a>            1035 sapi/phpdbg/phpdbg_watch.c 						zend_print_flat_zval_r(watch-&gt;addr.zv);</span>
<span class='curline'><a href='../S/1572.html#L1041'>watch</a>            1041 sapi/phpdbg/phpdbg_watch.c 					if (Z_PTR_P(watch-&gt;addr.zv) != Z_PTR_P((zval *) oldPtr) || Z_TYPE_P(watch-&gt;addr.zv) != Z_TYPE_P((zval *) oldPtr)) {</span>
<span class='curline'><a href='../S/1572.html#L1043'>watch</a>            1043 sapi/phpdbg/phpdbg_watch.c 							zval *new_zv = watch-&gt;addr.zv;</span>
<span class='curline'><a href='../S/1572.html#L1044'>watch</a>            1044 sapi/phpdbg/phpdbg_watch.c 							watch-&gt;addr.ptr = oldPtr;</span>
<span class='curline'><a href='../S/1572.html#L1045'>watch</a>            1045 sapi/phpdbg/phpdbg_watch.c 							phpdbg_remove_watch_collision(watch);</span>
<span class='curline'><a href='../S/1572.html#L1046'>watch</a>            1046 sapi/phpdbg/phpdbg_watch.c 							watch-&gt;addr.zv = new_zv;</span>
<span class='curline'><a href='../S/1572.html#L1048'>watch</a>            1048 sapi/phpdbg/phpdbg_watch.c 						if (Z_REFCOUNTED_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L1049'>watch</a>            1049 sapi/phpdbg/phpdbg_watch.c 							if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; (PHPDBG_G(flags) &amp; PHPDBG_SHOW_REFCOUNTS)) {</span>
<span class='curline'><a href='../S/1572.html#L1050'>watch</a>            1050 sapi/phpdbg/phpdbg_watch.c 								phpdbg_writeln("watchrefcount", "type=\"new\" refcount=\"%d\"", "New refcount: %d", Z_REFCOUNT_P(watch-&gt;addr.zv));</span>
<span class='curline'><a href='../S/1572.html#L1052'>watch</a>            1052 sapi/phpdbg/phpdbg_watch.c 							if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L1053'>watch</a>            1053 sapi/phpdbg/phpdbg_watch.c 								phpdbg_create_recursive_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L1054'>watch</a>            1054 sapi/phpdbg/phpdbg_watch.c 							} else if (Z_ISREF_P(watch-&gt;addr.zv)) {</span>
<span class='curline'><a href='../S/1572.html#L1055'>watch</a>            1055 sapi/phpdbg/phpdbg_watch.c 								phpdbg_create_reference_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L1064'>watch</a>            1064 sapi/phpdbg/phpdbg_watch.c 					elementDiff = zend_hash_num_elements(HT_PTR_HT(oldPtr)) - zend_hash_num_elements(HT_WATCH_HT(watch));</span>
<span class='curline'><a href='../S/1572.html#L1065'>watch</a>            1065 sapi/phpdbg/phpdbg_watch.c 					if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; elementDiff) {</span>
<span class='curline'><a href='../S/1572.html#L1073'>watch</a>            1073 sapi/phpdbg/phpdbg_watch.c 					if (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) {</span>
<span class='curline'><a href='../S/1572.html#L1074'>watch</a>            1074 sapi/phpdbg/phpdbg_watch.c 						phpdbg_create_recursive_ht_watch(watch);</span>
<span class='curline'><a href='../S/1572.html#L1076'>watch</a>            1076 sapi/phpdbg/phpdbg_watch.c 					if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; HT_WATCH_HT(watch)-&gt;nInternalPointer != HT_PTR_HT(oldPtr)-&gt;nInternalPointer) {</span>
<span class='curline'><a href='../S/1572.html#L1081'>watch</a>            1081 sapi/phpdbg/phpdbg_watch.c 					if ((watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) &amp;&amp; (PHPDBG_G(flags) &amp; PHPDBG_SHOW_REFCOUNTS)) {</span>
<span class='curline'><a href='../S/1572.html#L1083'>watch</a>            1083 sapi/phpdbg/phpdbg_watch.c 						phpdbg_writeln("watchrefcount", "type=\"new\" refcount=\"%d\"", "New refcount: %d", GC_REFCOUNT(watch-&gt;addr.ref));</span>
<span class='curline'><a href='../S/1572.html#L1122'>watch</a>            1122 sapi/phpdbg/phpdbg_watch.c 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1572.html#L1126'>watch</a>            1126 sapi/phpdbg/phpdbg_watch.c 	ZEND_HASH_FOREACH_PTR(&amp;PHPDBG_G(watchpoints), watch) {</span>
<span class='curline'><a href='../S/1572.html#L1127'>watch</a>            1127 sapi/phpdbg/phpdbg_watch.c 		if (watch-&gt;flags &amp; PHPDBG_WATCH_NORMAL) {</span>
<span class='curline'><a href='../S/1572.html#L1128'>watch</a>            1128 sapi/phpdbg/phpdbg_watch.c 			phpdbg_writeln("watchvariable", "variable=\"%.*s\" on=\"%s\" type=\"%s\"", "%.*s (%s, %s)", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str), watch-&gt;type == WATCH_ON_HASHTABLE ? "array" : watch-&gt;type == WATCH_ON_REFCOUNTED ? "refcount" : "variable", watch-&gt;flags == PHPDBG_WATCH_RECURSIVE ? "recursive" : "simple");</span>
<span class='curline'><a href='../S/1572.html#L1141'>watch</a>            1141 sapi/phpdbg/phpdbg_watch.c 		phpdbg_watchpoint_t *watch = result-&gt;ptr;</span>
<span class='curline'><a href='../S/1572.html#L1143'>watch</a>            1143 sapi/phpdbg/phpdbg_watch.c 		if ((size_t) watch-&gt;addr.ptr + watch-&gt;size &gt; (size_t) ptr) {</span>
<span class='curline'><a href='../S/1572.html#L1144'>watch</a>            1144 sapi/phpdbg/phpdbg_watch.c 			if (watch-&gt;type == WATCH_ON_REFCOUNTED) {</span>
<span class='curline'><a href='../S/1572.html#L1146'>watch</a>            1146 sapi/phpdbg/phpdbg_watch.c 				phpdbg_deactivate_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L1147'>watch</a>            1147 sapi/phpdbg/phpdbg_watch.c 				phpdbg_remove_watchpoint(watch);</span>
<span class='curline'><a href='../S/1572.html#L1149'>watch</a>            1149 sapi/phpdbg/phpdbg_watch.c 				if (watch-&gt;type == WATCH_ON_ZVAL) {</span>
<span class='curline'><a href='../S/1572.html#L1150'>watch</a>            1150 sapi/phpdbg/phpdbg_watch.c 					phpdbg_remove_watch_collision(watch);</span>
<span class='curline'><a href='../S/1572.html#L1152'>watch</a>            1152 sapi/phpdbg/phpdbg_watch.c 				if (watch-&gt;type == WATCH_ON_HASHTABLE &amp;&amp; (watch-&gt;flags &amp; PHPDBG_WATCH_SIMPLE)) {</span>
<span class='curline'><a href='../S/1572.html#L1154'>watch</a>            1154 sapi/phpdbg/phpdbg_watch.c 					phpdbg_notice("watchdelete", "variable=\"%.*s\" recursive=\"%s\"", "Array %.*s was removed, removing watchpoint%s", (int) ZSTR_LEN(watch-&gt;str), ZSTR_VAL(watch-&gt;str), (watch-&gt;flags &amp; PHPDBG_WATCH_RECURSIVE) ? " recursively" : "");</span>
<span class='curline'><a href='../S/1572.html#L1156'>watch</a>            1156 sapi/phpdbg/phpdbg_watch.c 				if (watch-&gt;type == WATCH_ON_HASHTABLE || watch-&gt;parent == NULL || watch-&gt;parent-&gt;type != WATCH_ON_ZVAL) { /* no references */</span>
<span class='curline'><a href='../S/1572.html#L1157'>watch</a>            1157 sapi/phpdbg/phpdbg_watch.c 					zend_hash_del(&amp;PHPDBG_G(watchpoints), watch-&gt;str);</span>
<span class='curline'><a href='../S/1573.html#L80'>watch</a>              80 sapi/phpdbg/phpdbg_watch.h 	phpdbg_watchpoint_t *watch;</span>
<span class='curline'><a href='../S/1573.html#L99'>watch</a>              99 sapi/phpdbg/phpdbg_watch.h void phpdbg_create_addr_watchpoint(void *addr, size_t size, phpdbg_watchpoint_t *watch);</span>
<span class='curline'><a href='../S/1573.html#L100'>watch</a>             100 sapi/phpdbg/phpdbg_watch.h void phpdbg_create_zval_watchpoint(zval *zv, phpdbg_watchpoint_t *watch);</span>
</pre>
</body>
</html>
