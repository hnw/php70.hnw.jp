<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>new_persistent_script</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/849.html#L1160'>new_persistent_script</a> 1160 ext/opcache/ZendAccelerator.c static zend_persistent_script *cache_script_in_file_cache(zend_persistent_script *new_persistent_script, int *from_shared_memory)</span>
<span class='curline'><a href='../S/849.html#L1165'>new_persistent_script</a> 1165 ext/opcache/ZendAccelerator.c 	if (!zend_accel_script_persistable(new_persistent_script)) {</span>
<span class='curline'><a href='../S/849.html#L1166'>new_persistent_script</a> 1166 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1169'>new_persistent_script</a> 1169 ext/opcache/ZendAccelerator.c 	if (!zend_accel_script_optimize(new_persistent_script)) {</span>
<span class='curline'><a href='../S/849.html#L1170'>new_persistent_script</a> 1170 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1176'>new_persistent_script</a> 1176 ext/opcache/ZendAccelerator.c 	memory_used = zend_accel_script_persist_calc(new_persistent_script, NULL, 0);</span>
<span class='curline'><a href='../S/849.html#L1188'>new_persistent_script</a> 1188 ext/opcache/ZendAccelerator.c 	new_persistent_script = zend_accel_script_persist(new_persistent_script, NULL, 0);</span>
<span class='curline'><a href='../S/849.html#L1192'>new_persistent_script</a> 1192 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;is_phar =</span>
<span class='curline'><a href='../S/849.html#L1193'>new_persistent_script</a> 1193 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;full_path &amp;&amp;</span>
<span class='curline'><a href='../S/849.html#L1194'>new_persistent_script</a> 1194 ext/opcache/ZendAccelerator.c 		strstr(ZSTR_VAL(new_persistent_script-&gt;full_path), ".phar") &amp;&amp;</span>
<span class='curline'><a href='../S/849.html#L1195'>new_persistent_script</a> 1195 ext/opcache/ZendAccelerator.c 		!strstr(ZSTR_VAL(new_persistent_script-&gt;full_path), "://");</span>
<span class='curline'><a href='../S/849.html#L1198'>new_persistent_script</a> 1198 ext/opcache/ZendAccelerator.c 	if ((char*)new_persistent_script-&gt;mem + new_persistent_script-&gt;size != (char*)ZCG(mem)) {</span>
<span class='curline'><a href='../S/849.html#L1200'>new_persistent_script</a> 1200 ext/opcache/ZendAccelerator.c 			((char*)new_persistent_script-&gt;mem + new_persistent_script-&gt;size &lt; (char*)ZCG(mem)) ? ACCEL_LOG_ERROR : ACCEL_LOG_WARNING,</span>
<span class='curline'><a href='../S/849.html#L1202'>new_persistent_script</a> 1202 ext/opcache/ZendAccelerator.c 			ZSTR_VAL(new_persistent_script-&gt;full_path),</span>
<span class='curline'><a href='../S/849.html#L1203'>new_persistent_script</a> 1203 ext/opcache/ZendAccelerator.c 			new_persistent_script-&gt;mem,</span>
<span class='curline'><a href='../S/849.html#L1204'>new_persistent_script</a> 1204 ext/opcache/ZendAccelerator.c 			(char *)new_persistent_script-&gt;mem + new_persistent_script-&gt;size,</span>
<span class='curline'><a href='../S/849.html#L1208'>new_persistent_script</a> 1208 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;dynamic_members.checksum = zend_accel_script_checksum(new_persistent_script);</span>
<span class='curline'><a href='../S/849.html#L1210'>new_persistent_script</a> 1210 ext/opcache/ZendAccelerator.c 	zend_file_cache_script_store(new_persistent_script, 0);</span>
<span class='curline'><a href='../S/849.html#L1213'>new_persistent_script</a> 1213 ext/opcache/ZendAccelerator.c 	return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1217'>new_persistent_script</a> 1217 ext/opcache/ZendAccelerator.c static zend_persistent_script *cache_script_in_shared_memory(zend_persistent_script *new_persistent_script, char *key, unsigned int key_length, int *from_shared_memory)</span>
<span class='curline'><a href='../S/849.html#L1223'>new_persistent_script</a> 1223 ext/opcache/ZendAccelerator.c 	if (!zend_accel_script_persistable(new_persistent_script)) {</span>
<span class='curline'><a href='../S/849.html#L1224'>new_persistent_script</a> 1224 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1227'>new_persistent_script</a> 1227 ext/opcache/ZendAccelerator.c 	if (!zend_accel_script_optimize(new_persistent_script)) {</span>
<span class='curline'><a href='../S/849.html#L1228'>new_persistent_script</a> 1228 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1239'>new_persistent_script</a> 1239 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1245'>new_persistent_script</a> 1245 ext/opcache/ZendAccelerator.c 	bucket = zend_accel_hash_find_entry(&amp;ZCSG(hash), new_persistent_script-&gt;full_path);</span>
<span class='curline'><a href='../S/849.html#L1252'>new_persistent_script</a> 1252 ext/opcache/ZendAccelerator.c 			     (new_persistent_script-&gt;timestamp == existing_persistent_script-&gt;timestamp))) {</span>
<span class='curline'><a href='../S/849.html#L1256'>new_persistent_script</a> 1256 ext/opcache/ZendAccelerator.c 			return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1264'>new_persistent_script</a> 1264 ext/opcache/ZendAccelerator.c 	memory_used = zend_accel_script_persist_calc(new_persistent_script, key, key_length);</span>
<span class='curline'><a href='../S/849.html#L1278'>new_persistent_script</a> 1278 ext/opcache/ZendAccelerator.c 		return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1282'>new_persistent_script</a> 1282 ext/opcache/ZendAccelerator.c 	new_persistent_script = zend_accel_script_persist(new_persistent_script, &amp;key, key_length);</span>
<span class='curline'><a href='../S/849.html#L1286'>new_persistent_script</a> 1286 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;is_phar =</span>
<span class='curline'><a href='../S/849.html#L1287'>new_persistent_script</a> 1287 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;full_path &amp;&amp;</span>
<span class='curline'><a href='../S/849.html#L1288'>new_persistent_script</a> 1288 ext/opcache/ZendAccelerator.c 		strstr(ZSTR_VAL(new_persistent_script-&gt;full_path), ".phar") &amp;&amp;</span>
<span class='curline'><a href='../S/849.html#L1289'>new_persistent_script</a> 1289 ext/opcache/ZendAccelerator.c 		!strstr(ZSTR_VAL(new_persistent_script-&gt;full_path), "://");</span>
<span class='curline'><a href='../S/849.html#L1292'>new_persistent_script</a> 1292 ext/opcache/ZendAccelerator.c 	if ((char*)new_persistent_script-&gt;mem + new_persistent_script-&gt;size != (char*)ZCG(mem)) {</span>
<span class='curline'><a href='../S/849.html#L1294'>new_persistent_script</a> 1294 ext/opcache/ZendAccelerator.c 			((char*)new_persistent_script-&gt;mem + new_persistent_script-&gt;size &lt; (char*)ZCG(mem)) ? ACCEL_LOG_ERROR : ACCEL_LOG_WARNING,</span>
<span class='curline'><a href='../S/849.html#L1296'>new_persistent_script</a> 1296 ext/opcache/ZendAccelerator.c 			ZSTR_VAL(new_persistent_script-&gt;full_path),</span>
<span class='curline'><a href='../S/849.html#L1297'>new_persistent_script</a> 1297 ext/opcache/ZendAccelerator.c 			new_persistent_script-&gt;mem,</span>
<span class='curline'><a href='../S/849.html#L1298'>new_persistent_script</a> 1298 ext/opcache/ZendAccelerator.c 			(char *)new_persistent_script-&gt;mem + new_persistent_script-&gt;size,</span>
<span class='curline'><a href='../S/849.html#L1302'>new_persistent_script</a> 1302 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;dynamic_members.checksum = zend_accel_script_checksum(new_persistent_script);</span>
<span class='curline'><a href='../S/849.html#L1305'>new_persistent_script</a> 1305 ext/opcache/ZendAccelerator.c 	bucket = zend_accel_hash_update(&amp;ZCSG(hash), ZSTR_VAL(new_persistent_script-&gt;full_path), ZSTR_LEN(new_persistent_script-&gt;full_path), 0, new_persistent_script);</span>
<span class='curline'><a href='../S/849.html#L1307'>new_persistent_script</a> 1307 ext/opcache/ZendAccelerator.c 		zend_accel_error(ACCEL_LOG_INFO, "Cached script '%s'", new_persistent_script-&gt;full_path);</span>
<span class='curline'><a href='../S/849.html#L1311'>new_persistent_script</a> 1311 ext/opcache/ZendAccelerator.c 		    (ZSTR_LEN(new_persistent_script-&gt;full_path) != key_length ||</span>
<span class='curline'><a href='../S/849.html#L1312'>new_persistent_script</a> 1312 ext/opcache/ZendAccelerator.c 		     memcmp(ZSTR_VAL(new_persistent_script-&gt;full_path), key, key_length) != 0)) {</span>
<span class='curline'><a href='../S/849.html#L1324'>new_persistent_script</a> 1324 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;dynamic_members.memory_consumption = ZEND_ALIGNED_SIZE(new_persistent_script-&gt;size);</span>
<span class='curline'><a href='../S/849.html#L1331'>new_persistent_script</a> 1331 ext/opcache/ZendAccelerator.c 		zend_file_cache_script_store(new_persistent_script, 1);</span>
<span class='curline'><a href='../S/849.html#L1337'>new_persistent_script</a> 1337 ext/opcache/ZendAccelerator.c 	return new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1403'>new_persistent_script</a> 1403 ext/opcache/ZendAccelerator.c 	zend_persistent_script *new_persistent_script;</span>
<span class='curline'><a href='../S/849.html#L1470'>new_persistent_script</a> 1470 ext/opcache/ZendAccelerator.c 	new_persistent_script = create_persistent_script();</span>
<span class='curline'><a href='../S/849.html#L1480'>new_persistent_script</a> 1480 ext/opcache/ZendAccelerator.c 	EG(class_table) = CG(class_table) = &amp;new_persistent_script-&gt;class_table;</span>
<span class='curline'><a href='../S/849.html#L1505'>new_persistent_script</a> 1505 ext/opcache/ZendAccelerator.c 		free_persistent_script(new_persistent_script, 1);</span>
<span class='curline'><a href='../S/849.html#L1517'>new_persistent_script</a> 1517 ext/opcache/ZendAccelerator.c 	zend_accel_move_user_functions(&amp;ZCG(function_table), &amp;new_persistent_script-&gt;function_table);</span>
<span class='curline'><a href='../S/849.html#L1518'>new_persistent_script</a> 1518 ext/opcache/ZendAccelerator.c 	new_persistent_script-&gt;main_op_array = *op_array;</span>
<span class='curline'><a href='../S/849.html#L1525'>new_persistent_script</a> 1525 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;ping_auto_globals_mask = zend_accel_get_auto_globals();</span>
<span class='curline'><a href='../S/849.html#L1527'>new_persistent_script</a> 1527 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;ping_auto_globals_mask = zend_accel_get_auto_globals_no_jit();</span>
<span class='curline'><a href='../S/849.html#L1534'>new_persistent_script</a> 1534 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;timestamp = timestamp;</span>
<span class='curline'><a href='../S/849.html#L1535'>new_persistent_script</a> 1535 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;dynamic_members.revalidate = ZCG(request_time) + ZCG(accel_directives).revalidate_freq;</span>
<span class='curline'><a href='../S/849.html#L1539'>new_persistent_script</a> 1539 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;full_path = zend_string_copy(file_handle-&gt;opened_path);</span>
<span class='curline'><a href='../S/849.html#L1541'>new_persistent_script</a> 1541 ext/opcache/ZendAccelerator.c 		new_persistent_script-&gt;full_path = zend_string_init(file_handle-&gt;filename, strlen(file_handle-&gt;filename), 0);</span>
<span class='curline'><a href='../S/849.html#L1543'>new_persistent_script</a> 1543 ext/opcache/ZendAccelerator.c 	zend_string_hash_val(new_persistent_script-&gt;full_path);</span>
<span class='curline'><a href='../S/849.html#L1546'>new_persistent_script</a> 1546 ext/opcache/ZendAccelerator.c 	return new_persistent_script;</span>
<span class='curline'><a href='../S/846.html#L384'>new_persistent_script</a>  384 ext/opcache/zend_persist_calc.c uint zend_accel_script_persist_calc(zend_persistent_script *new_persistent_script, char *key, unsigned int key_length)</span>
<span class='curline'><a href='../S/846.html#L386'>new_persistent_script</a>  386 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;mem = NULL;</span>
<span class='curline'><a href='../S/846.html#L387'>new_persistent_script</a>  387 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;size = 0;</span>
<span class='curline'><a href='../S/846.html#L388'>new_persistent_script</a>  388 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;arena_mem = NULL;</span>
<span class='curline'><a href='../S/846.html#L389'>new_persistent_script</a>  389 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;arena_size = 0;</span>
<span class='curline'><a href='../S/846.html#L390'>new_persistent_script</a>  390 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;corrupted = 0;</span>
<span class='curline'><a href='../S/846.html#L391'>new_persistent_script</a>  391 ext/opcache/zend_persist_calc.c 	ZCG(current_persistent_script) = new_persistent_script;</span>
<span class='curline'><a href='../S/846.html#L393'>new_persistent_script</a>  393 ext/opcache/zend_persist_calc.c 	ADD_DUP_SIZE(new_persistent_script, sizeof(zend_persistent_script));</span>
<span class='curline'><a href='../S/846.html#L398'>new_persistent_script</a>  398 ext/opcache/zend_persist_calc.c 		new_persistent_script-&gt;corrupted = 1;</span>
<span class='curline'><a href='../S/846.html#L400'>new_persistent_script</a>  400 ext/opcache/zend_persist_calc.c 	ADD_STRING(new_persistent_script-&gt;full_path);</span>
<span class='curline'><a href='../S/846.html#L404'>new_persistent_script</a>  404 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;size = (new_persistent_script-&gt;size + 63) &amp; ~63;</span>
<span class='curline'><a href='../S/846.html#L407'>new_persistent_script</a>  407 ext/opcache/zend_persist_calc.c 	zend_accel_persist_class_table_calc(&amp;new_persistent_script-&gt;class_table);</span>
<span class='curline'><a href='../S/846.html#L408'>new_persistent_script</a>  408 ext/opcache/zend_persist_calc.c 	zend_hash_persist_calc(&amp;new_persistent_script-&gt;function_table, zend_persist_op_array_calc);</span>
<span class='curline'><a href='../S/846.html#L409'>new_persistent_script</a>  409 ext/opcache/zend_persist_calc.c 	zend_persist_op_array_calc_ex(&amp;new_persistent_script-&gt;main_op_array);</span>
<span class='curline'><a href='../S/846.html#L413'>new_persistent_script</a>  413 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;arena_size = (new_persistent_script-&gt;arena_size + 63) &amp; ~63;</span>
<span class='curline'><a href='../S/846.html#L416'>new_persistent_script</a>  416 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;size += new_persistent_script-&gt;arena_size;</span>
<span class='curline'><a href='../S/846.html#L417'>new_persistent_script</a>  417 ext/opcache/zend_persist_calc.c 	new_persistent_script-&gt;corrupted = 0;</span>
<span class='curline'><a href='../S/846.html#L421'>new_persistent_script</a>  421 ext/opcache/zend_persist_calc.c 	return new_persistent_script-&gt;size;</span>
</pre>
</body>
</html>
