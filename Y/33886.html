<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>querystr</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/954.html#L2449'>querystr</a>         2449 ext/pgsql/pgsql.c 		smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L2452'>querystr</a>         2452 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, "select relname from pg_class where oid=");</span>
<span class='curline'><a href='../S/954.html#L2453'>querystr</a>         2453 ext/pgsql/pgsql.c 		smart_str_append_unsigned(&amp;querystr, oid);</span>
<span class='curline'><a href='../S/954.html#L2454'>querystr</a>         2454 ext/pgsql/pgsql.c 		smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L2456'>querystr</a>         2456 ext/pgsql/pgsql.c 		if ((tmp_res = PQexec(pg_result-&gt;conn, ZSTR_VAL(querystr.s))) == NULL || PQresultStatus(tmp_res) != PGRES_TUPLES_OK) {</span>
<span class='curline'><a href='../S/954.html#L2460'>querystr</a>         2460 ext/pgsql/pgsql.c 			smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L2465'>querystr</a>         2465 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L5493'>querystr</a>         5493 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L5517'>querystr</a>         5517 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr,</span>
<span class='curline'><a href='../S/954.html#L5527'>querystr</a>         5527 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr,</span>
<span class='curline'><a href='../S/954.html#L5538'>querystr</a>         5538 ext/pgsql/pgsql.c 		smart_str_appendl(&amp;querystr, escaped, new_len);</span>
<span class='curline'><a href='../S/954.html#L5542'>querystr</a>         5542 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "' AND n.nspname = '");</span>
<span class='curline'><a href='../S/954.html#L5546'>querystr</a>         5546 ext/pgsql/pgsql.c 		smart_str_appendl(&amp;querystr, escaped, new_len);</span>
<span class='curline'><a href='../S/954.html#L5550'>querystr</a>         5550 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "' ORDER BY a.attnum;");</span>
<span class='curline'><a href='../S/954.html#L5551'>querystr</a>         5551 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L5554'>querystr</a>         5554 ext/pgsql/pgsql.c 	pg_result = PQexec(pg_link, ZSTR_VAL(querystr.s));</span>
<span class='curline'><a href='../S/954.html#L5557'>querystr</a>         5557 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L5561'>querystr</a>         5561 ext/pgsql/pgsql.c 	smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6480'>querystr</a>         6480 ext/pgsql/pgsql.c static int do_exec(smart_str *querystr, int expect, PGconn *pg_link, zend_ulong opt) /* {{{ */</span>
<span class='curline'><a href='../S/954.html#L6483'>querystr</a>         6483 ext/pgsql/pgsql.c 		if (PQsendQuery(pg_link, ZSTR_VAL(querystr-&gt;s))) {</span>
<span class='curline'><a href='../S/954.html#L6490'>querystr</a>         6490 ext/pgsql/pgsql.c 		pg_result = PQexec(pg_link, ZSTR_VAL(querystr-&gt;s));</span>
<span class='curline'><a href='../S/954.html#L6504'>querystr</a>         6504 ext/pgsql/pgsql.c static inline void build_tablename(smart_str *querystr, PGconn *pg_link, const char *table) /* {{{ */</span>
<span class='curline'><a href='../S/954.html#L6518'>querystr</a>         6518 ext/pgsql/pgsql.c 		smart_str_appendl(querystr, token, len);</span>
<span class='curline'><a href='../S/954.html#L6521'>querystr</a>         6521 ext/pgsql/pgsql.c 		smart_str_appends(querystr, escaped);</span>
<span class='curline'><a href='../S/954.html#L6528'>querystr</a>         6528 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '.');</span>
<span class='curline'><a href='../S/954.html#L6529'>querystr</a>         6529 ext/pgsql/pgsql.c 			smart_str_appendl(querystr, tmp, len);</span>
<span class='curline'><a href='../S/954.html#L6532'>querystr</a>         6532 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '.');</span>
<span class='curline'><a href='../S/954.html#L6533'>querystr</a>         6533 ext/pgsql/pgsql.c 			smart_str_appends(querystr, escaped);</span>
<span class='curline'><a href='../S/954.html#L6548'>querystr</a>         6548 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L6558'>querystr</a>         6558 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, "INSERT INTO ");</span>
<span class='curline'><a href='../S/954.html#L6559'>querystr</a>         6559 ext/pgsql/pgsql.c 		build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/954.html#L6560'>querystr</a>         6560 ext/pgsql/pgsql.c 		smart_str_appends(&amp;querystr, " DEFAULT VALUES");</span>
<span class='curline'><a href='../S/954.html#L6574'>querystr</a>         6574 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "INSERT INTO ");</span>
<span class='curline'><a href='../S/954.html#L6575'>querystr</a>         6575 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/954.html#L6576'>querystr</a>         6576 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " (");</span>
<span class='curline'><a href='../S/954.html#L6585'>querystr</a>         6585 ext/pgsql/pgsql.c 			smart_str_appends(&amp;querystr, tmp);</span>
<span class='curline'><a href='../S/954.html#L6588'>querystr</a>         6588 ext/pgsql/pgsql.c 			smart_str_appendl(&amp;querystr, ZSTR_VAL(fld), ZSTR_LEN(fld));</span>
<span class='curline'><a href='../S/954.html#L6590'>querystr</a>         6590 ext/pgsql/pgsql.c 		smart_str_appendc(&amp;querystr, ',');</span>
<span class='curline'><a href='../S/954.html#L6592'>querystr</a>         6592 ext/pgsql/pgsql.c 	ZSTR_LEN(querystr.s)--;</span>
<span class='curline'><a href='../S/954.html#L6593'>querystr</a>         6593 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, ") VALUES (");</span>
<span class='curline'><a href='../S/954.html#L6605'>querystr</a>         6605 ext/pgsql/pgsql.c 					smart_str_appendc(&amp;querystr, '\'');</span>
<span class='curline'><a href='../S/954.html#L6606'>querystr</a>         6606 ext/pgsql/pgsql.c 					smart_str_appendl(&amp;querystr, tmp, new_len);</span>
<span class='curline'><a href='../S/954.html#L6607'>querystr</a>         6607 ext/pgsql/pgsql.c 					smart_str_appendc(&amp;querystr, '\'');</span>
<span class='curline'><a href='../S/954.html#L6610'>querystr</a>         6610 ext/pgsql/pgsql.c 					smart_str_appendl(&amp;querystr, Z_STRVAL_P(val), Z_STRLEN_P(val));</span>
<span class='curline'><a href='../S/954.html#L6614'>querystr</a>         6614 ext/pgsql/pgsql.c 				smart_str_append_long(&amp;querystr, Z_LVAL_P(val));</span>
<span class='curline'><a href='../S/954.html#L6617'>querystr</a>         6617 ext/pgsql/pgsql.c 				smart_str_appendl(&amp;querystr, buf, snprintf(buf, sizeof(buf), "%F", Z_DVAL_P(val)));</span>
<span class='curline'><a href='../S/954.html#L6620'>querystr</a>         6620 ext/pgsql/pgsql.c 				smart_str_appendl(&amp;querystr, "NULL", sizeof("NULL")-1);</span>
<span class='curline'><a href='../S/954.html#L6627'>querystr</a>         6627 ext/pgsql/pgsql.c 		smart_str_appendc(&amp;querystr, ',');</span>
<span class='curline'><a href='../S/954.html#L6630'>querystr</a>         6630 ext/pgsql/pgsql.c 	ZSTR_LEN(querystr.s)--;</span>
<span class='curline'><a href='../S/954.html#L6631'>querystr</a>         6631 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, ");");</span>
<span class='curline'><a href='../S/954.html#L6635'>querystr</a>         6635 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6638'>querystr</a>         6638 ext/pgsql/pgsql.c 		do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, (opt &amp; PGSQL_CONV_OPTS)) == 0) {</span>
<span class='curline'><a href='../S/954.html#L6648'>querystr</a>         6648 ext/pgsql/pgsql.c 		*sql = querystr.s;</span>
<span class='curline'><a href='../S/954.html#L6651'>querystr</a>         6651 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6743'>querystr</a>         6743 ext/pgsql/pgsql.c static inline int build_assignment_string(PGconn *pg_link, smart_str *querystr, HashTable *ht, int where_cond, const char *pad, int pad_len, zend_ulong opt) /* {{{ */</span>
<span class='curline'><a href='../S/954.html#L6757'>querystr</a>         6757 ext/pgsql/pgsql.c 			smart_str_appends(querystr, tmp);</span>
<span class='curline'><a href='../S/954.html#L6760'>querystr</a>         6760 ext/pgsql/pgsql.c 			smart_str_appendl(querystr, ZSTR_VAL(fld), ZSTR_LEN(fld));</span>
<span class='curline'><a href='../S/954.html#L6763'>querystr</a>         6763 ext/pgsql/pgsql.c 			smart_str_appends(querystr, " IS ");</span>
<span class='curline'><a href='../S/954.html#L6765'>querystr</a>         6765 ext/pgsql/pgsql.c 			smart_str_appendc(querystr, '=');</span>
<span class='curline'><a href='../S/954.html#L6774'>querystr</a>         6774 ext/pgsql/pgsql.c 					smart_str_appendc(querystr, '\'');</span>
<span class='curline'><a href='../S/954.html#L6775'>querystr</a>         6775 ext/pgsql/pgsql.c 					smart_str_appendl(querystr, tmp, new_len);</span>
<span class='curline'><a href='../S/954.html#L6776'>querystr</a>         6776 ext/pgsql/pgsql.c 					smart_str_appendc(querystr, '\'');</span>
<span class='curline'><a href='../S/954.html#L6779'>querystr</a>         6779 ext/pgsql/pgsql.c 					smart_str_appendl(querystr, Z_STRVAL_P(val), Z_STRLEN_P(val));</span>
<span class='curline'><a href='../S/954.html#L6783'>querystr</a>         6783 ext/pgsql/pgsql.c 				smart_str_append_long(querystr, Z_LVAL_P(val));</span>
<span class='curline'><a href='../S/954.html#L6786'>querystr</a>         6786 ext/pgsql/pgsql.c 				smart_str_appendl(querystr, buf, MIN(snprintf(buf, sizeof(buf), "%F", Z_DVAL_P(val)), sizeof(buf)-1));</span>
<span class='curline'><a href='../S/954.html#L6789'>querystr</a>         6789 ext/pgsql/pgsql.c 				smart_str_appendl(querystr, "NULL", sizeof("NULL")-1);</span>
<span class='curline'><a href='../S/954.html#L6795'>querystr</a>         6795 ext/pgsql/pgsql.c 		smart_str_appendl(querystr, pad, pad_len);</span>
<span class='curline'><a href='../S/954.html#L6797'>querystr</a>         6797 ext/pgsql/pgsql.c 	if (querystr-&gt;s) {</span>
<span class='curline'><a href='../S/954.html#L6798'>querystr</a>         6798 ext/pgsql/pgsql.c 		ZSTR_LEN(querystr-&gt;s) -= pad_len;</span>
<span class='curline'><a href='../S/954.html#L6810'>querystr</a>         6810 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L6839'>querystr</a>         6839 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "UPDATE ");</span>
<span class='curline'><a href='../S/954.html#L6840'>querystr</a>         6840 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/954.html#L6841'>querystr</a>         6841 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " SET ");</span>
<span class='curline'><a href='../S/954.html#L6843'>querystr</a>         6843 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(var_array), 0, ",", 1, opt))</span>
<span class='curline'><a href='../S/954.html#L6846'>querystr</a>         6846 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/954.html#L6848'>querystr</a>         6848 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt))</span>
<span class='curline'><a href='../S/954.html#L6851'>querystr</a>         6851 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/954.html#L6852'>querystr</a>         6852 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6854'>querystr</a>         6854 ext/pgsql/pgsql.c 	if ((opt &amp; PGSQL_DML_EXEC) &amp;&amp; do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, opt) == 0) {</span>
<span class='curline'><a href='../S/954.html#L6864'>querystr</a>         6864 ext/pgsql/pgsql.c 		*sql = querystr.s;</span>
<span class='curline'><a href='../S/954.html#L6867'>querystr</a>         6867 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6916'>querystr</a>         6916 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L6937'>querystr</a>         6937 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "DELETE FROM ");</span>
<span class='curline'><a href='../S/954.html#L6938'>querystr</a>         6938 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/954.html#L6939'>querystr</a>         6939 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/954.html#L6941'>querystr</a>         6941 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt))</span>
<span class='curline'><a href='../S/954.html#L6944'>querystr</a>         6944 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/954.html#L6945'>querystr</a>         6945 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L6947'>querystr</a>         6947 ext/pgsql/pgsql.c 	if ((opt &amp; PGSQL_DML_EXEC) &amp;&amp; do_exec(&amp;querystr, PGRES_COMMAND_OK, pg_link, opt) == 0) {</span>
<span class='curline'><a href='../S/954.html#L6956'>querystr</a>         6956 ext/pgsql/pgsql.c 		*sql = querystr.s;</span>
<span class='curline'><a href='../S/954.html#L6959'>querystr</a>         6959 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L7044'>querystr</a>         7044 ext/pgsql/pgsql.c 	smart_str querystr = {0};</span>
<span class='curline'><a href='../S/954.html#L7067'>querystr</a>         7067 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, "SELECT * FROM ");</span>
<span class='curline'><a href='../S/954.html#L7068'>querystr</a>         7068 ext/pgsql/pgsql.c 	build_tablename(&amp;querystr, pg_link, table);</span>
<span class='curline'><a href='../S/954.html#L7069'>querystr</a>         7069 ext/pgsql/pgsql.c 	smart_str_appends(&amp;querystr, " WHERE ");</span>
<span class='curline'><a href='../S/954.html#L7071'>querystr</a>         7071 ext/pgsql/pgsql.c 	if (build_assignment_string(pg_link, &amp;querystr, Z_ARRVAL_P(ids_array), 1, " AND ", sizeof(" AND ")-1, opt))</span>
<span class='curline'><a href='../S/954.html#L7074'>querystr</a>         7074 ext/pgsql/pgsql.c 	smart_str_appendc(&amp;querystr, ';');</span>
<span class='curline'><a href='../S/954.html#L7075'>querystr</a>         7075 ext/pgsql/pgsql.c 	smart_str_0(&amp;querystr);</span>
<span class='curline'><a href='../S/954.html#L7077'>querystr</a>         7077 ext/pgsql/pgsql.c 	pg_result = PQexec(pg_link, ZSTR_VAL(querystr.s));</span>
<span class='curline'><a href='../S/954.html#L7081'>querystr</a>         7081 ext/pgsql/pgsql.c 		php_error_docref(NULL, E_NOTICE, "Failed to execute '%s'", ZSTR_VAL(querystr.s));</span>
<span class='curline'><a href='../S/954.html#L7088'>querystr</a>         7088 ext/pgsql/pgsql.c 		*sql = querystr.s;</span>
<span class='curline'><a href='../S/954.html#L7091'>querystr</a>         7091 ext/pgsql/pgsql.c 		smart_str_free(&amp;querystr);</span>
</pre>
</body>
</html>
