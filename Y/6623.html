<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>Thumbnail</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/156.html#L1544'>Thumbnail</a>        1544 ext/exif/exif.c 	thumbnail_data  Thumbnail;</span>
<span class='curline'><a href='../S/156.html#L2437'>Thumbnail</a>        2437 ext/exif/exif.c 	if (!ImageInfo-&gt;read_thumbnail || !ImageInfo-&gt;Thumbnail.offset || !ImageInfo-&gt;Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L2441'>Thumbnail</a>        2441 ext/exif/exif.c 	exif_error_docref(NULL EXIFERR_CC, ImageInfo, E_NOTICE, "Thumbnail: filetype = %d", ImageInfo-&gt;Thumbnail.filetype);</span>
<span class='curline'><a href='../S/156.html#L2443'>Thumbnail</a>        2443 ext/exif/exif.c 	switch(ImageInfo-&gt;Thumbnail.filetype) {</span>
<span class='curline'><a href='../S/156.html#L2464'>Thumbnail</a>        2464 ext/exif/exif.c 			new_data = safe_erealloc(ImageInfo-&gt;Thumbnail.data, 1, ImageInfo-&gt;Thumbnail.size, new_size);</span>
<span class='curline'><a href='../S/156.html#L2465'>Thumbnail</a>        2465 ext/exif/exif.c 			ImageInfo-&gt;Thumbnail.data = new_data;</span>
<span class='curline'><a href='../S/156.html#L2466'>Thumbnail</a>        2466 ext/exif/exif.c 			memmove(ImageInfo-&gt;Thumbnail.data + new_move, ImageInfo-&gt;Thumbnail.data, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L2467'>Thumbnail</a>        2467 ext/exif/exif.c 			ImageInfo-&gt;Thumbnail.size += new_size;</span>
<span class='curline'><a href='../S/156.html#L2500'>Thumbnail</a>        2500 ext/exif/exif.c 						memmove(ImageInfo-&gt;Thumbnail.data+new_value, value_ptr, byte_count);</span>
<span class='curline'><a href='../S/156.html#L2519'>Thumbnail</a>        2519 ext/exif/exif.c 	if (ImageInfo-&gt;Thumbnail.data) {</span>
<span class='curline'><a href='../S/156.html#L2527'>Thumbnail</a>        2527 ext/exif/exif.c 	if (ImageInfo-&gt;Thumbnail.size &gt;= 65536</span>
<span class='curline'><a href='../S/156.html#L2528'>Thumbnail</a>        2528 ext/exif/exif.c 	 || ImageInfo-&gt;Thumbnail.size &lt;= 0</span>
<span class='curline'><a href='../S/156.html#L2529'>Thumbnail</a>        2529 ext/exif/exif.c 	 || ImageInfo-&gt;Thumbnail.offset &lt;= 0</span>
<span class='curline'><a href='../S/156.html#L2535'>Thumbnail</a>        2535 ext/exif/exif.c 	if ((ImageInfo-&gt;Thumbnail.offset + ImageInfo-&gt;Thumbnail.size) &gt; length) {</span>
<span class='curline'><a href='../S/156.html#L2539'>Thumbnail</a>        2539 ext/exif/exif.c 	ImageInfo-&gt;Thumbnail.data = estrndup(offset + ImageInfo-&gt;Thumbnail.offset, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L2903'>Thumbnail</a>        2903 ext/exif/exif.c 		if (!ImageInfo-&gt;Thumbnail.data) {</span>
<span class='curline'><a href='../S/156.html#L2907'>Thumbnail</a>        2907 ext/exif/exif.c 					ImageInfo-&gt;Thumbnail.width = exif_convert_any_to_int(value_ptr, format, ImageInfo-&gt;motorola_intel);</span>
<span class='curline'><a href='../S/156.html#L2912'>Thumbnail</a>        2912 ext/exif/exif.c 					ImageInfo-&gt;Thumbnail.height = exif_convert_any_to_int(value_ptr, format, ImageInfo-&gt;motorola_intel);</span>
<span class='curline'><a href='../S/156.html#L2918'>Thumbnail</a>        2918 ext/exif/exif.c 					ImageInfo-&gt;Thumbnail.offset = exif_convert_any_to_int(value_ptr, format, ImageInfo-&gt;motorola_intel);</span>
<span class='curline'><a href='../S/156.html#L2923'>Thumbnail</a>        2923 ext/exif/exif.c 						ImageInfo-&gt;Thumbnail.filetype = ImageInfo-&gt;FileType;</span>
<span class='curline'><a href='../S/156.html#L2926'>Thumbnail</a>        2926 ext/exif/exif.c 						ImageInfo-&gt;Thumbnail.filetype = IMAGE_FILETYPE_TIFF_MM;</span>
<span class='curline'><a href='../S/156.html#L2928'>Thumbnail</a>        2928 ext/exif/exif.c 					ImageInfo-&gt;Thumbnail.size = exif_convert_any_to_int(value_ptr, format, ImageInfo-&gt;motorola_intel);</span>
<span class='curline'><a href='../S/156.html#L2932'>Thumbnail</a>        2932 ext/exif/exif.c 					if (ImageInfo-&gt;Thumbnail.filetype == IMAGE_FILETYPE_UNKNOWN) {</span>
<span class='curline'><a href='../S/156.html#L2933'>Thumbnail</a>        2933 ext/exif/exif.c 						ImageInfo-&gt;Thumbnail.filetype = IMAGE_FILETYPE_JPEG;</span>
<span class='curline'><a href='../S/156.html#L2934'>Thumbnail</a>        2934 ext/exif/exif.c 						ImageInfo-&gt;Thumbnail.size = exif_convert_any_to_int(value_ptr, format, ImageInfo-&gt;motorola_intel);</span>
<span class='curline'><a href='../S/156.html#L3154'>Thumbnail</a>        3154 ext/exif/exif.c 			exif_error_docref(NULL EXIFERR_CC, ImageInfo, E_NOTICE, "Thumbnail size: 0x%04X", ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L3156'>Thumbnail</a>        3156 ext/exif/exif.c 			if (ImageInfo-&gt;Thumbnail.filetype != IMAGE_FILETYPE_UNKNOWN</span>
<span class='curline'><a href='../S/156.html#L3157'>Thumbnail</a>        3157 ext/exif/exif.c 			&amp;&amp;  ImageInfo-&gt;Thumbnail.size</span>
<span class='curline'><a href='../S/156.html#L3158'>Thumbnail</a>        3158 ext/exif/exif.c 			&amp;&amp;  ImageInfo-&gt;Thumbnail.offset</span>
<span class='curline'><a href='../S/156.html#L3427'>Thumbnail</a>        3427 ext/exif/exif.c 	uchar           c, *data = (uchar*)ImageInfo-&gt;Thumbnail.data;</span>
<span class='curline'><a href='../S/156.html#L3436'>Thumbnail</a>        3436 ext/exif/exif.c 		if (!ImageInfo-&gt;Thumbnail.width &amp;&amp; !ImageInfo-&gt;Thumbnail.height) {</span>
<span class='curline'><a href='../S/156.html#L3443'>Thumbnail</a>        3443 ext/exif/exif.c 		if (pos&gt;=ImageInfo-&gt;Thumbnail.size)</span>
<span class='curline'><a href='../S/156.html#L3446'>Thumbnail</a>        3446 ext/exif/exif.c 		if (pos&gt;=ImageInfo-&gt;Thumbnail.size)</span>
<span class='curline'><a href='../S/156.html#L3453'>Thumbnail</a>        3453 ext/exif/exif.c 			if (pos+3&gt;=ImageInfo-&gt;Thumbnail.size)</span>
<span class='curline'><a href='../S/156.html#L3461'>Thumbnail</a>        3461 ext/exif/exif.c 		if (pos+length&gt;=ImageInfo-&gt;Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L3483'>Thumbnail</a>        3483 ext/exif/exif.c 				ImageInfo-&gt;Thumbnail.height   = sof_info.height;</span>
<span class='curline'><a href='../S/156.html#L3484'>Thumbnail</a>        3484 ext/exif/exif.c 				ImageInfo-&gt;Thumbnail.width    = sof_info.width;</span>
<span class='curline'><a href='../S/156.html#L3668'>Thumbnail</a>        3668 ext/exif/exif.c 							if (ImageInfo-&gt;Thumbnail.filetype != IMAGE_FILETYPE_UNKNOWN</span>
<span class='curline'><a href='../S/156.html#L3669'>Thumbnail</a>        3669 ext/exif/exif.c 							&amp;&amp;  ImageInfo-&gt;Thumbnail.size</span>
<span class='curline'><a href='../S/156.html#L3670'>Thumbnail</a>        3670 ext/exif/exif.c 							&amp;&amp;  ImageInfo-&gt;Thumbnail.offset</span>
<span class='curline'><a href='../S/156.html#L3674'>Thumbnail</a>        3674 ext/exif/exif.c 								exif_error_docref(NULL EXIFERR_CC, ImageInfo, E_NOTICE, "%s THUMBNAIL @0x%04X + 0x%04X", ImageInfo-&gt;Thumbnail.data ? "Ignore" : "Read", ImageInfo-&gt;Thumbnail.offset, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L3676'>Thumbnail</a>        3676 ext/exif/exif.c 								if (!ImageInfo-&gt;Thumbnail.data) {</span>
<span class='curline'><a href='../S/156.html#L3677'>Thumbnail</a>        3677 ext/exif/exif.c 									ImageInfo-&gt;Thumbnail.data = safe_emalloc(ImageInfo-&gt;Thumbnail.size, 1, 0);</span>
<span class='curline'><a href='../S/156.html#L3678'>Thumbnail</a>        3678 ext/exif/exif.c 									php_stream_seek(ImageInfo-&gt;infile, ImageInfo-&gt;Thumbnail.offset, SEEK_SET);</span>
<span class='curline'><a href='../S/156.html#L3679'>Thumbnail</a>        3679 ext/exif/exif.c 									fgot = php_stream_read(ImageInfo-&gt;infile, ImageInfo-&gt;Thumbnail.data, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L3680'>Thumbnail</a>        3680 ext/exif/exif.c 									if (fgot &lt; ImageInfo-&gt;Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L3708'>Thumbnail</a>        3708 ext/exif/exif.c 					exif_error_docref(NULL EXIFERR_CC, ImageInfo, E_NOTICE, "%s THUMBNAIL @0x%04X + 0x%04X", ImageInfo-&gt;Thumbnail.data ? "Ignore" : "Read", ImageInfo-&gt;Thumbnail.offset, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L3710'>Thumbnail</a>        3710 ext/exif/exif.c 					if (!ImageInfo-&gt;Thumbnail.data &amp;&amp; ImageInfo-&gt;Thumbnail.offset &amp;&amp; ImageInfo-&gt;Thumbnail.size &amp;&amp; ImageInfo-&gt;read_thumbnail) {</span>
<span class='curline'><a href='../S/156.html#L3711'>Thumbnail</a>        3711 ext/exif/exif.c 						ImageInfo-&gt;Thumbnail.data = safe_emalloc(ImageInfo-&gt;Thumbnail.size, 1, 0);</span>
<span class='curline'><a href='../S/156.html#L3712'>Thumbnail</a>        3712 ext/exif/exif.c 						php_stream_seek(ImageInfo-&gt;infile, ImageInfo-&gt;Thumbnail.offset, SEEK_SET);</span>
<span class='curline'><a href='../S/156.html#L3713'>Thumbnail</a>        3713 ext/exif/exif.c 						fgot = php_stream_read(ImageInfo-&gt;infile, ImageInfo-&gt;Thumbnail.data, ImageInfo-&gt;Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L3714'>Thumbnail</a>        3714 ext/exif/exif.c 						if (fgot &lt; ImageInfo-&gt;Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L3817'>Thumbnail</a>        3817 ext/exif/exif.c 	EFREE_IF(ImageInfo-&gt;Thumbnail.data);</span>
<span class='curline'><a href='../S/156.html#L3884'>Thumbnail</a>        3884 ext/exif/exif.c 	ImageInfo-&gt;Thumbnail.filetype = IMAGE_FILETYPE_UNKNOWN;</span>
<span class='curline'><a href='../S/156.html#L4034'>Thumbnail</a>        4034 ext/exif/exif.c 	if (ImageInfo.Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L4037'>Thumbnail</a>        4037 ext/exif/exif.c 			exif_iif_add_tag(&amp;ImageInfo, SECTION_THUMBNAIL, "THUMBNAIL", TAG_NONE, TAG_FMT_UNDEFINED, ImageInfo.Thumbnail.size, ImageInfo.Thumbnail.data);</span>
<span class='curline'><a href='../S/156.html#L4039'>Thumbnail</a>        4039 ext/exif/exif.c 		if (!ImageInfo.Thumbnail.width || !ImageInfo.Thumbnail.height) {</span>
<span class='curline'><a href='../S/156.html#L4043'>Thumbnail</a>        4043 ext/exif/exif.c 		exif_iif_add_int(&amp;ImageInfo, SECTION_COMPUTED, "Thumbnail.FileType", ImageInfo.Thumbnail.filetype);</span>
<span class='curline'><a href='../S/156.html#L4044'>Thumbnail</a>        4044 ext/exif/exif.c 		exif_iif_add_str(&amp;ImageInfo, SECTION_COMPUTED, "Thumbnail.MimeType", (char*)php_image_type_to_mime_type(ImageInfo.Thumbnail.filetype));</span>
<span class='curline'><a href='../S/156.html#L4046'>Thumbnail</a>        4046 ext/exif/exif.c 	if (ImageInfo.Thumbnail.width &amp;&amp; ImageInfo.Thumbnail.height) {</span>
<span class='curline'><a href='../S/156.html#L4047'>Thumbnail</a>        4047 ext/exif/exif.c 		exif_iif_add_int(&amp;ImageInfo, SECTION_COMPUTED, "Thumbnail.Height", ImageInfo.Thumbnail.height);</span>
<span class='curline'><a href='../S/156.html#L4048'>Thumbnail</a>        4048 ext/exif/exif.c 		exif_iif_add_int(&amp;ImageInfo, SECTION_COMPUTED, "Thumbnail.Width",  ImageInfo.Thumbnail.width);</span>
<span class='curline'><a href='../S/156.html#L4109'>Thumbnail</a>        4109 ext/exif/exif.c 	exif_error_docref(NULL EXIFERR_CC, &amp;ImageInfo, E_NOTICE, "Thumbnail data %d %d %d, %d x %d", ImageInfo.Thumbnail.data, ImageInfo.Thumbnail.size, ImageInfo.Thumbnail.filetype, ImageInfo.Thumbnail.width, ImageInfo.Thumbnail.height);</span>
<span class='curline'><a href='../S/156.html#L4111'>Thumbnail</a>        4111 ext/exif/exif.c 	if (!ImageInfo.Thumbnail.data || !ImageInfo.Thumbnail.size) {</span>
<span class='curline'><a href='../S/156.html#L4117'>Thumbnail</a>        4117 ext/exif/exif.c 	exif_error_docref(NULL EXIFERR_CC, &amp;ImageInfo, E_NOTICE, "Returning thumbnail(%d)", ImageInfo.Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L4120'>Thumbnail</a>        4120 ext/exif/exif.c 	ZVAL_STRINGL(return_value, ImageInfo.Thumbnail.data, ImageInfo.Thumbnail.size);</span>
<span class='curline'><a href='../S/156.html#L4122'>Thumbnail</a>        4122 ext/exif/exif.c 		if (!ImageInfo.Thumbnail.width || !ImageInfo.Thumbnail.height) {</span>
<span class='curline'><a href='../S/156.html#L4127'>Thumbnail</a>        4127 ext/exif/exif.c 		ZVAL_LONG(p_width,  ImageInfo.Thumbnail.width);</span>
<span class='curline'><a href='../S/156.html#L4128'>Thumbnail</a>        4128 ext/exif/exif.c 		ZVAL_LONG(p_height, ImageInfo.Thumbnail.height);</span>
<span class='curline'><a href='../S/156.html#L4132'>Thumbnail</a>        4132 ext/exif/exif.c 		ZVAL_LONG(p_imagetype, ImageInfo.Thumbnail.filetype);</span>
</pre>
</body>
</html>
