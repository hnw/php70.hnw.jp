<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>internal_file</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/956.html#L308'>internal_file</a>     308 ext/phar/dirstream.c 	char *internal_file, *error;</span>
<span class='curline'><a href='../S/956.html#L340'>internal_file</a>     340 ext/phar/dirstream.c 	internal_file = resource-&gt;path + 1; /* strip leading "/" */</span>
<span class='curline'><a href='../S/956.html#L357'>internal_file</a>     357 ext/phar/dirstream.c 	if (*internal_file == '\0') {</span>
<span class='curline'><a href='../S/956.html#L359'>internal_file</a>     359 ext/phar/dirstream.c 		internal_file = estrndup(internal_file - 1, 1);</span>
<span class='curline'><a href='../S/956.html#L360'>internal_file</a>     360 ext/phar/dirstream.c 		ret = phar_make_dirstream(internal_file, &amp;phar-&gt;manifest);</span>
<span class='curline'><a href='../S/956.html#L370'>internal_file</a>     370 ext/phar/dirstream.c 	if (NULL != (entry = zend_hash_str_find_ptr(&amp;phar-&gt;manifest, internal_file, strlen(internal_file))) &amp;&amp; !entry-&gt;is_dir) {</span>
<span class='curline'><a href='../S/956.html#L378'>internal_file</a>     378 ext/phar/dirstream.c 		internal_file = estrdup(internal_file);</span>
<span class='curline'><a href='../S/956.html#L380'>internal_file</a>     380 ext/phar/dirstream.c 		return phar_make_dirstream(internal_file, &amp;phar-&gt;manifest);</span>
<span class='curline'><a href='../S/956.html#L382'>internal_file</a>     382 ext/phar/dirstream.c 		int i_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/956.html#L389'>internal_file</a>     389 ext/phar/dirstream.c 				if (ZSTR_LEN(str_key) &gt; (uint)i_len &amp;&amp; 0 == memcmp(ZSTR_VAL(str_key), internal_file, i_len)) {</span>
<span class='curline'><a href='../S/956.html#L391'>internal_file</a>     391 ext/phar/dirstream.c 					internal_file = estrndup(internal_file,</span>
<span class='curline'><a href='../S/956.html#L394'>internal_file</a>     394 ext/phar/dirstream.c 					return phar_make_dirstream(internal_file, &amp;phar-&gt;manifest);</span>
<span class='curline'><a href='../S/960.html#L436'>internal_file</a>     436 ext/phar/phar.c 	if (idata-&gt;internal_file &amp;&amp; !idata-&gt;internal_file-&gt;is_persistent) {</span>
<span class='curline'><a href='../S/960.html#L437'>internal_file</a>     437 ext/phar/phar.c 		if (--idata-&gt;internal_file-&gt;fp_refcount &lt; 0) {</span>
<span class='curline'><a href='../S/960.html#L438'>internal_file</a>     438 ext/phar/phar.c 			idata-&gt;internal_file-&gt;fp_refcount = 0;</span>
<span class='curline'><a href='../S/960.html#L441'>internal_file</a>     441 ext/phar/phar.c 		if (idata-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;ufp &amp;&amp; idata-&gt;fp != idata-&gt;internal_file-&gt;fp) {</span>
<span class='curline'><a href='../S/960.html#L445'>internal_file</a>     445 ext/phar/phar.c 		if (idata-&gt;internal_file-&gt;is_temp_dir) {</span>
<span class='curline'><a href='../S/960.html#L446'>internal_file</a>     446 ext/phar/phar.c 			destroy_phar_manifest_entry_int(idata-&gt;internal_file);</span>
<span class='curline'><a href='../S/960.html#L447'>internal_file</a>     447 ext/phar/phar.c 			efree(idata-&gt;internal_file);</span>
<span class='curline'><a href='../S/960.html#L466'>internal_file</a>     466 ext/phar/phar.c 	if (idata-&gt;internal_file-&gt;fp_refcount &lt; 2) {</span>
<span class='curline'><a href='../S/960.html#L467'>internal_file</a>     467 ext/phar/phar.c 		if (idata-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;fp &amp;&amp; idata-&gt;fp != idata-&gt;phar-&gt;ufp &amp;&amp; idata-&gt;fp != idata-&gt;internal_file-&gt;fp) {</span>
<span class='curline'><a href='../S/960.html#L470'>internal_file</a>     470 ext/phar/phar.c 		zend_hash_str_del(&amp;idata-&gt;phar-&gt;manifest, idata-&gt;internal_file-&gt;filename, idata-&gt;internal_file-&gt;filename_len);</span>
<span class='curline'><a href='../S/960.html#L474'>internal_file</a>     474 ext/phar/phar.c 		idata-&gt;internal_file-&gt;is_deleted = 1;</span>
<span class='curline'><a href='../S/960.html#L2343'>internal_file</a>    2343 ext/phar/phar.c 	int len = idata-&gt;internal_file-&gt;uncompressed_filesize;</span>
<span class='curline'><a href='../S/960.html#L2345'>internal_file</a>    2345 ext/phar/phar.c 	phar_entry_info *entry = idata-&gt;internal_file;</span>
<span class='curline'><a href='../S/960.html#L2360'>internal_file</a>    2360 ext/phar/phar.c 		php_stream_seek(phar_get_entrypfp(idata-&gt;internal_file), entry-&gt;header_offset, SEEK_SET);</span>
<span class='curline'><a href='../S/960.html#L2362'>internal_file</a>    2362 ext/phar/phar.c 		if (sizeof(local) != php_stream_read(phar_get_entrypfp(idata-&gt;internal_file), (char *) &amp;local, sizeof(local))) {</span>
<span class='curline'><a href='../S/960.html#L2370'>internal_file</a>    2370 ext/phar/phar.c 			php_stream_seek(phar_get_entrypfp(idata-&gt;internal_file),</span>
<span class='curline'><a href='../S/960.html#L2375'>internal_file</a>    2375 ext/phar/phar.c 			if (sizeof(desc) != php_stream_read(phar_get_entrypfp(idata-&gt;internal_file),</span>
<span class='curline'><a href='../S/961.html#L473'>internal_file</a>     473 ext/phar/phar_internal.h 	phar_entry_info          *internal_file;</span>
<span class='curline'><a href='../S/962.html#L1686'>internal_file</a>    1686 ext/phar/phar_object.c 		if (data-&gt;internal_file-&gt;fp_type == PHAR_MOD) {</span>
<span class='curline'><a href='../S/962.html#L1687'>internal_file</a>    1687 ext/phar/phar_object.c 			php_stream_close(data-&gt;internal_file-&gt;fp);</span>
<span class='curline'><a href='../S/962.html#L1690'>internal_file</a>    1690 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;fp = NULL;</span>
<span class='curline'><a href='../S/962.html#L1691'>internal_file</a>    1691 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;fp_type = PHAR_UFP;</span>
<span class='curline'><a href='../S/962.html#L1692'>internal_file</a>    1692 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;offset_abs = data-&gt;internal_file-&gt;offset = php_stream_tell(p_obj-&gt;fp);</span>
<span class='curline'><a href='../S/962.html#L1695'>internal_file</a>    1695 ext/phar/phar_object.c 		data-&gt;internal_file-&gt;uncompressed_filesize = data-&gt;internal_file-&gt;compressed_filesize =</span>
<span class='curline'><a href='../S/962.html#L1696'>internal_file</a>    1696 ext/phar/phar_object.c 			php_stream_tell(p_obj-&gt;fp) - data-&gt;internal_file-&gt;offset;</span>
<span class='curline'><a href='../S/962.html#L1713'>internal_file</a>    1713 ext/phar/phar_object.c 	data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize = contents_len;</span>
<span class='curline'><a href='../S/962.html#L3604'>internal_file</a>    3604 ext/phar/phar_object.c 		if (!data-&gt;internal_file-&gt;is_dir) {</span>
<span class='curline'><a href='../S/962.html#L3619'>internal_file</a>    3619 ext/phar/phar_object.c 			data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize = contents_len;</span>
<span class='curline'><a href='../S/966.html#L162'>internal_file</a>     162 ext/phar/stream.c 	char *internal_file;</span>
<span class='curline'><a href='../S/966.html#L191'>internal_file</a>     191 ext/phar/stream.c 	internal_file = estrdup(resource-&gt;path + 1);</span>
<span class='curline'><a href='../S/966.html#L193'>internal_file</a>     193 ext/phar/stream.c 		if (NULL == (idata = phar_get_or_create_entry_data(resource-&gt;host, host_len, internal_file, strlen(internal_file), mode, 0, &amp;error, 1))) {</span>
<span class='curline'><a href='../S/966.html#L198'>internal_file</a>     198 ext/phar/stream.c 				php_stream_wrapper_log_error(wrapper, options, "phar error: file \"%s\" could not be created in phar \"%s\"", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/966.html#L200'>internal_file</a>     200 ext/phar/stream.c 			efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L209'>internal_file</a>     209 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L213'>internal_file</a>     213 ext/phar/stream.c 			if (idata-&gt;internal_file-&gt;uncompressed_filesize == 0</span>
<span class='curline'><a href='../S/966.html#L214'>internal_file</a>     214 ext/phar/stream.c 				&amp;&amp; idata-&gt;internal_file-&gt;compressed_filesize == 0</span>
<span class='curline'><a href='../S/966.html#L219'>internal_file</a>     219 ext/phar/stream.c 				idata-&gt;internal_file-&gt;flags &amp;= ~PHAR_ENT_COMPRESSION_MASK;</span>
<span class='curline'><a href='../S/966.html#L220'>internal_file</a>     220 ext/phar/stream.c 				idata-&gt;internal_file-&gt;flags |= Z_LVAL_P(pzoption);</span>
<span class='curline'><a href='../S/966.html#L223'>internal_file</a>     223 ext/phar/stream.c 				if (Z_TYPE(idata-&gt;internal_file-&gt;metadata) != IS_UNDEF) {</span>
<span class='curline'><a href='../S/966.html#L224'>internal_file</a>     224 ext/phar/stream.c 					zval_ptr_dtor(&amp;idata-&gt;internal_file-&gt;metadata);</span>
<span class='curline'><a href='../S/966.html#L225'>internal_file</a>     225 ext/phar/stream.c 					ZVAL_UNDEF(&amp;idata-&gt;internal_file-&gt;metadata);</span>
<span class='curline'><a href='../S/966.html#L230'>internal_file</a>     230 ext/phar/stream.c 				ZVAL_COPY(&amp;idata-&gt;internal_file-&gt;metadata, metadata);</span>
<span class='curline'><a href='../S/966.html#L235'>internal_file</a>     235 ext/phar/stream.c 			*opened_path = strpprintf(MAXPATHLEN, "phar://%s/%s", idata-&gt;phar-&gt;fname, idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/966.html#L239'>internal_file</a>     239 ext/phar/stream.c 		if (!*internal_file &amp;&amp; (options &amp; STREAM_OPEN_FOR_INCLUDE)) {</span>
<span class='curline'><a href='../S/966.html#L243'>internal_file</a>     243 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L251'>internal_file</a>     251 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L272'>internal_file</a>     272 ext/phar/stream.c 				idata-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/966.html#L281'>internal_file</a>     281 ext/phar/stream.c 				efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L286'>internal_file</a>     286 ext/phar/stream.c 		if ((FAILURE == phar_get_entry_data(&amp;idata, resource-&gt;host, host_len, internal_file, strlen(internal_file), "r", 0, &amp;error, 0)) || !idata) {</span>
<span class='curline'><a href='../S/966.html#L292'>internal_file</a>     292 ext/phar/stream.c 				php_stream_wrapper_log_error(wrapper, options, "phar error: \"%s\" is not a file in phar \"%s\"", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/966.html#L294'>internal_file</a>     294 ext/phar/stream.c 			efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L302'>internal_file</a>     302 ext/phar/stream.c 		fprintf(stderr, "Filename:   %s\n", internal_file);</span>
<span class='curline'><a href='../S/966.html#L303'>internal_file</a>     303 ext/phar/stream.c 		fprintf(stderr, "Entry:      %s\n", idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/966.html#L304'>internal_file</a>     304 ext/phar/stream.c 		fprintf(stderr, "Size:       %u\n", idata-&gt;internal_file-&gt;uncompressed_filesize);</span>
<span class='curline'><a href='../S/966.html#L305'>internal_file</a>     305 ext/phar/stream.c 		fprintf(stderr, "Compressed: %u\n", idata-&gt;internal_file-&gt;flags);</span>
<span class='curline'><a href='../S/966.html#L306'>internal_file</a>     306 ext/phar/stream.c 		fprintf(stderr, "Offset:     %u\n", idata-&gt;internal_file-&gt;offset_within_phar);</span>
<span class='curline'><a href='../S/966.html#L307'>internal_file</a>     307 ext/phar/stream.c 		fprintf(stderr, "Cached:     %s\n", idata-&gt;internal_file-&gt;filedata ? "yes" : "no");</span>
<span class='curline'><a href='../S/966.html#L311'>internal_file</a>     311 ext/phar/stream.c 	if (!idata-&gt;internal_file-&gt;is_crc_checked &amp;&amp; phar_postprocess_file(idata, idata-&gt;internal_file-&gt;crc32, &amp;error, 2) != SUCCESS) {</span>
<span class='curline'><a href='../S/966.html#L315'>internal_file</a>     315 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L320'>internal_file</a>     320 ext/phar/stream.c 		char *entry = idata-&gt;internal_file-&gt;filename, *cwd;</span>
<span class='curline'><a href='../S/966.html#L323'>internal_file</a>     323 ext/phar/stream.c 		if ((idata-&gt;phar-&gt;is_tar || idata-&gt;phar-&gt;is_zip) &amp;&amp; idata-&gt;internal_file-&gt;filename_len == sizeof(".phar/stub.php")-1 &amp;&amp; !strncmp(idata-&gt;internal_file-&gt;filename, ".phar/stub.php", sizeof(".phar/stub.php")-1)) {</span>
<span class='curline'><a href='../S/966.html#L336'>internal_file</a>     336 ext/phar/stream.c 		*opened_path = strpprintf(MAXPATHLEN, "phar://%s/%s", idata-&gt;phar-&gt;fname, idata-&gt;internal_file-&gt;filename);</span>
<span class='curline'><a href='../S/966.html#L338'>internal_file</a>     338 ext/phar/stream.c 	efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L368'>internal_file</a>     368 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;link) {</span>
<span class='curline'><a href='../S/966.html#L369'>internal_file</a>     369 ext/phar/stream.c 		entry = phar_get_link_source(data-&gt;internal_file);</span>
<span class='curline'><a href='../S/966.html#L371'>internal_file</a>     371 ext/phar/stream.c 		entry = data-&gt;internal_file;</span>
<span class='curline'><a href='../S/966.html#L400'>internal_file</a>     400 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;link) {</span>
<span class='curline'><a href='../S/966.html#L401'>internal_file</a>     401 ext/phar/stream.c 		entry = phar_get_link_source(data-&gt;internal_file);</span>
<span class='curline'><a href='../S/966.html#L403'>internal_file</a>     403 ext/phar/stream.c 		entry = data-&gt;internal_file;</span>
<span class='curline'><a href='../S/966.html#L443'>internal_file</a>     443 ext/phar/stream.c 		php_stream_wrapper_log_error(stream-&gt;wrapper, stream-&gt;flags, "phar error: Could not write %d characters to \"%s\" in phar \"%s\"", (int) count, data-&gt;internal_file-&gt;filename, data-&gt;phar-&gt;fname);</span>
<span class='curline'><a href='../S/966.html#L447'>internal_file</a>     447 ext/phar/stream.c 	if (data-&gt;position &gt; (zend_off_t)data-&gt;internal_file-&gt;uncompressed_filesize) {</span>
<span class='curline'><a href='../S/966.html#L448'>internal_file</a>     448 ext/phar/stream.c 		data-&gt;internal_file-&gt;uncompressed_filesize = data-&gt;position;</span>
<span class='curline'><a href='../S/966.html#L450'>internal_file</a>     450 ext/phar/stream.c 	data-&gt;internal_file-&gt;compressed_filesize = data-&gt;internal_file-&gt;uncompressed_filesize;</span>
<span class='curline'><a href='../S/966.html#L451'>internal_file</a>     451 ext/phar/stream.c 	data-&gt;internal_file-&gt;old_flags = data-&gt;internal_file-&gt;flags;</span>
<span class='curline'><a href='../S/966.html#L452'>internal_file</a>     452 ext/phar/stream.c 	data-&gt;internal_file-&gt;is_modified = 1;</span>
<span class='curline'><a href='../S/966.html#L466'>internal_file</a>     466 ext/phar/stream.c 	if (data-&gt;internal_file-&gt;is_modified) {</span>
<span class='curline'><a href='../S/966.html#L467'>internal_file</a>     467 ext/phar/stream.c 		data-&gt;internal_file-&gt;timestamp = time(0);</span>
<span class='curline'><a href='../S/966.html#L561'>internal_file</a>     561 ext/phar/stream.c 	phar_dostat(data-&gt;phar, data-&gt;internal_file, ssb, 0);</span>
<span class='curline'><a href='../S/966.html#L573'>internal_file</a>     573 ext/phar/stream.c 	char *internal_file, *error;</span>
<span class='curline'><a href='../S/966.html#L597'>internal_file</a>     597 ext/phar/stream.c 	internal_file = resource-&gt;path + 1; /* strip leading "/" */</span>
<span class='curline'><a href='../S/966.html#L609'>internal_file</a>     609 ext/phar/stream.c 	if (*internal_file == '\0') {</span>
<span class='curline'><a href='../S/966.html#L619'>internal_file</a>     619 ext/phar/stream.c 	internal_file_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/966.html#L621'>internal_file</a>     621 ext/phar/stream.c 	if (NULL != (entry = zend_hash_str_find_ptr(&amp;phar-&gt;manifest, internal_file, internal_file_len))) {</span>
<span class='curline'><a href='../S/966.html#L626'>internal_file</a>     626 ext/phar/stream.c 	if (zend_hash_str_exists(&amp;(phar-&gt;virtual_dirs), internal_file, internal_file_len)) {</span>
<span class='curline'><a href='../S/966.html#L636'>internal_file</a>     636 ext/phar/stream.c 			if ((int)ZSTR_LEN(str_key) &gt;= internal_file_len || strncmp(ZSTR_VAL(str_key), internal_file, ZSTR_LEN(str_key))) {</span>
<span class='curline'><a href='../S/966.html#L649'>internal_file</a>     649 ext/phar/stream.c 				test_len = spprintf(&amp;test, MAXPATHLEN, "%s%s", entry-&gt;tmp, internal_file + ZSTR_LEN(str_key));</span>
<span class='curline'><a href='../S/966.html#L655'>internal_file</a>     655 ext/phar/stream.c 				if (SUCCESS != phar_mount_entry(phar, test, test_len, internal_file, internal_file_len)) {</span>
<span class='curline'><a href='../S/966.html#L660'>internal_file</a>     660 ext/phar/stream.c 				if (NULL == (entry = zend_hash_str_find_ptr(&amp;phar-&gt;manifest, internal_file, internal_file_len))) {</span>
<span class='curline'><a href='../S/966.html#L681'>internal_file</a>     681 ext/phar/stream.c 	char *internal_file, *error;</span>
<span class='curline'><a href='../S/966.html#L716'>internal_file</a>     716 ext/phar/stream.c 	internal_file = estrdup(resource-&gt;path + 1);</span>
<span class='curline'><a href='../S/966.html#L717'>internal_file</a>     717 ext/phar/stream.c 	internal_file_len = strlen(internal_file);</span>
<span class='curline'><a href='../S/966.html#L718'>internal_file</a>     718 ext/phar/stream.c 	if (FAILURE == phar_get_entry_data(&amp;idata, resource-&gt;host, host_len, internal_file, internal_file_len, "r", 0, &amp;error, 1)) {</span>
<span class='curline'><a href='../S/966.html#L726'>internal_file</a>     726 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L733'>internal_file</a>     733 ext/phar/stream.c 	if (idata-&gt;internal_file-&gt;fp_refcount &gt; 1) {</span>
<span class='curline'><a href='../S/966.html#L735'>internal_file</a>     735 ext/phar/stream.c 		php_stream_wrapper_log_error(wrapper, options, "phar error: \"%s\" in phar \"%s\", has open file pointers, cannot unlink", internal_file, resource-&gt;host);</span>
<span class='curline'><a href='../S/966.html#L736'>internal_file</a>     736 ext/phar/stream.c 		efree(internal_file);</span>
<span class='curline'><a href='../S/966.html#L742'>internal_file</a>     742 ext/phar/stream.c 	efree(internal_file);</span>
<span class='curline'><a href='../S/971.html#L443'>internal_file</a>     443 ext/phar/util.c 		(*ret)-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/971.html#L491'>internal_file</a>     491 ext/phar/util.c 	(*ret)-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/971.html#L623'>internal_file</a>     623 ext/phar/util.c 	ret-&gt;internal_file = entry;</span>
<span class='curline'><a href='../S/971.html#L735'>internal_file</a>     735 ext/phar/util.c 		dummy.internal_file = entry;</span>
<span class='curline'><a href='../S/971.html#L753'>internal_file</a>     753 ext/phar/util.c 	dummy.internal_file = entry;</span>
</pre>
</body>
</html>
