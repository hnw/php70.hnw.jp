<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>ZSMMG</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/849.html#L201'>ZSMMG</a>             201 ext/opcache/ZendAccelerator.c 	if ((((double) ZSMMG(wasted_shared_memory)) / ZCG(accel_directives).memory_consumption) &gt;= ZCG(accel_directives).max_wasted_percentage) {</span>
<span class='curline'><a href='../S/849.html#L1119'>ZSMMG</a>            1119 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/849.html#L1120'>ZSMMG</a>            1120 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/849.html#L1143'>ZSMMG</a>            1143 ext/opcache/ZendAccelerator.c 			ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/849.html#L1236'>ZSMMG</a>            1236 ext/opcache/ZendAccelerator.c 		ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/849.html#L1318'>ZSMMG</a>            1318 ext/opcache/ZendAccelerator.c 				ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/849.html#L1740'>ZSMMG</a>            1740 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/849.html#L1741'>ZSMMG</a>            1741 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/849.html#L1765'>ZSMMG</a>            1765 ext/opcache/ZendAccelerator.c 				ZSMMG(wasted_shared_memory) += persistent_script-&gt;dynamic_members.memory_consumption;</span>
<span class='curline'><a href='../S/849.html#L1766'>ZSMMG</a>            1766 ext/opcache/ZendAccelerator.c 				if (ZSMMG(memory_exhausted)) {</span>
<span class='curline'><a href='../S/849.html#L1793'>ZSMMG</a>            1793 ext/opcache/ZendAccelerator.c 		if (ZSMMG(memory_exhausted) || ZCSG(restart_pending)) {</span>
<span class='curline'><a href='../S/849.html#L1980'>ZSMMG</a>            1980 ext/opcache/ZendAccelerator.c 	ZSMMG(memory_exhausted) = 0;</span>
<span class='curline'><a href='../S/849.html#L1984'>ZSMMG</a>            1984 ext/opcache/ZendAccelerator.c 	ZSMMG(wasted_shared_memory) = 0;</span>
<span class='curline'><a href='../S/849.html#L2406'>ZSMMG</a>            2406 ext/opcache/ZendAccelerator.c 	ZSMMG(app_shared_globals) = accel_shared_globals;</span>
<span class='curline'><a href='../S/849.html#L2693'>ZSMMG</a>            2693 ext/opcache/ZendAccelerator.c 				accel_shared_globals = (zend_accel_shared_globals *) ZSMMG(app_shared_globals);</span>
<span class='curline'><a href='../S/838.html#L476'>ZSMMG</a>             476 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), "%pd", ZSMMG(memory_exhausted)?ZCSG(misses):ZCSG(misses)-ZCSG(blacklist_misses));</span>
<span class='curline'><a href='../S/838.html#L478'>ZSMMG</a>             478 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), ZEND_LONG_FMT, ZCG(accel_directives).memory_consumption-zend_shared_alloc_get_free_memory()-ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/838.html#L482'>ZSMMG</a>             482 ext/opcache/zend_accelerator_module.c 			snprintf(buf, sizeof(buf), "%pd", ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/838.html#L614'>ZSMMG</a>             614 ext/opcache/zend_accelerator_module.c 	add_assoc_bool(return_value, "cache_full", ZSMMG(memory_exhausted));</span>
<span class='curline'><a href='../S/838.html#L620'>ZSMMG</a>             620 ext/opcache/zend_accelerator_module.c 	add_assoc_long(&amp;memory_usage, "used_memory", ZCG(accel_directives).memory_consumption-zend_shared_alloc_get_free_memory()-ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/838.html#L622'>ZSMMG</a>             622 ext/opcache/zend_accelerator_module.c 	add_assoc_long(&amp;memory_usage, "wasted_memory", ZSMMG(wasted_shared_memory));</span>
<span class='curline'><a href='../S/838.html#L623'>ZSMMG</a>             623 ext/opcache/zend_accelerator_module.c 	add_assoc_double(&amp;memory_usage, "current_wasted_percentage", (((double) ZSMMG(wasted_shared_memory))/ZCG(accel_directives).memory_consumption)*100.0);</span>
<span class='curline'><a href='../S/838.html#L648'>ZSMMG</a>             648 ext/opcache/zend_accelerator_module.c 	add_assoc_long(&amp;statistics, "misses", ZSMMG(memory_exhausted)?ZCSG(misses):ZCSG(misses)-ZCSG(blacklist_misses));</span>
<span class='curline'><a href='../S/842.html#L1329'>ZSMMG</a>            1329 ext/opcache/zend_file_cache.c 			ZSMMG(memory_exhausted) = 1;</span>
<span class='curline'><a href='../S/847.html#L126'>ZSMMG</a>             126 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = NULL;</span>
<span class='curline'><a href='../S/847.html#L127'>ZSMMG</a>             127 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments_count) = 0;</span>
<span class='curline'><a href='../S/847.html#L164'>ZSMMG</a>             164 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_free) = requested_size; /* goes to tmp_shared_globals.shared_free */</span>
<span class='curline'><a href='../S/847.html#L177'>ZSMMG</a>             177 ext/opcache/zend_shared_alloc.c 				res = zend_shared_alloc_try(he, requested_size, &amp;ZSMMG(shared_segments), &amp;ZSMMG(shared_segments_count), &amp;error_in);</span>
<span class='curline'><a href='../S/847.html#L199'>ZSMMG</a>             199 ext/opcache/zend_shared_alloc.c 			res = zend_shared_alloc_try(he, requested_size, &amp;ZSMMG(shared_segments), &amp;ZSMMG(shared_segments_count), &amp;error_in);</span>
<span class='curline'><a href='../S/847.html#L221'>ZSMMG</a>             221 ext/opcache/zend_shared_alloc.c 	shared_segments_array_size = ZSMMG(shared_segments_count) * S_H(segment_type_size)();</span>
<span class='curline'><a href='../S/847.html#L231'>ZSMMG</a>             231 ext/opcache/zend_shared_alloc.c 	tmp_shared_segments = zend_shared_alloc(shared_segments_array_size + ZSMMG(shared_segments_count) * sizeof(void *));</span>
<span class='curline'><a href='../S/847.html#L237'>ZSMMG</a>             237 ext/opcache/zend_shared_alloc.c 	copy_shared_segments(tmp_shared_segments, ZSMMG(shared_segments)[0], ZSMMG(shared_segments_count), S_H(segment_type_size)());</span>
<span class='curline'><a href='../S/847.html#L242'>ZSMMG</a>             242 ext/opcache/zend_shared_alloc.c 	free(ZSMMG(shared_segments));</span>
<span class='curline'><a href='../S/847.html#L243'>ZSMMG</a>             243 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = tmp_shared_segments;</span>
<span class='curline'><a href='../S/847.html#L245'>ZSMMG</a>             245 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_memory_state).positions = (int *)zend_shared_alloc(sizeof(int) * ZSMMG(shared_segments_count));</span>
<span class='curline'><a href='../S/847.html#L246'>ZSMMG</a>             246 ext/opcache/zend_shared_alloc.c 	if (!ZSMMG(shared_memory_state).positions) {</span>
<span class='curline'><a href='../S/847.html#L265'>ZSMMG</a>             265 ext/opcache/zend_shared_alloc.c 	shared_segments_array_size = ZSMMG(shared_segments_count) * (S_H(segment_type_size)() + sizeof(void *));</span>
<span class='curline'><a href='../S/847.html#L267'>ZSMMG</a>             267 ext/opcache/zend_shared_alloc.c 	copy_shared_segments(tmp_shared_segments, ZSMMG(shared_segments)[0], ZSMMG(shared_segments_count), S_H(segment_type_size)());</span>
<span class='curline'><a href='../S/847.html#L268'>ZSMMG</a>             268 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = tmp_shared_segments;</span>
<span class='curline'><a href='../S/847.html#L270'>ZSMMG</a>             270 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L271'>ZSMMG</a>             271 ext/opcache/zend_shared_alloc.c 		S_H(detach_segment)(ZSMMG(shared_segments)[i]);</span>
<span class='curline'><a href='../S/847.html#L273'>ZSMMG</a>             273 ext/opcache/zend_shared_alloc.c 	efree(ZSMMG(shared_segments));</span>
<span class='curline'><a href='../S/847.html#L274'>ZSMMG</a>             274 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_segments) = NULL;</span>
<span class='curline'><a href='../S/847.html#L286'>ZSMMG</a>             286 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L287'>ZSMMG</a>             287 ext/opcache/zend_shared_alloc.c 		size_t block_size = ZSMMG(shared_segments)[i]-&gt;size - ZSMMG(shared_segments)[i]-&gt;pos;</span>
<span class='curline'><a href='../S/847.html#L299'>ZSMMG</a>             299 ext/opcache/zend_shared_alloc.c 		zend_accel_error(ACCEL_LOG_WARNING, "Not enough free shared space to allocate %pd bytes (%pd bytes free)", (zend_long)size, (zend_long)ZSMMG(shared_free)); \</span>
<span class='curline'><a href='../S/847.html#L301'>ZSMMG</a>             301 ext/opcache/zend_shared_alloc.c 			ZSMMG(memory_exhausted) = 1; \</span>
<span class='curline'><a href='../S/847.html#L315'>ZSMMG</a>             315 ext/opcache/zend_shared_alloc.c 	if (block_size &gt; ZSMMG(shared_free)) { /* No hope to find a big-enough block */</span>
<span class='curline'><a href='../S/847.html#L319'>ZSMMG</a>             319 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L320'>ZSMMG</a>             320 ext/opcache/zend_shared_alloc.c 		if (ZSMMG(shared_segments)[i]-&gt;size - ZSMMG(shared_segments)[i]-&gt;pos &gt;= block_size) { /* found a valid block */</span>
<span class='curline'><a href='../S/847.html#L321'>ZSMMG</a>             321 ext/opcache/zend_shared_alloc.c 			void *retval = (void *) (((char *) ZSMMG(shared_segments)[i]-&gt;p) + ZSMMG(shared_segments)[i]-&gt;pos);</span>
<span class='curline'><a href='../S/847.html#L323'>ZSMMG</a>             323 ext/opcache/zend_shared_alloc.c 			ZSMMG(shared_segments)[i]-&gt;pos += block_size;</span>
<span class='curline'><a href='../S/847.html#L324'>ZSMMG</a>             324 ext/opcache/zend_shared_alloc.c 			ZSMMG(shared_free) -= block_size;</span>
<span class='curline'><a href='../S/847.html#L464'>ZSMMG</a>             464 ext/opcache/zend_shared_alloc.c 	return ZSMMG(shared_free);</span>
<span class='curline'><a href='../S/847.html#L471'>ZSMMG</a>             471 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L472'>ZSMMG</a>             472 ext/opcache/zend_shared_alloc.c 		ZSMMG(shared_memory_state).positions[i] = ZSMMG(shared_segments)[i]-&gt;pos;</span>
<span class='curline'><a href='../S/847.html#L474'>ZSMMG</a>             474 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_memory_state).shared_free = ZSMMG(shared_free);</span>
<span class='curline'><a href='../S/847.html#L481'>ZSMMG</a>             481 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L482'>ZSMMG</a>             482 ext/opcache/zend_shared_alloc.c 		ZSMMG(shared_segments)[i]-&gt;pos = ZSMMG(shared_memory_state).positions[i];</span>
<span class='curline'><a href='../S/847.html#L484'>ZSMMG</a>             484 ext/opcache/zend_shared_alloc.c 	ZSMMG(shared_free) = ZSMMG(shared_memory_state).shared_free;</span>
<span class='curline'><a href='../S/847.html#L485'>ZSMMG</a>             485 ext/opcache/zend_shared_alloc.c 	ZSMMG(memory_exhausted) = 0;</span>
<span class='curline'><a href='../S/847.html#L486'>ZSMMG</a>             486 ext/opcache/zend_shared_alloc.c 	ZSMMG(wasted_shared_memory) = 0;</span>
<span class='curline'><a href='../S/847.html#L509'>ZSMMG</a>             509 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L510'>ZSMMG</a>             510 ext/opcache/zend_shared_alloc.c 		mprotect(ZSMMG(shared_segments)[i]-&gt;p, ZSMMG(shared_segments)[i]-&gt;size, mode);</span>
<span class='curline'><a href='../S/847.html#L523'>ZSMMG</a>             523 ext/opcache/zend_shared_alloc.c 	for (i = 0; i &lt; ZSMMG(shared_segments_count); i++) {</span>
<span class='curline'><a href='../S/847.html#L524'>ZSMMG</a>             524 ext/opcache/zend_shared_alloc.c 		if ((char*)ptr &gt;= (char*)ZSMMG(shared_segments)[i]-&gt;p &amp;&amp;</span>
<span class='curline'><a href='../S/847.html#L525'>ZSMMG</a>             525 ext/opcache/zend_shared_alloc.c 		    (char*)ptr &lt; (char*)ZSMMG(shared_segments)[i]-&gt;p + ZSMMG(shared_segments)[i]-&gt;size) {</span>
</pre>
</body>
</html>
